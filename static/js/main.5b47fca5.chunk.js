(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(0),o=n.n(a),c=n(38),u=n.n(c),i=n(26),s=n(3),l=n(64),d=n(59),b=n.n(d),f=n(6),v=n(57),p=n(46),O=n(32);n(78),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=n(40),h=n(22),E=n(110),m={board:null,bucket:[],score:0,streak:null},j=Object(E.a)({START_GAME:function(e,t){var n=t.payload.board;return Object(r.a)({},m,{board:n})},REPLACE_SQUARES:function(e,t){var n=t.payload,r=n.indexes,a=n.values,o=n.size,c=n.bucket,u=Object(h.a)(e.board),i=u[r[0]],s=!0,l=!1,d=void 0;try{for(var b,f=r[Symbol.iterator]();!(s=(b=f.next()).done);s=!0){u[b.value]=a.pop()}}catch(p){l=!0,d=p}finally{try{s||null==f.return||f.return()}finally{if(l)throw d}}var v=e.streak&&e.streak.type===i?e.streak.count+1:1;return{board:u,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:i}}}},null),g=Object(E.a)({UPDATE_HIGHSCORE:function(e,t){var n=t.payload.score;return Math.max(e,n)}},0),x=7,y=3,A="/",S="/play",M="/options",T="/tutorial",D="TOUCH",w="CLICK",C=Array(y).fill(0),_={hues:C,inputMode:D},R=Object(E.a)({CHANGE_HUE:function(e,t){var n=t.payload,a=n.index,o=n.hue,c=Object(h.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:C})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:e.inputMode===w?D:w})}},_),U=n(31),P=n.n(U),I=n(50),L=n.n(I),q=n(25),H=n.n(q),B=n(60),N=n.n(B),G=P()(function(e,t,n){return function(e,t){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}(function e(t,n){var r=t.x,a=t.y;return n?e({x:a,y:-r},n-1):{x:r,y:a}}(function(e,t){var n=e.x,r=e.y;return{x:n-t.x,y:r-t.y}}(t,e),n),e)}),z={squares:[],size:0,hidden:!1},Q=Object(E.a)({START_GAME:function(){return z},UPDATE_SELECTION:function(e,t){var n=t.payload,r=n.board,a=n.start,o=n.end,c=F(r,a,o);return L()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return z},HIDE_SELECTION:function(e){return e.squares.length<4?z:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return z},ADVANCE_TUTORIAL:function(){return z}},z),F=function(e,t,n){return Object(r.a)({},z,{size:function(e,t){var n=e.x,r=e.y,a=t.x,o=t.y;return Math.hypot(n-a,r-o)}(t,n),squares:N()(H()(0,4).map(G(function(e,t,n){var r=e.x,a=e.y;return{x:r*n+t.x*(1-n),y:a*n+t.y*(1-n)}}(t,n,.5),t)).filter(V).filter(Y(e)).filter(X(e,J(e,t))).map(W))})},W=P()(function(e){return e.x+e.y*x}),V=function(e){var t=e.x,n=e.y;return 0<=t&&t<x&&t%1===0&&0<=n&&n<x&&n%1===0},J=function(e,t){return e[W(t)]},X=P()(function(e,t,n){return J(e,n)===t}),Y=P()(function(e,t){return J(e,t)<y}),K={board:[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,1,3,3,3,2,1,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,0,3,2,3,2,2,3,3,3,0,3,1,3,0,3,3,3,3,3,3,3,3]],message:["Hi there. Find a square with corners of the same color\n         and remove it by connecting two opposite corners.","Squares have different sizes and orientations.\n         Remove bigger squares to yield a higher score.","Removing multiple squares of the same color in a row\n         will multiply your score.","The game does not stop if there are no more squares\n         to remove. It\u2019s up to you to call it quits."],step:0},$=Object(E.a)({ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},K);function Z(e){return e.selection||(e=Object(r.a)({},e,{selection:z,tutorial:K})),e.options.inputMode||(e.options.inputMode=D),e}var ee=n(13),te=n.n(ee),ne=n(14),re=n(62),ae=n.n(re),oe=n(7),ce=n(109),ue=Object(ce.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,t,n,r){return{indexes:e,values:t,size:n,bucket:r}},UPDATE_SELECTION:function(e,t,n){return{board:e,start:t,end:n}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,t){return{index:e,hue:t}},RESET_HUES:function(){return{}}}),ie=ue.requestAssureGame,se=ue.requestStartGame,le=ue.startGame,de=ue.replaceSquares,be=ue.updateSelection,fe=ue.discardSelection,ve=ue.hideSelection,pe=ue.updateHighscore,Oe=ue.advanceTutorial,ke=ue.changeInputMode,he=ue.changeHue,Ee=ue.resetHues,me=n(17),je=function(e){return e.selection},ge=function(e){return e.game&&e.game.streak},xe=function(e){return e.router.location.pathname===T?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},ye=function(e){return e.game&&e.game.bucket},Ae=function(e){return e.game&&e.game.score},Se=function(e){return e.highscore},Me=Object(me.a)(function(e){return!!function(e){return e.game}(e)},function(e){return e}),Te=Object(me.a)(ge,function(e){return e&&e.type}),De=Object(me.a)(ge,function(e){return e&&e.count}),we=Object(me.a)(je,function(e){return e.squares}),Ce=Object(me.a)(je,function(e){return e.size}),_e=Object(me.a)(je,function(e){return e.hidden}),Re=Object(me.a)(_e,function(e){return e}),Ue=function(e){return Object(me.a)(xe,we,_e,function(t,n,r){var a=n.includes(e);return{type:t&&t[e],active:a,inactive:n.length>0&&!a,hidden:r&&a,ready:4===n.length&&a}})},Pe=function(e){return e.router.location.pathname===T},Ie=function(e){return e.tutorial.message[e.tutorial.step]},Le=function(e){return e.options},qe=Object(me.a)(Le,function(e){return e.inputMode}),He=Object(me.a)(Le,function(e){return e.hues}),Be=te.a.mark(Ve),Ne=te.a.mark(Je),Ge=te.a.mark(Xe),ze=te.a.mark(Ye),Qe=te.a.mark(Ke),Fe=te.a.mark($e);function We(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(h.a)(Array(t)).reduce(function(e){var t=Object(ne.a)(e,2),o=t[0],c=t[1];0===(c=Object(h.a)(c)).length&&(c=Object(h.a)(Array((r-n)*a)).map(function(e,t){return t%(r-n)+n}));var u=Math.random()*c.length|0,i=c.splice(u,1)[0];return[Object(h.a)(o).concat([i]),c]},[[],e])}function Ve(){var e,t,n,r,a;return te.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(oe.c)();case 2:if(e=o.sent,_e(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(oe.a)(ae.a,500);case 7:if(!Pe(e)){o.next=11;break}return o.next=10,Object(oe.b)(Oe());case 10:return o.abrupt("return");case 11:return t=We(ye(e),4),n=Object(ne.a)(t,2),r=n[0],a=n[1],o.next=14,Object(oe.b)(de(we(e),r,Ce(e),a));case 14:case"end":return o.stop()}},Be,this)}function Je(){var e;return te.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(oe.c)();case 2:return e=t.sent,t.next=5,Object(oe.b)(pe(Ae(e)));case 5:case"end":return t.stop()}},Ne,this)}function Xe(){var e,t,n;return te.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=We([],Math.pow(x,2)),t=Object(ne.a)(e,1),n=t[0],r.next=3,Object(oe.b)(le(n));case 3:case"end":return r.stop()}},Ge,this)}function Ye(){var e,t,n,r;return te.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(oe.c)();case 2:if(e=a.sent,Me(e)){a.next=7;break}return t=We([],Math.pow(x,2)),n=Object(ne.a)(t,1),r=n[0],a.next=7,Object(oe.b)(le(r));case 7:case"end":return a.stop()}},ze,this)}function Ke(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.b)(fe());case 2:case"end":return e.stop()}},Qe,this)}function $e(){return te.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.d)("HIDE_SELECTION",Ve);case 2:return e.next=4,Object(oe.d)("REPLACE_SQUARES",Je);case 4:return e.next=6,Object(oe.d)("REQUEST_ASSURE_GAME",Ye);case 6:return e.next=8,Object(oe.d)("REQUEST_START_GAME",Xe);case 8:return e.next=10,Object(oe.d)("@@router/LOCATION_CHANGE",Ke);case 10:case"end":return e.stop()}},Fe,this)}var Ze=n(12).checkBEMProps;function et(e){var t=e.index,n=Object(s.e)(Ue(t));return Ze(o.a,"button",{block:"square",mods:n})}var tt=n(12).checkBEMProps;function nt(e){var t=Object(a.useRef)(),n=Object(a.useState)(null),r=Object(ne.a)(n,2),c=r[0],u=r[1],i={height:"100%",position:"absolute",width:"100%",zIndex:void 0===e.zIndex?1e4:e.zIndex};function s(){!e.isLocked&&c&&(u(null),e.onDragAbort())}return tt(o.a,"div",{style:i,"touch-action":"none",onPointerDown:function(n){return function(n){if(!e.isLocked){var r=rt(n,t);u(r),e.onDragUpdate(r,r)}}(n)},onPointerUp:function(t){!e.isLocked&&c&&(u(null),e.onDragEnd())},onPointerMove:function(n){return function(n){c&&e.onDragUpdate(c,rt(n,t))}(n)},onPointerCancel:function(){return s()},onPointerLeave:function(){return s()},onPointerOut:function(){return s()},onLostPointerCapture:function(){return s()},ref:t})}function rt(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,u=t.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var at=n(12).checkBEMProps;function ot(e){var t=e.active,n=e.gridSize,r=e.isLocked,c=e.onDragAbort,u=e.onDragEnd,i=e.onDragUpdate,s=Object(a.useState)(null),l=Object(ne.a)(s,2),d=l[0],b=l[1];if(!t)return at(o.a,o.a.Fragment,null);return at(o.a,nt,{onDragAbort:function(){b(null),c()},onDragEnd:function(){b(null),u()},onDragUpdate:function(e,t){var r={x:e.x*n|0,y:e.y*n|0},a={x:t.x*n|0,y:t.y*n|0};d&&t.x===d.x&&t.y===d.y||(b(t),i(r,a))},isLocked:r})}var ct=n(12).checkBEMProps;function ut(e){var t=e.onClick,n=e.onMouseMove,r=e.zIndex,c=void 0===r?1e4:r,u=Object(a.useRef)(),i={height:"100%",position:"absolute",width:"100%",zIndex:c};return ct(o.a,"div",{onClick:function(e){t(it(e,u))},onMouseMove:function(e){n(it(e,u))},ref:u,style:i})}function it(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,u=t.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var st=n(12).checkBEMProps;function lt(e){var t=e.active,n=e.gridSize,r=e.onDragAbort,c=e.onDragEnd,u=e.onDragUpdate,i=e.isLocked,s=Object(a.useState)(null),l=Object(ne.a)(s,2),d=l[0],b=l[1],f=Object(a.useState)(null),v=Object(ne.a)(f,2),p=v[0],O=v[1];if(!t)return st(o.a,o.a.Fragment,null);return st(o.a,ut,{onClick:function(e){if(!i){var t={x:e.x*n|0,y:e.y*n|0};d?t.x===d.x&&t.y===d.y?(b(null),O(null),r()):(b(null),O(null),c()):(b(t),O(t),u(t,t))}},onMouseMove:function(e){if(!i&&d){var t={x:e.x*n|0,y:e.y*n|0};p&&t.x===p.x&&t.y===p.y||(O(t),u(d,t))}}})}var dt=n(12).checkBEMProps;function bt(){var e=Object(s.e)(xe),t=Object(s.e)(Re),n=Object(s.e)(qe),r=Object(s.d)(),a=H()(0,Math.pow(x,2)).map(function(e){return dt(o.a,"div",{block:"board",elem:"square",key:e},dt(o.a,et,{index:e}))});return dt(o.a,"div",{block:"board"},dt(o.a,ot,{active:n===D,gridSize:x,onDragEnd:function(){return r(ve())},onDragUpdate:function(t,n){return r(be(e,t,n))},onDragAbort:function(){return r(fe())},isLocked:t}),dt(o.a,lt,{active:n===w,gridSize:x,onDragEnd:function(){return r(ve())},onDragUpdate:function(t,n){return r(be(e,t,n))},onDragAbort:function(){return r(fe())},isLocked:t}),a)}var ft=n(18),vt=n(12).checkBEMProps;function pt(){if(!Object(s.e)(Me))return null;var e=Object(s.e)(Se),t=Object(s.e)(Ae),n=Object(s.e)(De),r=Object(s.e)(Te),a=Object(s.d)();return vt(o.a,o.a.Fragment,null,vt(o.a,"div",{block:"menu",mods:{main:!0}},vt(o.a,o.a.Fragment,null,vt(o.a,"div",{block:"stat"},vt(o.a,"div",{block:"stat",elem:"title"},"Score"),vt(o.a,"div",{block:"stat",elem:"value"},t)),vt(o.a,"div",{block:"stat"},vt(o.a,"div",{block:"stat",elem:"title"},"Streak"),vt(o.a,"div",{block:"stat",elem:"square"},vt(o.a,"div",{block:"square",mods:{type:r}})),vt(o.a,"div",{block:"stat",elem:"value"},n)),vt(o.a,"div",{block:"stat"},vt(o.a,"div",{block:"stat",elem:"title"},"Highscore"),vt(o.a,"div",{block:"stat",elem:"value"},e)))),vt(o.a,"div",{block:"menu",mods:{main:!0}},vt(o.a,"div",{block:"action"},vt(o.a,ft.a,{to:A},"Back")),vt(o.a,"div",{block:"action",onClick:function(){return a(se())}},"New Game")))}var Ot=n(12).checkBEMProps;function kt(){var e=Object(s.e)(Me),t=Object(s.d)();return Object(a.useEffect)(function(){t(ie())}),e?Ot(o.a,o.a.Fragment,null,Ot(o.a,bt,null),Ot(o.a,pt,null)):null}var ht=n(12).checkBEMProps;function Et(){var e=H()(0,Math.pow(x,2)).map(function(e){return ht(o.a,"div",{block:"board",elem:"square",key:e},ht(o.a,"div",{block:"square",mods:{type:1}}))});return ht(o.a,o.a.Fragment,null,ht(o.a,"div",{block:"board"},ht(o.a,"div",{block:"board",elem:"title"},"Quood"),e),ht(o.a,"div",{block:"menu",mods:{small:!0}},ht(o.a,"div",{block:"action"},ht(o.a,ft.a,{to:S},"Play")),ht(o.a,"div",{block:"action"},ht(o.a,ft.a,{to:M},"Options")),ht(o.a,"div",{block:"action"},ht(o.a,ft.a,{to:T},"Tutorial"))))}var mt=n(12).checkBEMProps;function jt(){var e=Object(s.e)(Ie);return mt(o.a,o.a.Fragment,null,mt(o.a,bt,null),mt(o.a,"div",{block:"menu"},mt(o.a,"div",{block:"message"},e),mt(o.a,"div",{block:"action"},mt(o.a,ft.a,{to:A},"Back"))))}var gt=n(12).checkBEMProps;function xt(e){var t=e.index,n=Object(s.e)(He)[t],r=Object(s.d)();return gt(o.a,"div",{block:"slider"},gt(o.a,"div",{block:"slider",elem:"square"},gt(o.a,"div",{block:"square",mods:{type:t}})),gt(o.a,"div",{block:"slider",elem:"bar-border"},gt(o.a,nt,{onDragUpdate:function(e,n){r(he(t,360*n.x|0))},onDragAbort:function(){},onDragEnd:function(){},isLocked:!1}),gt(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(n/3.6,"%")}})))}var yt=n(12).checkBEMProps;function At(){var e=Object(s.e)(qe),t=H()(0,y).map(function(e){return yt(o.a,xt,{key:e,index:e})}),n=Object(s.d)();return yt(o.a,"div",{block:"menu"},yt(o.a,"div",{block:"menu",elem:"block"},yt(o.a,"div",{block:"options-headline"},"Input Mode"),yt(o.a,"button",{block:"action",onClick:function(){return n(ke())}},e)),yt(o.a,"div",{block:"menu",elem:"block"},yt(o.a,"div",{block:"options-headline"},"Square Colors"),t,yt(o.a,"button",{block:"action",onClick:function(){return n(Ee())}},"Reset")),yt(o.a,"div",{block:"action"},yt(o.a,ft.a,{to:A},"Back")))}var St=n(63),Mt=n.n(St),Tt=n(12).checkBEMProps;var Dt,wt=Object(l.a)(),Ct=Object(O.b)(),_t=Object(i.e)((Dt=Ct,Object(k.a)(Object(i.c)({router:Object(p.b)(Dt),game:j,tutorial:$,highscore:g,selection:Q,options:R}),Z)),Object(i.d)(b()("",{slicer:function(e){return function(e){var t=Object(r.a)({},e);return delete t.selection,delete t.tutorial,t}},key:"quood"}),Object(i.a)(Object(v.a)(Ct),wt)));wt.run($e);var Rt=n(12).checkBEMProps;u.a.render(Rt(o.a,s.a,{store:_t},Rt(o.a,p.a,{history:Ct},Rt(o.a,function(e){var t=e.children,n=Object(s.e)(He),r=Mt()(n.map(function(e,t){return["--hue".concat(t),e]}));return Tt(o.a,"div",{style:r},t)},null,Rt(o.a,f.c,null,Rt(o.a,f.a,{exact:!0,path:A,render:function(){return Rt(o.a,Et,null)}}),Rt(o.a,f.a,{exact:!0,path:S,render:function(){return Rt(o.a,kt,null)}}),Rt(o.a,f.a,{exact:!0,path:T,render:function(){return Rt(o.a,jt,null)}}),Rt(o.a,f.a,{exact:!0,path:M,render:function(){return Rt(o.a,At,null)}}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,t,n){e.exports=n(108)},78:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.5b47fca5.chunk.js.map