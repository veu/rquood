(this.webpackJsonprquood=this.webpackJsonprquood||[]).push([[0],{47:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(31),i=n.n(a),o=n(2),s=n(7),u=(n(45),n(46),n(47),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var d=n(10),j=function(e){return e.selection},f=function(e){return e.game&&e.game.streak},b=function(e){return w(e)?N(e):e.game&&e.game.board},h=function(e){return e.game&&e.game.score},v=Object(d.a)((function(e){return!!function(e){return e.game}(e)}),(function(e){return e})),O=Object(d.a)(f,(function(e){return e&&e.type})),m=Object(d.a)(f,(function(e){return e&&e.count})),x=Object(d.a)(j,(function(e){return e.squares})),g=Object(d.a)(j,(function(e){return e.size})),p=Object(d.a)(j,(function(e){return e.hidden})),y=Object(d.a)(p,(function(e){return e})),_=function(e){return Object(d.a)(b,x,p,(function(t,n,r){var c=n.includes(e);return{type:t&&t[e],active:c,inactive:n.length>0&&!c,hidden:r&&c,ready:4===n.length&&c}}))},k=function(e){return e.tutorial.message[e.tutorial.step]},N=function(e){return e.tutorial.board[e.tutorial.step]},w=function(e){return e.tutorial.active},S=function(e){return e.options},q=Object(d.a)(S,(function(e){return e.inputMode})),M=Object(d.a)(S,(function(e){return e.hues})),C=n(12),D=n.n(C),H="/play",A="/options",T="/tutorial",W=n(11),G=n(4),L=n(27),E=n.n(L),U=n(32),I=n(6),P=n(36),R=n.n(P),z=n(5),F={active:!1,board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game won\u2019t tell you when there aren\u2019t any squares left to remove.\n         You have to call it quits.\n         Enjoy!"],step:0},B=n(37),Y=n(33),J={board:null,bucket:[],score:0,streak:null},X="TOUCH",K="CLICK",Q=Array(3).fill(0),$={hues:Q,inputMode:X},V=n(14),Z=n.n(V),ee=n(26),te=n.n(ee),ne=n(34),re=n.n(ne),ce=function(e,t,n){var r=e.x,c=e.y;return{x:r*n+t.x*(1-n),y:c*n+t.y*(1-n)}},ae=function e(t,n){var r=t.x,c=t.y;return n?e({x:c,y:-r},n-1):{x:r,y:c}},ie=Z()((function(e,t,n){return function(e,t){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}(ae(function(e,t){var n=e.x,r=e.y;return{x:n-t.x,y:r-t.y}}(t,e),n),e)})),oe=function(e,t){var n=e.x,r=e.y,c=t.x,a=t.y;return Math.hypot(n-c,r-a)},se={squares:[],size:0,hidden:!1},ue=Z()((function(e){return e.x+7*e.y})),le=Z()((function(e,t){var n=t.x,r=t.y;return 0<=n&&n<7&&n%1===0&&0<=r&&r<e.length/7&&r%1===0})),de=function(e,t){return e[ue(t)]},je=Z()((function(e,t,n){return de(e,n)===t})),fe=Z()((function(e,t){return de(e,t)<3})),be=function(e){return{selection:se,resetSelection:function(){return e(Object(z.a)((function(e){e.selection=se})))},updateSelection:function(t,n){return e(Object(z.a)((function(e){var r=function(e,t,n){return Object(I.a)(Object(I.a)({},se),{},{size:oe(t,n),squares:re()(D()(0,4).map(ie(ce(t,n,.5),t)).filter(le(e)).filter(fe(e)).filter(je(e,de(e,t))).map(ue))})}(b(e),t,n);te()(r.squares,e.selection.squares)||(e.selection=r)})))},hideSelection:function(){return e(Object(z.a)((function(e){e.selection.squares.length<4?e.selection=se:e.selection.hidden=!0})))}}},he=n(21),ve=n.n(he),Oe=n(35);function me(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(W.a)(Array(t)).reduce((function(e){var t=Object(G.a)(e,2),a=t[0],i=t[1];0===(i=Object(W.a)(i)).length&&(i=Object(W.a)(Array((r-n)*c)).map((function(e,t){return t%(r-n)+n})));var o=Math.random()*i.length|0,s=i.splice(o,1)[0];return[[].concat(Object(W.a)(a),[s]),i]}),[[],e])}var xe=Object(Oe.configurePersist)({storage:localStorage}).persist,ge=R()(Object(B.devtools)(xe({key:"quood",allowlist:["game","highscore","options"]},(function(e,t){return Object(I.a)(Object(I.a)(Object(I.a)(Object(I.a)(Object(I.a)(Object(I.a)({},function(e){return{highscore:0,updateHighscore:function(){return e(Object(z.a)((function(e){e.highscore=Math.max(e.highscore,h(e))})))}}}(e)),function(e){return{tutorial:F,startTutorial:function(){return e(Object(z.a)((function(e){e.tutorial.step=0,e.tutorial.active=!0})))},endTutorial:function(){return e(Object(z.a)((function(e){e.tutorial.active=!1})))},advanceTutorial:function(){return e(Object(z.a)((function(e){e.tutorial.step+=1})))}}}(e)),function(e){return{game:null,initGame:function(t){return e(Object(z.a)((function(e){e.game=Object(I.a)(Object(I.a)({},J),{},{board:t})})))},replaceSquares:function(t,n){return e(Object(z.a)((function(e){var r,c=x(e),a=g(e),i=e.game.board[c[0]],o=Object(Y.a)(c);try{for(o.s();!(r=o.n()).done;){var s=r.value;e.game.board[s]=t.pop()}}catch(l){o.e(l)}finally{o.f()}var u=e.game.streak&&e.game.streak.type===i?e.game.streak.count+1:1;e.game.score=e.game.score+(0|a)*u,e.game.streak={count:u,type:i},e.game.bucket=n})))}}}(e)),function(e){return{options:$,changeHue:function(t,n){return e(Object(z.a)((function(e){var r=Object(W.a)(e.options.hues);r[t]=n,e.options.hues=r})))},resetHues:function(){return e(Object(z.a)((function(e){e.options.hues=Q})))},changeInputMode:function(){return e(Object(z.a)((function(e){e.options.inputMode=e.options.inputMode===K?X:K})))}}}(e)),be(e)),{},{match:function(){var e=Object(U.a)(E.a.mark((function e(){var n,r,c,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t().hideSelection(),e.next=3,ve()(0);case 3:if(p(t())){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,ve()(500);case 7:if(!w(t())){e.next=11;break}t().advanceTutorial(),e.next=16;break;case 11:return n=me((i=t()).game&&i.game.bucket,4),r=Object(G.a)(n,2),c=r[0],a=r[1],t().replaceSquares(c,a),e.next=15,ve()(0);case 15:t().updateHighscore();case 16:t().resetSelection();case 17:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}(),assureGame:function(){if(!v(t())){var e=me([],49),n=Object(G.a)(e,1)[0];t().initGame(n)}},startGame:function(){var e=me([],49),n=Object(G.a)(e,1)[0];t().initGame(n)}})})))),pe=n(0);function ye(e){var t=e.index,n=ge((function(e){return[M(e),_(t)(e)]})),r=Object(G.a)(n,2),c=r[0],a=r[1],i={filter:"hue-rotate(".concat(c[a.type],"deg)")},o="square",s=Object.entries(a).filter((function(e){var t=Object(G.a)(e,2);t[0];return!1!==t[1]})).map((function(e){var t=Object(G.a)(e,2),n=t[0],r=t[1];return"".concat(o,"_").concat(n).concat(!0===r?"":"_"+r)})),u=[o].concat(Object(W.a)(s)).join(" ");return Object(pe.jsx)("button",{className:u,style:i})}function _e(e){var t=e.isLocked,n=void 0!==t&&t,c=e.onDragUpdate,a=e.onDragEnd,i=void 0===a?function(){}:a,o=e.onDragAbort,s=void 0===o?function(){}:o,u=e.zIndex,l=void 0===u?1e4:u,d=Object(r.useRef)(),j=Object(r.useState)(null),f=Object(G.a)(j,2),b=f[0],h=f[1],v={height:"100%",position:"absolute",width:"100%",zIndex:l};function O(){!n&&b&&(h(null),s())}return Object(pe.jsx)("div",{style:v,"touch-action":"none",onPointerDown:function(e){return function(e){if(!n){var t=ke(e,d);h(t),c(t,t)}}(e)},onPointerUp:function(e){!n&&b&&(h(null),i())},onPointerMove:function(e){return function(e){b&&c(b,ke(e,d))}(e)},onPointerCancel:function(){return O()},onPointerLeave:function(){return O()},onPointerOut:function(){return O()},onLostPointerCapture:function(){return O()},ref:d})}function ke(e,t){var n=t.current.getBoundingClientRect(),r=n.x,c=n.y,a=e.pageX,i=e.pageY,o=t.current;return{x:(a-r)/o.offsetWidth,y:(i-c)/o.offsetHeight}}function Ne(e){var t=e.gridWidth,n=e.gridHeight,c=e.isLocked,a=e.onDragAbort,i=e.onDragEnd,o=e.onDragUpdate,s=Object(r.useState)(null),u=Object(G.a)(s,2),l=u[0],d=u[1];return Object(pe.jsx)(_e,{onDragAbort:function(){d(null),a()},onDragEnd:function(){d(null),i()},onDragUpdate:function(e,r){var c={x:e.x*t|0,y:e.y*n|0},a={x:r.x*t|0,y:r.y*n|0};l&&r.x===l.x&&r.y===l.y||(d(r),o(c,a))},isLocked:c})}function we(e){var t=e.onClick,n=e.onMouseMove,c=void 0===n?function(){}:n,a=e.zIndex,i=void 0===a?1e4:a,o=Object(r.useRef)(),s={height:"100%",position:"absolute",width:"100%",zIndex:i};return Object(pe.jsx)("div",{onClick:function(e){t(Se(e,o))},onMouseMove:function(e){c(Se(e,o))},ref:o,style:s})}function Se(e,t){var n=t.current.getBoundingClientRect(),r=n.x,c=n.y,a=e.pageX,i=e.pageY,o=t.current;return{x:(a-r)/o.offsetWidth,y:(i-c)/o.offsetHeight}}function qe(e){var t=e.gridWidth,n=e.gridHeight,c=e.onDragAbort,a=e.onDragEnd,i=e.onDragUpdate,o=e.isLocked,s=Object(r.useState)(null),u=Object(G.a)(s,2),l=u[0],d=u[1],j=Object(r.useState)(null),f=Object(G.a)(j,2),b=f[0],h=f[1];return Object(pe.jsx)(we,{onClick:function(e){if(!o){var r={x:e.x*t|0,y:e.y*n|0};l?r.x===l.x&&r.y===l.y?(d(null),h(null),c()):(d(null),h(null),a()):(d(r),h(r),i(r,r))}},onMouseMove:function(e){if(!o&&l){var r={x:e.x*t|0,y:e.y*n|0};b&&r.x===b.x&&r.y===b.y||(h(r),i(l,r))}}})}function Me(e){var t=e.isTutorial,n=void 0!==t&&t,r=ge((function(e){return{isBoardLocked:y(e),inputMode:q(e),match:e.match,resetSelection:e.resetSelection,updateSelection:e.updateSelection}})),c=r.isBoardLocked,a=r.inputMode,i=r.match,o=r.resetSelection,s=r.updateSelection,u=n?5:7,l=D()(0,7*u).map((function(e){return Object(pe.jsx)("div",{className:"board__square",children:Object(pe.jsx)(ye,{index:e})},e)}));return Object(pe.jsxs)("div",{className:"board".concat(n?" board_tutorial":""),children:[a===X&&Object(pe.jsx)(Ne,{gridWidth:7,gridHeight:u,onDragEnd:function(){return i()},onDragUpdate:function(e,t){return s(e,t)},onDragAbort:function(){return o()},isLocked:c}),a===K&&Object(pe.jsx)(qe,{gridWidth:7,gridHeight:u,onDragEnd:function(){return i()},onDragUpdate:function(e,t){return s(e,t)},onDragAbort:function(){return o()},isLocked:c}),l]})}var Ce=n(13),De=n(40),He=["children","onClick"];var Ae=function(e){var t=e.children,n=e.onClick,r=void 0===n?function(){}:n,c=Object(De.a)(e,He);return Object(pe.jsx)(Ce.a,Object(I.a)(Object(I.a)({},c),{},{onClick:r,children:t||"Back"}))};var Te=function(){var e=ge((function(e){return{highscore:e.highscore,hues:M(e),isGameActive:v(e),score:h(e),streakCount:m(e),streakType:O(e)}})),t=e.highscore,n=e.hues,r=e.isGameActive,c=e.score,a=e.streakCount,i=e.streakType;if(!r)return null;var o={filter:"hue-rotate(".concat(n[i],"deg)")};return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("div",{className:"menu",children:Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("div",{className:"stat",children:[Object(pe.jsx)("div",{className:"stat__title",children:"Score"}),Object(pe.jsx)("div",{className:"stat__value",children:c})]}),Object(pe.jsxs)("div",{className:"stat",children:[Object(pe.jsx)("div",{className:"stat__title",children:"Streak"}),a>0&&Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("div",{className:"stat__square",children:Object(pe.jsx)("div",{className:"square square_type_".concat(i),style:o})}),Object(pe.jsx)("div",{className:"stat__value",children:a})]})]}),Object(pe.jsxs)("div",{className:"stat",children:[Object(pe.jsx)("div",{className:"stat__title",children:"Highscore"}),Object(pe.jsx)("div",{className:"stat__value",children:t})]})]})}),Object(pe.jsxs)("div",{className:"main-menu",children:[Object(pe.jsx)("div",{className:"main-menu__action",children:Object(pe.jsx)(Ae,{to:"/"})}),Object(pe.jsx)("div",{className:"main-menu__action",children:Object(pe.jsx)(Ce.a,{to:A,children:"Options"})})]})]})};var We=function(){var e=ge((function(e){return{isActive:v(e),assureGame:e.assureGame,resetSelection:e.resetSelection}})),t=e.isActive,n=e.assureGame,c=e.resetSelection;return Object(r.useEffect)((function(){n(),c()}),[n,c]),t?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Me,{}),Object(pe.jsx)(Te,{})]}):null};var Ge=function(){var e=ge(M),t={filter:"hue-rotate(".concat(e[1],"deg)")},n=D()(0,49).map((function(e){return Object(pe.jsx)("div",{className:"board__square",children:Object(pe.jsx)("div",{className:"square square_type_1",style:t})},e)}));return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("div",{className:"board board_title",children:[Object(pe.jsx)("div",{className:"board__title",children:"Quood"}),n]}),Object(pe.jsxs)("div",{className:"main-menu",children:[Object(pe.jsx)("div",{className:"main-menu__action",children:Object(pe.jsx)(Ce.a,{to:H,children:"Play"})}),Object(pe.jsx)("div",{className:"main-menu__action",children:Object(pe.jsx)(Ce.a,{to:T,children:"Tutorial"})})]})]})};var Le=function(){var e=ge((function(e){return[e.endTutorial,k(e),e.resetSelection,e.startTutorial]})),t=Object(G.a)(e,4),n=t[0],c=t[1],a=t[2],i=t[3];return Object(r.useEffect)((function(){return i(),a(),n}),[n,a,i]),Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Me,{isTutorial:!0}),Object(pe.jsx)("div",{className:"menu",children:Object(pe.jsx)("div",{className:"message",children:c})}),Object(pe.jsxs)("div",{className:"main-menu",children:[Object(pe.jsx)("div",{className:"main-menu__action",children:Object(pe.jsx)(Ae,{to:"/"})}),Object(pe.jsx)("div",{className:"main-menu__action main-menu__action_inactive"})]})]})};function Ee(e){var t=e.index,n=ge((function(e){return{changeHue:e.changeHue,hue:M(e)[t],inputMode:q(e)}})),r=n.changeHue,c=n.hue,a=n.inputMode,i={filter:"hue-rotate(".concat(c,"deg)")};return Object(pe.jsxs)("div",{className:"slider",children:[Object(pe.jsx)("div",{className:"slider__square",children:Object(pe.jsx)("div",{className:"square square_type_".concat(t),style:i})}),Object(pe.jsxs)("div",{className:"slider__bar-border",children:[a===X&&Object(pe.jsx)(_e,{onDragUpdate:function(e,n){r(t,360*n.x|0)}}),a===K&&Object(pe.jsx)(we,{onClick:function(e){r(t,360*e.x|0)}}),Object(pe.jsx)("div",{className:"slider__bar",style:{width:"".concat(c/3.6,"%")}})]})]})}var Ue=function(){var e=ge((function(e){return{changeInputMode:e.changeInputMode,inputMode:q(e),startGame:e.startGame,resetHues:e.resetHues}})),t=e.changeInputMode,n=e.inputMode,r=e.startGame,c=e.resetHues,a=D()(0,3).map((function(e){return Object(pe.jsx)(Ee,{index:e},e)}));return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)("div",{className:"menu",children:[Object(pe.jsxs)("div",{className:"menu__block",children:[Object(pe.jsx)("div",{className:"options-headline",children:"Input Mode"}),Object(pe.jsx)("button",{className:"action",onClick:function(){return t()},children:n===X?"Touch":"Click"})]}),Object(pe.jsxs)("div",{className:"menu__block",children:[Object(pe.jsx)("div",{className:"options-headline",children:"Square Colors"}),a,Object(pe.jsx)("button",{className:"action",onClick:function(){return c()},children:"Reset"})]})]}),Object(pe.jsxs)("div",{className:"main-menu",children:[Object(pe.jsx)("div",{className:"main-menu__action",children:Object(pe.jsx)(Ae,{to:H})}),Object(pe.jsx)("div",{className:"main-menu__action",children:Object(pe.jsx)(Ae,{to:H,onClick:function(){return r()},children:"Restart"})})]})]})},Ie=Object(s.b)();i.a.render(Object(pe.jsx)(c.a.StrictMode,{children:Object(pe.jsx)(o.b,{history:Ie,children:Object(pe.jsxs)(o.c,{children:[Object(pe.jsx)(o.a,{exact:!0,path:"/",render:function(){return Object(pe.jsx)(Ge,{})}}),Object(pe.jsx)(o.a,{exact:!0,path:H,render:function(){return Object(pe.jsx)(We,{})}}),Object(pe.jsx)(o.a,{exact:!0,path:T,render:function(){return Object(pe.jsx)(Le,{})}}),Object(pe.jsx)(o.a,{exact:!0,path:A,render:function(){return Object(pe.jsx)(Ue,{})}})]})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");u?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):l(t,e)}))}}()}},[[74,1,2]]]);
//# sourceMappingURL=main.6bd6ced8.chunk.js.map