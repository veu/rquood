(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(0),o=n.n(a),c=n(39),u=n.n(c),i=n(25),l=n(3),s=n(63),d=n(59),f=n.n(d),b=n(7),v=n(57),m=n(26),k=n(32);n(77),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=n(41),h=n(21),p=n(109),g={board:null,bucket:[],score:0,streak:null},E=Object(p.a)({START_GAME:function(e,t){var n=t.payload.board;return Object(r.a)({},g,{board:n})},REPLACE_SQUARES:function(e,t){var n=t.payload,r=n.indexes,a=n.values,o=n.size,c=n.bucket,u=Object(h.a)(e.board),i=u[r[0]],l=!0,s=!1,d=void 0;try{for(var f,b=r[Symbol.iterator]();!(l=(f=b.next()).done);l=!0){u[f.value]=a.pop()}}catch(m){s=!0,d=m}finally{try{l||null==b.return||b.return()}finally{if(s)throw d}}var v=e.streak&&e.streak.type===i?e.streak.count+1:1;return{board:u,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:i}}}},null),j=Object(p.a)({UPDATE_HIGHSCORE:function(e,t){var n=t.payload.score;return Math.max(e,n)}},0),y=7,x=5,A=7,S=3,T="/play",R="/options",C="/tutorial",w=navigator.userAgent.includes("KAIOS"),M="SoftLeft",_="SoftRight",D="TOUCH",L="CLICK",U=Array(S).fill(0),I={hues:U,inputMode:w?L:D},P=Object(p.a)({CHANGE_HUE:function(e,t){var n=t.payload,a=n.index,o=n.hue,c=Object(h.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:U})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:e.inputMode===L?D:L})}},I),H=n(27),B=n.n(H),q=n(50),N=n.n(q),G=n(24),z=n.n(G),Q=n(60),W=n.n(Q),F=B()(function(e,t,n){return function(e,t){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}(function e(t,n){var r=t.x,a=t.y;return n?e({x:a,y:-r},n-1):{x:r,y:a}}(function(e,t){var n=e.x,r=e.y;return{x:n-t.x,y:r-t.y}}(t,e),n),e)}),V={squares:[],size:0,hidden:!1},Y=Object(p.a)({START_GAME:function(){return V},UPDATE_SELECTION:function(e,t){var n=t.payload,r=n.board,a=n.start,o=n.end,c=J(r,a,o);return N()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return V},HIDE_SELECTION:function(e){return e.squares.length<4?V:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return V},ADVANCE_TUTORIAL:function(){return V}},V),J=function(e,t,n){return Object(r.a)({},V,{size:function(e,t){var n=e.x,r=e.y,a=t.x,o=t.y;return Math.hypot(n-a,r-o)}(t,n),squares:W()(z()(0,4).map(F(function(e,t,n){var r=e.x,a=e.y;return{x:r*n+t.x*(1-n),y:a*n+t.y*(1-n)}}(t,n,.5),t)).filter(X(e)).filter(ee(e)).filter(Z(e,$(e,t))).map(K))})},K=B()(function(e){return e.x+e.y*A}),X=B()(function(e,t){var n=t.x,r=t.y;return 0<=n&&n<A&&n%1===0&&0<=r&&r<e.length/A&&r%1===0}),$=function(e,t){return e[K(t)]},Z=B()(function(e,t,n){return $(e,n)===t}),ee=B()(function(e,t){return $(e,t)<S}),te={board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game won\u2019t tell you when there aren\u2019t any squares left to remove.\n         You have to call it quits.\n         Enjoy!"],step:0},ne=Object(p.a)({START_TUTORIAL:function(e){return Object(r.a)({},e,{step:0})},ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},te);function re(e){return e.selection||(e=Object(r.a)({},e,{selection:V,tutorial:te})),e.options.inputMode||(e.options.inputMode=D),e}var ae=n(13),oe=n.n(ae),ce=n(14),ue=n(62),ie=n.n(ue),le=n(5),se=n(108),de=Object(se.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,t,n,r){return{indexes:e,values:t,size:n,bucket:r}},UPDATE_SELECTION:function(e,t,n){return{board:e,start:t,end:n}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},START_TUTORIAL:function(){return{}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,t){return{index:e,hue:t}},RESET_HUES:function(){return{}}}),fe=de.requestAssureGame,be=de.requestStartGame,ve=de.startGame,me=de.replaceSquares,ke=de.updateSelection,Oe=de.discardSelection,he=de.hideSelection,pe=de.updateHighscore,ge=de.startTutorial,Ee=de.advanceTutorial,je=de.changeInputMode,ye=de.changeHue,xe=de.resetHues,Ae=n(17),Se=function(e){return e.selection},Te=function(e){return e.game&&e.game.streak},Re=function(e){return e.router.location.pathname===C?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},Ce=function(e){return e.game&&e.game.bucket},we=function(e){return e.game&&e.game.score},Me=function(e){return e.highscore},_e=Object(Ae.a)(function(e){return!!function(e){return e.game}(e)},function(e){return e}),De=Object(Ae.a)(Te,function(e){return e&&e.type}),Le=Object(Ae.a)(Te,function(e){return e&&e.count}),Ue=Object(Ae.a)(Se,function(e){return e.squares}),Ie=Object(Ae.a)(Se,function(e){return e.size}),Pe=Object(Ae.a)(Se,function(e){return e.hidden}),He=Object(Ae.a)(Pe,function(e){return e}),Be=function(e){return Object(Ae.a)(Re,Ue,Pe,function(t,n,r){var a=n.includes(e);return{type:t&&t[e],active:a,inactive:n.length>0&&!a,hidden:r&&a,ready:4===n.length&&a}})},qe=function(e){return e.router.location.pathname===C},Ne=function(e){return e.tutorial.message[e.tutorial.step]},Ge=function(e){return e.options},ze=Object(Ae.a)(Ge,function(e){return e.inputMode}),Qe=Object(Ae.a)(Ge,function(e){return e.hues}),We=oe.a.mark($e),Fe=oe.a.mark(Ze),Ve=oe.a.mark(et),Ye=oe.a.mark(tt),Je=oe.a.mark(nt),Ke=oe.a.mark(rt);function Xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(h.a)(Array(t)).reduce(function(e){var t=Object(ce.a)(e,2),o=t[0],c=t[1];0===(c=Object(h.a)(c)).length&&(c=Object(h.a)(Array((r-n)*a)).map(function(e,t){return t%(r-n)+n}));var u=Math.random()*c.length|0,i=c.splice(u,1)[0];return[Object(h.a)(o).concat([i]),c]},[[],e])}function $e(){var e,t,n,r,a;return oe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(le.c)();case 2:if(e=o.sent,Pe(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(le.a)(ie.a,500);case 7:if(!qe(e)){o.next=11;break}return o.next=10,Object(le.b)(Ee());case 10:return o.abrupt("return");case 11:return t=Xe(Ce(e),4),n=Object(ce.a)(t,2),r=n[0],a=n[1],o.next=14,Object(le.b)(me(Ue(e),r,Ie(e),a));case 14:case"end":return o.stop()}},We,this)}function Ze(){var e;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(le.c)();case 2:return e=t.sent,t.next=5,Object(le.b)(pe(we(e)));case 5:case"end":return t.stop()}},Fe,this)}function et(){var e,t,n;return oe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=Xe([],y*A),t=Object(ce.a)(e,1),n=t[0],r.next=3,Object(le.b)(ve(n));case 3:case"end":return r.stop()}},Ve,this)}function tt(){var e,t,n,r;return oe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(le.c)();case 2:if(e=a.sent,_e(e)){a.next=7;break}return t=Xe([],y*A),n=Object(ce.a)(t,1),r=n[0],a.next=7,Object(le.b)(ve(r));case 7:case"end":return a.stop()}},Ye,this)}function nt(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payload.location.pathname!==C){t.next=4;break}return t.next=4,Object(le.b)(ge());case 4:return t.next=6,Object(le.b)(Oe());case 6:case"end":return t.stop()}},Je,this)}function rt(){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.d)("HIDE_SELECTION",$e);case 2:return e.next=4,Object(le.d)("REPLACE_SQUARES",Ze);case 4:return e.next=6,Object(le.d)("REQUEST_ASSURE_GAME",tt);case 6:return e.next=8,Object(le.d)("REQUEST_START_GAME",et);case 8:return e.next=10,Object(le.d)("@@router/LOCATION_CHANGE",nt);case 10:case"end":return e.stop()}},Ke,this)}var at=n(12).checkBEMProps;function ot(e){var t=e.index,n=Object(l.e)(Be(t)),r=Object(l.e)(Qe),a={filter:"hue-rotate(".concat(r[n.type],"deg)")};return at(o.a,"button",{block:"square",mods:n,style:a})}var ct=n(12).checkBEMProps;function ut(e){var t=e.isLocked,n=void 0!==t&&t,r=e.onDragUpdate,c=e.onDragEnd,u=void 0===c?function(){}:c,i=e.onDragAbort,l=void 0===i?function(){}:i,s=e.zIndex,d=void 0===s?1e4:s,f=Object(a.useRef)(),b=Object(a.useState)(null),v=Object(ce.a)(b,2),m=v[0],k=v[1],O={height:"100%",position:"absolute",width:"100%",zIndex:d};function h(){!n&&m&&(k(null),l())}return ct(o.a,"div",{style:O,"touch-action":"none",onPointerDown:function(e){return function(e){if(!n){var t=it(e,f);k(t),r(t,t)}}(e)},onPointerUp:function(e){!n&&m&&(k(null),u())},onPointerMove:function(e){return function(e){m&&r(m,it(e,f))}(e)},onPointerCancel:function(){return h()},onPointerLeave:function(){return h()},onPointerOut:function(){return h()},onLostPointerCapture:function(){return h()},ref:f})}function it(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,u=t.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var lt=n(12).checkBEMProps;function st(e){var t=e.gridWidth,n=e.gridHeight,r=e.isLocked,c=e.onDragAbort,u=e.onDragEnd,i=e.onDragUpdate,l=Object(a.useState)(null),s=Object(ce.a)(l,2),d=s[0],f=s[1];return lt(o.a,ut,{onDragAbort:function(){f(null),c()},onDragEnd:function(){f(null),u()},onDragUpdate:function(e,r){var a={x:e.x*t|0,y:e.y*n|0},o={x:r.x*t|0,y:r.y*n|0};d&&r.x===d.x&&r.y===d.y||(f(r),i(a,o))},isLocked:r})}var dt=n(12).checkBEMProps;function ft(e){var t=e.onClick,n=e.onMouseMove,r=void 0===n?function(){}:n,c=e.zIndex,u=void 0===c?1e4:c,i=Object(a.useRef)(),l={height:"100%",position:"absolute",width:"100%",zIndex:u};return dt(o.a,"div",{onClick:function(e){t(bt(e,i))},onMouseMove:function(e){r(bt(e,i))},ref:i,style:l})}function bt(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,u=t.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var vt=n(12).checkBEMProps;function mt(e){var t=e.gridWidth,n=e.gridHeight,r=e.onDragAbort,c=e.onDragEnd,u=e.onDragUpdate,i=e.isLocked,l=Object(a.useState)(null),s=Object(ce.a)(l,2),d=s[0],f=s[1],b=Object(a.useState)(null),v=Object(ce.a)(b,2),m=v[0],k=v[1];return vt(o.a,ft,{onClick:function(e){if(!i){var a={x:e.x*t|0,y:e.y*n|0};d?a.x===d.x&&a.y===d.y?(f(null),k(null),r()):(f(null),k(null),c()):(f(a),k(a),u(a,a))}},onMouseMove:function(e){if(!i&&d){var r={x:e.x*t|0,y:e.y*n|0};m&&r.x===m.x&&r.y===m.y||(k(r),u(d,r))}}})}var kt=n(12).checkBEMProps;function Ot(e){var t=e.isTutorial,n=void 0!==t&&t,r=Object(l.e)(Re),a=Object(l.e)(He),c=Object(l.e)(ze),u=Object(l.d)(),i=n?x:y,s=z()(0,i*A).map(function(e){return kt(o.a,"div",{block:"board",elem:"square",key:e},kt(o.a,ot,{index:e}))});return kt(o.a,"div",{block:"board",mods:{tutorial:n}},c===D&&kt(o.a,st,{gridWidth:A,gridHeight:i,onDragEnd:function(){return u(he())},onDragUpdate:function(e,t){return u(ke(r,e,t))},onDragAbort:function(){return u(Oe())},isLocked:a}),c===L&&kt(o.a,mt,{gridWidth:A,gridHeight:i,onDragEnd:function(){return u(he())},onDragUpdate:function(e,t){return u(ke(r,e,t))},onDragAbort:function(){return u(Oe())},isLocked:a}),s)}var ht=n(36),pt=n(8);function gt(){var e=Object(a.useRef)(),t=Object(a.useRef)();return Object(a.useEffect)(function(){return window.onkeydown=function(n){n.key===M&&e.current.click(),n.key===_&&t.current.click()},function(){window.onkeydown=null}}),{refLeft:e,refRight:t}}var Et=n(12).checkBEMProps;var jt=Object(l.c)(null,{goBack:pt.c})(function(e){var t=e.goBack,n=gt(),r=n.refLeft,a=n.refRight,c=Object(l.e)(_e),u=Object(l.e)(Me),i=Object(l.e)(we),s=Object(l.e)(Le),d=Object(l.e)(De),f=Object(l.e)(Qe);if(!c)return null;var b={filter:"hue-rotate(".concat(f[d],"deg)")};return Et(o.a,o.a.Fragment,null,Et(o.a,"div",{block:"menu"},Et(o.a,o.a.Fragment,null,Et(o.a,"div",{block:"stat"},Et(o.a,"div",{block:"stat",elem:"title"},"Score"),Et(o.a,"div",{block:"stat",elem:"value"},i)),Et(o.a,"div",{block:"stat"},Et(o.a,"div",{block:"stat",elem:"title"},"Streak"),s>0&&Et(o.a,o.a.Fragment,null,Et(o.a,"div",{block:"stat",elem:"square"},Et(o.a,"div",{block:"square",mods:{type:d},style:b})),Et(o.a,"div",{block:"stat",elem:"value"},s))),Et(o.a,"div",{block:"stat"},Et(o.a,"div",{block:"stat",elem:"title"},"Highscore"),Et(o.a,"div",{block:"stat",elem:"value"},u)))),Et(o.a,"div",{block:"main-menu"},Et(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){return t()},ref:r},"Back"),Et(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),Et(o.a,"div",{block:"main-menu",elem:"action"},Et(o.a,ht.a,{to:R,innerRef:a},"Options"))))}),yt=n(12).checkBEMProps;var xt=function(){var e=Object(l.d)(),t=Object(l.e)(_e);return Object(a.useEffect)(function(){e(fe())}),t?yt(o.a,o.a.Fragment,null,yt(o.a,Ot,null),yt(o.a,jt,null)):null},At=n(12).checkBEMProps;var St=function(){var e=gt(),t=e.refLeft,n=e.refRight,r=Object(l.e)(Qe),a={filter:"hue-rotate(".concat(r[1],"deg)")},c=z()(0,y*A).map(function(e){return At(o.a,"div",{block:"board",elem:"square",key:e},At(o.a,"div",{block:"square",mods:{type:1},style:a}))});return At(o.a,o.a.Fragment,null,At(o.a,"div",{block:"board",mods:{title:!0}},At(o.a,"div",{block:"board",elem:"title"},"Quood"),c),At(o.a,"div",{block:"main-menu"},At(o.a,"div",{block:"main-menu",elem:"action"},At(o.a,ht.a,{to:T,innerRef:t},"Play")),At(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),At(o.a,"div",{block:"main-menu",elem:"action"},At(o.a,ht.a,{to:C,innerRef:n},"Tutorial"))))},Tt=n(12).checkBEMProps;var Rt=Object(l.c)(null,{goBack:pt.c})(function(e){var t=e.goBack,n=gt().refLeft,r=Object(l.e)(Ne);return Tt(o.a,o.a.Fragment,null,Tt(o.a,Ot,{isTutorial:!0}),Tt(o.a,"div",{block:"menu"},Tt(o.a,"div",{block:"message"},r)),Tt(o.a,"div",{block:"main-menu"},Tt(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){return t()},ref:n},"Back"),Tt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),Tt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!0}})))}),Ct=n(12).checkBEMProps;function wt(e){var t=e.index,n=Object(l.e)(Qe)[t],r=Object(l.d)(),a=Object(l.e)(ze),c={filter:"hue-rotate(".concat(n,"deg)")};return Ct(o.a,"div",{block:"slider"},Ct(o.a,"div",{block:"slider",elem:"square"},Ct(o.a,"div",{block:"square",mods:{type:t},style:c})),Ct(o.a,"div",{block:"slider",elem:"bar-border"},a===D&&Ct(o.a,ut,{onDragUpdate:function(e,n){r(ye(t,360*n.x|0))}}),a===L&&Ct(o.a,ft,{onClick:function(e){r(ye(t,360*e.x|0))}}),Ct(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(n/3.6,"%")}})))}var Mt=n(12).checkBEMProps;var _t=Object(l.c)(null,{goBack:pt.c})(function(e){var t=e.goBack,n=gt(),r=n.refLeft,a=n.refRight,c=Object(l.e)(ze),u=z()(0,S).map(function(e){return Mt(o.a,wt,{key:e,index:e})}),i=Object(l.d)();return Mt(o.a,o.a.Fragment,null,Mt(o.a,"div",{block:"menu"},!w&&Mt(o.a,"div",{block:"menu",elem:"block"},Mt(o.a,"div",{block:"options-headline"},"Input Mode"),Mt(o.a,"button",{block:"action",onClick:function(){return i(je())}},c===D?"Touch":"Click")),Mt(o.a,"div",{block:"menu",elem:"block"},Mt(o.a,"div",{block:"options-headline"},"Square Colors"),u,Mt(o.a,"button",{block:"action",onClick:function(){return i(xe())}},"Reset"))),Mt(o.a,"div",{block:"main-menu"},Mt(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){return t()},ref:r},"Back"),Mt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),Mt(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){i(be()),t()},ref:a},"Restart")))});var Dt,Lt=Object(s.a)(),Ut=Object(k.b)(),It=Object(i.e)((Dt=Ut,Object(O.a)(Object(i.c)({router:Object(m.b)(Dt),game:E,tutorial:ne,highscore:j,selection:Y,options:P}),re)),Object(i.d)(f()("",{slicer:function(e){return function(e){var t=Object(r.a)({},e);return delete t.selection,delete t.tutorial,t}},key:"quood"}),Object(i.a)(Object(v.a)(Ut),Lt)));Lt.run(rt);var Pt=n(12).checkBEMProps;u.a.render(Pt(o.a,l.a,{store:It},Pt(o.a,m.a,{history:Ut},Pt(o.a,b.c,null,Pt(o.a,b.a,{exact:!0,path:"/",render:function(){return Pt(o.a,St,null)}}),Pt(o.a,b.a,{exact:!0,path:T,render:function(){return Pt(o.a,xt,null)}}),Pt(o.a,b.a,{exact:!0,path:C,render:function(){return Pt(o.a,Rt,null)}}),Pt(o.a,b.a,{exact:!0,path:R,render:function(){return Pt(o.a,_t,null)}})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,t,n){e.exports=n(107)},77:function(e,t,n){}},[[64,1,2]]]);
//# sourceMappingURL=main.cd5fd66a.chunk.js.map