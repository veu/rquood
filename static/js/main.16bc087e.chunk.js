(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,n,t){"use strict";t.r(n);var r=t(9),a=t(0),o=t.n(a),c=t(39),u=t.n(c),i=t(27),s=t(3),l=t(64),d=t(59),f=t.n(d),b=t(7),v=t(57),p=t(23),k=t(33);t(78),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=t(41),h=t(22),j=t(110),m={board:null,bucket:[],score:0,streak:null},E=Object(j.a)({START_GAME:function(e,n){var t=n.payload.board;return Object(r.a)({},m,{board:t})},REPLACE_SQUARES:function(e,n){var t=n.payload,r=t.indexes,a=t.values,o=t.size,c=t.bucket,u=Object(h.a)(e.board),i=u[r[0]],s=!0,l=!1,d=void 0;try{for(var f,b=r[Symbol.iterator]();!(s=(f=b.next()).done);s=!0){u[f.value]=a.pop()}}catch(p){l=!0,d=p}finally{try{s||null==b.return||b.return()}finally{if(l)throw d}}var v=e.streak&&e.streak.type===i?e.streak.count+1:1;return{board:u,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:i}}}},null),g=Object(j.a)({UPDATE_HIGHSCORE:function(e,n){var t=n.payload.score;return Math.max(e,t)}},0),y=7,x=5,A=7,w=3,S="/",T="/play",M="/options",R="/tutorial",D=navigator.userAgent.includes("KAIOS"),C="SoftLeft",_="SoftRight",U="TOUCH",I="CLICK",P=Array(w).fill(0),L={hues:P,inputMode:D?I:U},q=Object(j.a)({CHANGE_HUE:function(e,n){var t=n.payload,a=t.index,o=t.hue,c=Object(h.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:P})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:e.inputMode===I?U:I})}},L),H=t(32),B=t.n(H),N=t(50),G=t.n(N),z=t(26),F=t.n(z),Q=t(60),W=t.n(Q),Y=B()(function(e,n,t){return function(e,n){var t=e.x,r=e.y;return{x:t+n.x,y:r+n.y}}(function e(n,t){var r=n.x,a=n.y;return t?e({x:a,y:-r},t-1):{x:r,y:a}}(function(e,n){var t=e.x,r=e.y;return{x:t-n.x,y:r-n.y}}(n,e),t),e)}),V={squares:[],size:0,hidden:!1},J=Object(j.a)({START_GAME:function(){return V},UPDATE_SELECTION:function(e,n){var t=n.payload,r=t.board,a=t.start,o=t.end,c=K(r,a,o);return G()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return V},HIDE_SELECTION:function(e){return e.squares.length<4?V:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return V},ADVANCE_TUTORIAL:function(){return V}},V),K=function(e,n,t){return Object(r.a)({},V,{size:function(e,n){var t=e.x,r=e.y,a=n.x,o=n.y;return Math.hypot(t-a,r-o)}(n,t),squares:W()(F()(0,4).map(Y(function(e,n,t){var r=e.x,a=e.y;return{x:r*t+n.x*(1-t),y:a*t+n.y*(1-t)}}(n,t,.5),n)).filter($).filter(ne(e)).filter(ee(e,Z(e,n))).map(X))})},X=B()(function(e){return e.x+7*e.y}),$=function(e){var n=e.x,t=e.y;return 0<=n&&n<7&&n%1===0&&0<=t&&t<7&&t%1===0},Z=function(e,n){return e[X(n)]},ee=B()(function(e,n,t){return Z(e,t)===n}),ne=B()(function(e,n){return Z(e,n)<w}),te={board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game wont\u2019t tell you if there are no squares to remove. You have to call it quits.\n         Enjoy!","The game doesn\u2019t end if there are no squares to remove. You have to call it quits.\n         Enjoy!"],step:0},re=Object(j.a)({START_TUTORIAL:function(e){return Object(r.a)({},e,{step:0})},ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},te);function ae(e){return e.selection||(e=Object(r.a)({},e,{selection:V,tutorial:te})),e.options.inputMode||(e.options.inputMode=U),e}var oe=t(13),ce=t.n(oe),ue=t(14),ie=t(62),se=t.n(ie),le=t(5),de=t(109),fe=Object(de.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,n,t,r){return{indexes:e,values:n,size:t,bucket:r}},UPDATE_SELECTION:function(e,n,t){return{board:e,start:n,end:t}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},START_TUTORIAL:function(){return{}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,n){return{index:e,hue:n}},RESET_HUES:function(){return{}}}),be=fe.requestAssureGame,ve=fe.requestStartGame,pe=fe.startGame,ke=fe.replaceSquares,Oe=fe.updateSelection,he=fe.discardSelection,je=fe.hideSelection,me=fe.updateHighscore,Ee=fe.startTutorial,ge=fe.advanceTutorial,ye=fe.changeInputMode,xe=fe.changeHue,Ae=fe.resetHues,we=t(17),Se=function(e){return e.selection},Te=function(e){return e.game&&e.game.streak},Me=function(e){return e.router.location.pathname===R?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},Re=function(e){return e.game&&e.game.bucket},De=function(e){return e.game&&e.game.score},Ce=function(e){return e.highscore},_e=Object(we.a)(function(e){return!!function(e){return e.game}(e)},function(e){return e}),Ue=Object(we.a)(Te,function(e){return e&&e.type}),Ie=Object(we.a)(Te,function(e){return e&&e.count}),Pe=Object(we.a)(Se,function(e){return e.squares}),Le=Object(we.a)(Se,function(e){return e.size}),qe=Object(we.a)(Se,function(e){return e.hidden}),He=Object(we.a)(qe,function(e){return e}),Be=function(e){return Object(we.a)(Me,Pe,qe,function(n,t,r){var a=t.includes(e);return{type:n&&n[e],active:a,inactive:t.length>0&&!a,hidden:r&&a,ready:4===t.length&&a}})},Ne=function(e){return e.router.location.pathname===R},Ge=function(e){return e.tutorial.message[e.tutorial.step]},ze=function(e){return e.options},Fe=Object(we.a)(ze,function(e){return e.inputMode}),Qe=Object(we.a)(ze,function(e){return e.hues}),We=ce.a.mark(Ze),Ye=ce.a.mark(en),Ve=ce.a.mark(nn),Je=ce.a.mark(tn),Ke=ce.a.mark(rn),Xe=ce.a.mark(an);function $e(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(h.a)(Array(n)).reduce(function(e){var n=Object(ue.a)(e,2),o=n[0],c=n[1];0===(c=Object(h.a)(c)).length&&(c=Object(h.a)(Array((r-t)*a)).map(function(e,n){return n%(r-t)+t}));var u=Math.random()*c.length|0,i=c.splice(u,1)[0];return[Object(h.a)(o).concat([i]),c]},[[],e])}function Ze(){var e,n,t,r,a;return ce.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(le.c)();case 2:if(e=o.sent,qe(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(le.a)(se.a,500);case 7:if(!Ne(e)){o.next=11;break}return o.next=10,Object(le.b)(ge());case 10:return o.abrupt("return");case 11:return n=$e(Re(e),4),t=Object(ue.a)(n,2),r=t[0],a=t[1],o.next=14,Object(le.b)(ke(Pe(e),r,Le(e),a));case 14:case"end":return o.stop()}},We,this)}function en(){var e;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(le.c)();case 2:return e=n.sent,n.next=5,Object(le.b)(me(De(e)));case 5:case"end":return n.stop()}},Ye,this)}function nn(){var e,n,t;return ce.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=$e([],y*A),n=Object(ue.a)(e,1),t=n[0],r.next=3,Object(le.b)(pe(t));case 3:case"end":return r.stop()}},Ve,this)}function tn(){var e,n,t,r;return ce.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(le.c)();case 2:if(e=a.sent,_e(e)){a.next=7;break}return n=$e([],y*A),t=Object(ue.a)(n,1),r=t[0],a.next=7,Object(le.b)(pe(r));case 7:case"end":return a.stop()}},Je,this)}function rn(e){return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.payload.location.pathname!==R){n.next=4;break}return n.next=4,Object(le.b)(Ee());case 4:return n.next=6,Object(le.b)(he());case 6:case"end":return n.stop()}},Ke,this)}function an(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.d)("HIDE_SELECTION",Ze);case 2:return e.next=4,Object(le.d)("REPLACE_SQUARES",en);case 4:return e.next=6,Object(le.d)("REQUEST_ASSURE_GAME",tn);case 6:return e.next=8,Object(le.d)("REQUEST_START_GAME",nn);case 8:return e.next=10,Object(le.d)("@@router/LOCATION_CHANGE",rn);case 10:case"end":return e.stop()}},Xe,this)}var on=t(8),cn=t(12).checkBEMProps;function un(e){var n=e.index,t=Object(s.e)(Be(n));return cn(o.a,"button",{block:"square",mods:t})}var sn=t(12).checkBEMProps;function ln(e){var n=Object(a.useRef)(),t=Object(a.useState)(null),r=Object(ue.a)(t,2),c=r[0],u=r[1],i={height:"100%",position:"absolute",width:"100%",zIndex:void 0===e.zIndex?1e4:e.zIndex};function s(){!e.isLocked&&c&&(u(null),e.onDragAbort())}return sn(o.a,"div",{style:i,"touch-action":"none",onPointerDown:function(t){return function(t){if(!e.isLocked){var r=dn(t,n);u(r),e.onDragUpdate(r,r)}}(t)},onPointerUp:function(n){!e.isLocked&&c&&(u(null),e.onDragEnd())},onPointerMove:function(t){return function(t){c&&e.onDragUpdate(c,dn(t,n))}(t)},onPointerCancel:function(){return s()},onPointerLeave:function(){return s()},onPointerOut:function(){return s()},onLostPointerCapture:function(){return s()},ref:n})}function dn(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,u=n.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var fn=t(12).checkBEMProps;function bn(e){var n=e.active,t=e.gridWidth,r=e.gridHeight,c=e.isLocked,u=e.onDragAbort,i=e.onDragEnd,s=e.onDragUpdate,l=Object(a.useState)(null),d=Object(ue.a)(l,2),f=d[0],b=d[1];if(!n)return fn(o.a,o.a.Fragment,null);return fn(o.a,ln,{onDragAbort:function(){b(null),u()},onDragEnd:function(){b(null),i()},onDragUpdate:function(e,n){var a={x:e.x*t|0,y:e.y*r|0},o={x:n.x*t|0,y:n.y*r|0};f&&n.x===f.x&&n.y===f.y||(b(n),s(a,o))},isLocked:c})}var vn=t(12).checkBEMProps;function pn(e){var n=e.onClick,t=e.onMouseMove,r=e.zIndex,c=void 0===r?1e4:r,u=Object(a.useRef)(),i={height:"100%",position:"absolute",width:"100%",zIndex:c};return vn(o.a,"div",{onClick:function(e){n(kn(e,u))},onMouseMove:function(e){t(kn(e,u))},ref:u,style:i})}function kn(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,u=n.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var On=t(12).checkBEMProps;function hn(e){var n=e.active,t=e.gridWidth,r=e.gridHeight,c=e.onDragAbort,u=e.onDragEnd,i=e.onDragUpdate,s=e.isLocked,l=Object(a.useState)(null),d=Object(ue.a)(l,2),f=d[0],b=d[1],v=Object(a.useState)(null),p=Object(ue.a)(v,2),k=p[0],O=p[1];if(!n)return On(o.a,o.a.Fragment,null);return On(o.a,pn,{onClick:function(e){if(!s){var n={x:e.x*t|0,y:e.y*r|0};f?n.x===f.x&&n.y===f.y?(b(null),O(null),c()):(b(null),O(null),u()):(b(n),O(n),i(n,n))}},onMouseMove:function(e){if(!s&&f){var n={x:e.x*t|0,y:e.y*r|0};k&&n.x===k.x&&n.y===k.y||(O(n),i(f,n))}}})}var jn=t(12).checkBEMProps;function mn(e){var n=e.isTutorial,t=void 0!==n&&n,r=Object(s.e)(Me),a=Object(s.e)(He),c=Object(s.e)(Fe),u=Object(s.d)(),i=t?x:y,l=F()(0,i*A).map(function(e){return jn(o.a,"div",{block:"board",elem:"square",key:e},jn(o.a,un,{index:e}))});return jn(o.a,"div",{block:"board",mods:{tutorial:t}},jn(o.a,bn,{active:c===U,gridWidth:A,gridHeight:i,onDragEnd:function(){return u(je())},onDragUpdate:function(e,n){return u(Oe(r,e,n))},onDragAbort:function(){return u(he())},isLocked:a}),jn(o.a,hn,{active:c===I,gridWidth:A,gridHeight:i,onDragEnd:function(){return u(je())},onDragUpdate:function(e,n){return u(Oe(r,e,n))},onDragAbort:function(){return u(he())},isLocked:a}),l)}var En=t(18),gn=t(12).checkBEMProps;function yn(){if(!Object(s.e)(_e))return null;var e=Object(s.e)(Ce),n=Object(s.e)(De),t=Object(s.e)(Ie),r=Object(s.e)(Ue),a=Object(s.d)();return gn(o.a,o.a.Fragment,null,gn(o.a,"div",{block:"menu"},gn(o.a,o.a.Fragment,null,gn(o.a,"div",{block:"stat"},gn(o.a,"div",{block:"stat",elem:"title"},"Score"),gn(o.a,"div",{block:"stat",elem:"value"},n)),gn(o.a,"div",{block:"stat"},gn(o.a,"div",{block:"stat",elem:"title"},"Streak"),gn(o.a,"div",{block:"stat",elem:"square"},gn(o.a,"div",{block:"square",mods:{type:r}})),gn(o.a,"div",{block:"stat",elem:"value"},t)),gn(o.a,"div",{block:"stat"},gn(o.a,"div",{block:"stat",elem:"title"},"Highscore"),gn(o.a,"div",{block:"stat",elem:"value"},e)))),gn(o.a,"div",{block:"menu",mods:{main:!0}},gn(o.a,"div",{block:"action"},gn(o.a,En.a,{to:S},"Back")),gn(o.a,"div",{block:"action",onClick:function(){return a(ve())}},"New Game")))}var xn=t(12).checkBEMProps;var An=Object(s.c)(null,{push:on.d})(function(e){var n=e.push,t=Object(s.d)();Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===C&&n(S),e.key===_&&t(ve())},function(){window.onkeydown=null}});var r=Object(s.e)(_e);return Object(a.useEffect)(function(){t(be())}),r?xn(o.a,o.a.Fragment,null,xn(o.a,mn,null),xn(o.a,yn,null)):null}),wn=t(12).checkBEMProps;var Sn=Object(s.c)(null,{push:on.d})(function(e){var n=e.push;Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===C&&n(T),e.key===_&&n(R)},function(){window.onkeydown=null}});var t=F()(0,y*A).map(function(e){return wn(o.a,"div",{block:"board",elem:"square",key:e},wn(o.a,"div",{block:"square",mods:{type:1}}))});return wn(o.a,o.a.Fragment,null,wn(o.a,"div",{block:"board"},wn(o.a,"div",{block:"board",elem:"title"},"Quood"),t),wn(o.a,"div",{block:"menu",mods:{main:!0}},wn(o.a,"div",{block:"action"},wn(o.a,En.a,{to:T},"Play")),wn(o.a,"div",{block:"action"},wn(o.a,En.a,{to:M},"Options")),wn(o.a,"div",{block:"action"},wn(o.a,En.a,{to:R},"Tutorial"))))}),Tn=t(12).checkBEMProps;var Mn=Object(s.c)(null,{push:on.d})(function(e){var n=e.push;Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===C&&n(S)},function(){window.onkeydown=null}});var t=Object(s.e)(Ge);return Tn(o.a,o.a.Fragment,null,Tn(o.a,mn,{isTutorial:!0}),Tn(o.a,"div",{block:"menu"},Tn(o.a,"div",{block:"message"},t)),Tn(o.a,"div",{block:"menu",mods:{main:!0}},Tn(o.a,"div",{block:"action"},Tn(o.a,En.a,{to:S},"Back"))))}),Rn=t(12).checkBEMProps;function Dn(e){var n=e.index,t=Object(s.e)(Qe)[n],r=Object(s.d)();return Rn(o.a,"div",{block:"slider"},Rn(o.a,"div",{block:"slider",elem:"square"},Rn(o.a,"div",{block:"square",mods:{type:n}})),Rn(o.a,"div",{block:"slider",elem:"bar-border"},Rn(o.a,ln,{onDragUpdate:function(e,t){r(xe(n,360*t.x|0))},onDragAbort:function(){},onDragEnd:function(){},isLocked:!1}),Rn(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(t/3.6,"%")}})))}var Cn=t(12).checkBEMProps;var _n=Object(s.c)(null,{push:on.d})(function(e){var n=e.push;Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===C&&n(S)},function(){window.onkeydown=null}});var t=Object(s.e)(Fe),r=F()(0,w).map(function(e){return Cn(o.a,Dn,{key:e,index:e})}),c=Object(s.d)();return Cn(o.a,o.a.Fragment,null,Cn(o.a,"div",{block:"menu"},!D&&Cn(o.a,"div",{block:"menu",elem:"block"},Cn(o.a,"div",{block:"options-headline"},"Input Mode"),Cn(o.a,"button",{block:"action",onClick:function(){return c(ye())}},t)),Cn(o.a,"div",{block:"menu",elem:"block"},Cn(o.a,"div",{block:"options-headline"},"Square Colors"),r,Cn(o.a,"button",{block:"action",onClick:function(){return c(Ae())}},"Reset"))),Cn(o.a,"div",{block:"menu",mods:{main:!0}},Cn(o.a,"div",{block:"action"},Cn(o.a,En.a,{to:S},"Back"))))}),Un=t(63),In=t.n(Un),Pn=t(12).checkBEMProps;var Ln,qn=Object(l.a)(),Hn=Object(k.b)(),Bn=Object(i.e)((Ln=Hn,Object(O.a)(Object(i.c)({router:Object(p.b)(Ln),game:E,tutorial:re,highscore:g,selection:J,options:q}),ae)),Object(i.d)(f()("",{slicer:function(e){return function(e){var n=Object(r.a)({},e);return delete n.selection,delete n.tutorial,n}},key:"quood"}),Object(i.a)(Object(v.a)(Hn),qn)));qn.run(an);var Nn=t(12).checkBEMProps;u.a.render(Nn(o.a,s.a,{store:Bn},Nn(o.a,p.a,{history:Hn},Nn(o.a,function(e){var n=e.children,t=Object(s.e)(Qe),r=In()(t.map(function(e,n){return["--hue".concat(n),e]}));return Pn(o.a,"div",{style:r},n)},null,Nn(o.a,b.c,null,Nn(o.a,b.a,{exact:!0,path:S,render:function(){return Nn(o.a,Sn,null)}}),Nn(o.a,b.a,{exact:!0,path:T,render:function(){return Nn(o.a,An,null)}}),Nn(o.a,b.a,{exact:!0,path:R,render:function(){return Nn(o.a,Mn,null)}}),Nn(o.a,b.a,{exact:!0,path:M,render:function(){return Nn(o.a,_n,null)}}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,n,t){e.exports=t(108)},78:function(e,n,t){}},[[65,1,2]]]);
//# sourceMappingURL=main.16bc087e.chunk.js.map