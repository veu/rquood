(this.webpackJsonprquood=this.webpackJsonprquood||[]).push([[0],{47:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(31),a=n.n(c),i=n(2),o=n(7),s=(n(45),n(46),n(47),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function u(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(10),d=function(e){return e.selection},j=function(e){return e.game&&e.game.streak},f=function(e){return e.game&&e.game.board},b=function(e){return e.game&&e.game.score},h=Object(l.a)((function(e){return!!function(e){return e.game}(e)}),(function(e){return e})),v=Object(l.a)(j,(function(e){return e&&e.type})),O=Object(l.a)(j,(function(e){return e&&e.count})),m=Object(l.a)(d,(function(e){return e.squares})),x=Object(l.a)(d,(function(e){return e.size})),g=Object(l.a)(d,(function(e){return e.hidden})),p=Object(l.a)(g,(function(e){return e})),y=function(e,t){return Object(l.a)(f,k,m,g,(function(n,r,c,a){var i=c.includes(t),o=e?r:n;return{type:o&&o[t],active:i,inactive:c.length>0&&!i,hidden:a&&i,ready:4===c.length&&i}}))},_=function(e){return e.tutorial.message[e.tutorial.step]},k=function(e){return e.tutorial.board[e.tutorial.step]},N=function(e){return e.options},w=Object(l.a)(N,(function(e){return e.inputMode})),q=Object(l.a)(N,(function(e){return e.hues})),S=n(12),M=n.n(S),C="/play",D="/options",A="/tutorial",H=n(11),T=n(4),W=n(27),G=n.n(W),L=n(32),E=n(6),U=n(36),I=n.n(U),P=n(5),R={board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game won\u2019t tell you when there aren\u2019t any squares left to remove.\n         You have to call it quits.\n         Enjoy!"],step:0},z=n(37),F=n(33),B={board:null,bucket:[],score:0,streak:null},Y="TOUCH",J="CLICK",X=Array(3).fill(0),K={hues:X,inputMode:Y},Q=n(14),$=n.n(Q),V=n(26),Z=n.n(V),ee=n(34),te=n.n(ee),ne=function(e,t,n){var r=e.x,c=e.y;return{x:r*n+t.x*(1-n),y:c*n+t.y*(1-n)}},re=function e(t,n){var r=t.x,c=t.y;return n?e({x:c,y:-r},n-1):{x:r,y:c}},ce=$()((function(e,t,n){return function(e,t){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}(re(function(e,t){var n=e.x,r=e.y;return{x:n-t.x,y:r-t.y}}(t,e),n),e)})),ae=function(e,t){var n=e.x,r=e.y,c=t.x,a=t.y;return Math.hypot(n-c,r-a)},ie={squares:[],size:0,hidden:!1},oe=$()((function(e){return e.x+7*e.y})),se=$()((function(e,t){var n=t.x,r=t.y;return 0<=n&&n<7&&n%1===0&&0<=r&&r<e.length/7&&r%1===0})),ue=function(e,t){return e[oe(t)]},le=$()((function(e,t,n){return ue(e,n)===t})),de=$()((function(e,t){return ue(e,t)<3})),je=function(e){return{selection:ie,resetSelection:function(){return e(Object(P.a)((function(e){e.selection=ie})))},updateSelection:function(t,n){return e(Object(P.a)((function(e){var r=function(e,t,n){return Object(E.a)(Object(E.a)({},ie),{},{size:ae(t,n),squares:te()(M()(0,4).map(ce(ne(t,n,.5),t)).filter(se(e)).filter(de(e)).filter(le(e,ue(e,t))).map(oe))})}(f(e),t,n);Z()(r.squares,e.selection.squares)||(e.selection=r)})))},hideSelection:function(){return e(Object(P.a)((function(e){e.selection.squares.length<4?e.selection=ie:e.selection.hidden=!0})))}}},fe=n(21),be=n.n(fe),he=n(35);function ve(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(H.a)(Array(t)).reduce((function(e){var t=Object(T.a)(e,2),a=t[0],i=t[1];0===(i=Object(H.a)(i)).length&&(i=Object(H.a)(Array((r-n)*c)).map((function(e,t){return t%(r-n)+n})));var o=Math.random()*i.length|0,s=i.splice(o,1)[0];return[[].concat(Object(H.a)(a),[s]),i]}),[[],e])}var Oe=Object(he.configurePersist)({storage:localStorage}).persist,me=I()(Object(z.devtools)(Oe({key:"quood",allowlist:["game","highscore","options"]},(function(e,t){return Object(E.a)(Object(E.a)(Object(E.a)(Object(E.a)(Object(E.a)(Object(E.a)({},function(e){return{highscore:0,updateHighscore:function(){return e(Object(P.a)((function(e){e.highscore=Math.max(e.highscore,b(e))})))}}}(e)),function(e){return{tutorial:R,startTutorial:function(){return e(Object(P.a)((function(e){e.tutorial.step=0})))},advanceTutorial:function(){return e(Object(P.a)((function(e){e.tutorial.step+=1})))}}}(e)),function(e){return{game:null,initGame:function(t){return e(Object(P.a)((function(e){e.game=Object(E.a)(Object(E.a)({},B),{},{board:t})})))},replaceSquares:function(t,n){return e(Object(P.a)((function(e){var r,c=m(e),a=x(e),i=e.game.board[c[0]],o=Object(F.a)(c);try{for(o.s();!(r=o.n()).done;){var s=r.value;e.game.board[s]=t.pop()}}catch(l){o.e(l)}finally{o.f()}var u=e.game.streak&&e.game.streak.type===i?e.game.streak.count+1:1;e.game.score=e.game.score+(0|a)*u,e.game.streak={count:u,type:i},e.game.bucket=n})))}}}(e)),function(e){return{options:K,changeHue:function(t,n){return e(Object(P.a)((function(e){var r=Object(H.a)(e.options.hues);r[t]=n,e.options.hues=r})))},resetHues:function(){return e(Object(P.a)((function(e){e.options.hues=X})))},changeInputMode:function(){return e(Object(P.a)((function(e){e.options.inputMode=e.options.inputMode===J?Y:J})))}}}(e)),je(e)),{},{match:function(){var e=Object(L.a)(G.a.mark((function e(n){var r,c,a,i;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t().hideSelection(),e.next=3,be()(0);case 3:if(g(t())){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,be()(500);case 7:if(!n){e.next=11;break}t().advanceTutorial(),e.next=16;break;case 11:return r=ve((o=t()).game&&o.game.bucket,4),c=Object(T.a)(r,2),a=c[0],i=c[1],t().replaceSquares(a,i),e.next=15,be()(0);case 15:t().updateHighscore();case 16:t().resetSelection();case 17:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}(),assureGame:function(){if(!h(t())){var e=ve([],49),n=Object(T.a)(e,1)[0];t().initGame(n)}},startGame:function(){var e=ve([],49),n=Object(T.a)(e,1)[0];t().initGame(n)}})})))),xe=n(0);function ge(e){var t=e.index,n=e.isTutorial,r=void 0!==n&&n,c=me((function(e){return[q(e),y(r,t)(e)]})),a=Object(T.a)(c,2),i=a[0],o=a[1],s={filter:"hue-rotate(".concat(i[o.type],"deg)")},u="square",l=Object.entries(o).filter((function(e){var t=Object(T.a)(e,2);t[0];return!1!==t[1]})).map((function(e){var t=Object(T.a)(e,2),n=t[0],r=t[1];return"".concat(u,"_").concat(n).concat(!0===r?"":"_"+r)})),d=[u].concat(Object(H.a)(l)).join(" ");return Object(xe.jsx)("button",{className:d,style:s})}function pe(e){var t=e.isLocked,n=void 0!==t&&t,c=e.onDragUpdate,a=e.onDragEnd,i=void 0===a?function(){}:a,o=e.onDragAbort,s=void 0===o?function(){}:o,u=e.zIndex,l=void 0===u?1e4:u,d=Object(r.useRef)(),j=Object(r.useState)(null),f=Object(T.a)(j,2),b=f[0],h=f[1],v={height:"100%",position:"absolute",width:"100%",zIndex:l};function O(){!n&&b&&(h(null),s())}return Object(xe.jsx)("div",{style:v,"touch-action":"none",onPointerDown:function(e){return function(e){if(!n){var t=ye(e,d);h(t),c(t,t)}}(e)},onPointerUp:function(e){!n&&b&&(h(null),i())},onPointerMove:function(e){return function(e){b&&c(b,ye(e,d))}(e)},onPointerCancel:function(){return O()},onPointerLeave:function(){return O()},onPointerOut:function(){return O()},onLostPointerCapture:function(){return O()},ref:d})}function ye(e,t){var n=t.current.getBoundingClientRect(),r=n.x,c=n.y,a=e.pageX,i=e.pageY,o=t.current;return{x:(a-r)/o.offsetWidth,y:(i-c)/o.offsetHeight}}function _e(e){var t=e.gridWidth,n=e.gridHeight,c=e.isLocked,a=e.onDragAbort,i=e.onDragEnd,o=e.onDragUpdate,s=Object(r.useState)(null),u=Object(T.a)(s,2),l=u[0],d=u[1];return Object(xe.jsx)(pe,{onDragAbort:function(){d(null),a()},onDragEnd:function(){d(null),i()},onDragUpdate:function(e,r){var c={x:e.x*t|0,y:e.y*n|0},a={x:r.x*t|0,y:r.y*n|0};l&&r.x===l.x&&r.y===l.y||(d(r),o(c,a))},isLocked:c})}function ke(e){var t=e.onClick,n=e.onMouseMove,c=void 0===n?function(){}:n,a=e.zIndex,i=void 0===a?1e4:a,o=Object(r.useRef)(),s={height:"100%",position:"absolute",width:"100%",zIndex:i};return Object(xe.jsx)("div",{onClick:function(e){t(Ne(e,o))},onMouseMove:function(e){c(Ne(e,o))},ref:o,style:s})}function Ne(e,t){var n=t.current.getBoundingClientRect(),r=n.x,c=n.y,a=e.pageX,i=e.pageY,o=t.current;return{x:(a-r)/o.offsetWidth,y:(i-c)/o.offsetHeight}}function we(e){var t=e.gridWidth,n=e.gridHeight,c=e.onDragAbort,a=e.onDragEnd,i=e.onDragUpdate,o=e.isLocked,s=Object(r.useState)(null),u=Object(T.a)(s,2),l=u[0],d=u[1],j=Object(r.useState)(null),f=Object(T.a)(j,2),b=f[0],h=f[1];return Object(xe.jsx)(ke,{onClick:function(e){if(!o){var r={x:e.x*t|0,y:e.y*n|0};l?r.x===l.x&&r.y===l.y?(d(null),h(null),c()):(d(null),h(null),a()):(d(r),h(r),i(r,r))}},onMouseMove:function(e){if(!o&&l){var r={x:e.x*t|0,y:e.y*n|0};b&&r.x===b.x&&r.y===b.y||(h(r),i(l,r))}}})}function qe(e){var t=e.isTutorial,n=void 0!==t&&t,r=me((function(e){return{discardSelection:e.discardSelection,isBoardLocked:p(e),inputMode:w(e),match:e.match,updateSelection:e.updateSelection}})),c=r.discardSelection,a=r.isBoardLocked,i=r.inputMode,o=r.match,s=r.updateSelection,u=n?5:7,l=M()(0,7*u).map((function(e){return Object(xe.jsx)("div",{className:"board__square",children:Object(xe.jsx)(ge,{index:e,isTutorial:n})},e)}));return Object(xe.jsxs)("div",{className:"board",children:[i===Y&&Object(xe.jsx)(_e,{gridWidth:7,gridHeight:u,onDragEnd:function(){return o(n)},onDragUpdate:function(e,t){return s(e,t)},onDragAbort:function(){return c()},isLocked:a}),i===J&&Object(xe.jsx)(we,{gridWidth:7,gridHeight:u,onDragEnd:function(){return o(n)},onDragUpdate:function(e,t){return s(e,t)},onDragAbort:function(){return c()},isLocked:a}),l]})}var Se=n(13),Me=n(40),Ce=["children","onClick"];var De=function(e){var t=e.children,n=e.onClick,r=void 0===n?function(){}:n,c=Object(Me.a)(e,Ce);return Object(xe.jsx)(Se.a,Object(E.a)(Object(E.a)({},c),{},{onClick:r,children:t||"Back"}))};var Ae=function(){var e=me((function(e){return{highscore:e.highscore,hues:q(e),isGameActive:h(e),score:b(e),streakCount:O(e),streakType:v(e)}})),t=e.highscore,n=e.hues,r=e.isGameActive,c=e.score,a=e.streakCount,i=e.streakType;if(!r)return null;var o={filter:"hue-rotate(".concat(n[i],"deg)")};return Object(xe.jsxs)(xe.Fragment,{children:[Object(xe.jsx)("div",{className:"menu",children:Object(xe.jsxs)(xe.Fragment,{children:[Object(xe.jsxs)("div",{className:"stat",children:[Object(xe.jsx)("div",{className:"stat__title",children:"Score"}),Object(xe.jsx)("div",{className:"stat__value",children:c})]}),Object(xe.jsxs)("div",{className:"stat",children:[Object(xe.jsx)("div",{className:"stat__title",children:"Streak"}),a>0&&Object(xe.jsxs)(xe.Fragment,{children:[Object(xe.jsx)("div",{className:"stat__square",children:Object(xe.jsx)("div",{className:"square square_type_".concat(i),style:o})}),Object(xe.jsx)("div",{className:"stat__value",children:a})]})]}),Object(xe.jsxs)("div",{className:"stat",children:[Object(xe.jsx)("div",{className:"stat__title",children:"Highscore"}),Object(xe.jsx)("div",{className:"stat__value",children:t})]})]})}),Object(xe.jsxs)("div",{className:"main-menu",children:[Object(xe.jsx)("div",{className:"main-menu__action",children:Object(xe.jsx)(De,{to:"/"})}),Object(xe.jsx)("div",{className:"main-menu__action",children:Object(xe.jsx)(Se.a,{to:D,children:"Options"})})]})]})};var He=function(){var e=me((function(e){return{isActive:h(e),assureGame:e.assureGame,resetSelection:e.resetSelection}})),t=e.isActive,n=e.assureGame,c=e.resetSelection;return Object(r.useEffect)((function(){n(),c()}),[n,c]),t?Object(xe.jsxs)(xe.Fragment,{children:[Object(xe.jsx)(qe,{}),Object(xe.jsx)(Ae,{})]}):null};var Te=function(){var e=me(q),t={filter:"hue-rotate(".concat(e[1],"deg)")},n=M()(0,49).map((function(e){return Object(xe.jsx)("div",{className:"board__square",children:Object(xe.jsx)("div",{className:"square square_type_1",style:t})},e)}));return Object(xe.jsxs)(xe.Fragment,{children:[Object(xe.jsxs)("div",{className:"board board_title",children:[Object(xe.jsx)("div",{className:"board__title",children:"Quood"}),n]}),Object(xe.jsxs)("div",{className:"main-menu",children:[Object(xe.jsx)("div",{className:"main-menu__action",children:Object(xe.jsx)(Se.a,{to:C,children:"Play"})}),Object(xe.jsx)("div",{className:"main-menu__action",children:Object(xe.jsx)(Se.a,{to:A,children:"Tutorial"})})]})]})};var We=function(){var e=me((function(e){return[_(e),e.resetSelection,e.startTutorial]})),t=Object(T.a)(e,3),n=t[0],c=t[1],a=t[2];return Object(r.useEffect)((function(){a(),c()}),[c,a]),Object(xe.jsxs)(xe.Fragment,{children:[Object(xe.jsx)(qe,{isTutorial:!0}),Object(xe.jsx)("div",{className:"menu",children:Object(xe.jsx)("div",{className:"message",children:n})}),Object(xe.jsxs)("div",{className:"main-menu",children:[Object(xe.jsx)("div",{className:"main-menu__action",children:Object(xe.jsx)(De,{to:"/"})}),Object(xe.jsx)("div",{className:"main-menu__action main-menu__action_inactive"})]})]})};function Ge(e){var t=e.index,n=me((function(e){return{changeHue:e.changeHue,hue:q(e)[t],inputMode:w(e)}})),r=n.changeHue,c=n.hue,a=n.inputMode,i={filter:"hue-rotate(".concat(c,"deg)")};return Object(xe.jsxs)("div",{className:"slider",children:[Object(xe.jsx)("div",{className:"slider__square",children:Object(xe.jsx)("div",{className:"square square_type_".concat(t),style:i})}),Object(xe.jsxs)("div",{className:"slider__bar-border",children:[a===Y&&Object(xe.jsx)(pe,{onDragUpdate:function(e,n){r(t,360*n.x|0)}}),a===J&&Object(xe.jsx)(ke,{onClick:function(e){r(t,360*e.x|0)}}),Object(xe.jsx)("div",{className:"slider__bar",style:{width:"".concat(c/3.6,"%")}})]})]})}var Le=function(){var e=me((function(e){return{changeInputMode:e.changeInputMode,inputMode:w(e),startGame:e.startGame,resetHues:e.resetHues}})),t=e.changeInputMode,n=e.inputMode,r=e.startGame,c=e.resetHues,a=M()(0,3).map((function(e){return Object(xe.jsx)(Ge,{index:e},e)}));return Object(xe.jsxs)(xe.Fragment,{children:[Object(xe.jsxs)("div",{className:"menu",children:[Object(xe.jsxs)("div",{className:"menu__block",children:[Object(xe.jsx)("div",{className:"options-headline",children:"Input Mode"}),Object(xe.jsx)("button",{className:"action",onClick:function(){return t()},children:n===Y?"Touch":"Click"})]}),Object(xe.jsxs)("div",{className:"menu__block",children:[Object(xe.jsx)("div",{className:"options-headline",children:"Square Colors"}),a,Object(xe.jsx)("button",{className:"action",onClick:function(){return c()},children:"Reset"})]})]}),Object(xe.jsxs)("div",{className:"main-menu",children:[Object(xe.jsx)("div",{className:"main-menu__action",children:Object(xe.jsx)(De,{to:C})}),Object(xe.jsx)("div",{className:"main-menu__action",children:Object(xe.jsx)(De,{to:C,onClick:function(){return r()},children:"Restart"})})]})]})},Ee=Object(o.b)();a.a.render(Object(xe.jsx)(i.b,{history:Ee,children:Object(xe.jsxs)(i.c,{children:[Object(xe.jsx)(i.a,{exact:!0,path:"/",render:function(){return Object(xe.jsx)(Te,{})}}),Object(xe.jsx)(i.a,{exact:!0,path:C,render:function(){return Object(xe.jsx)(He,{})}}),Object(xe.jsx)(i.a,{exact:!0,path:A,render:function(){return Object(xe.jsx)(We,{})}}),Object(xe.jsx)(i.a,{exact:!0,path:D,render:function(){return Object(xe.jsx)(Le,{})}})]})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");s?(!function(e,t){fetch(e).then((function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):u(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):u(t,e)}))}}()}},[[74,1,2]]]);
//# sourceMappingURL=main.8b9bfc10.chunk.js.map