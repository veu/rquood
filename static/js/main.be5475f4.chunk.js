(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,n,t){"use strict";t.r(n);var r=t(9),a=t(0),o=t.n(a),c=t(39),i=t.n(c),u=t(25),l=t(3),s=t(63),d=t(59),f=t.n(d),b=t(7),v=t(57),m=t(26),k=t(33);t(78),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=t(41),h=t(21),p=t(110),g={board:null,bucket:[],score:0,streak:null},j=Object(p.a)({START_GAME:function(e,n){var t=n.payload.board;return Object(r.a)({},g,{board:t})},REPLACE_SQUARES:function(e,n){var t=n.payload,r=t.indexes,a=t.values,o=t.size,c=t.bucket,i=Object(h.a)(e.board),u=i[r[0]],l=!0,s=!1,d=void 0;try{for(var f,b=r[Symbol.iterator]();!(l=(f=b.next()).done);l=!0){i[f.value]=a.pop()}}catch(m){s=!0,d=m}finally{try{l||null==b.return||b.return()}finally{if(s)throw d}}var v=e.streak&&e.streak.type===u?e.streak.count+1:1;return{board:i,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:u}}}},null),E=Object(p.a)({UPDATE_HIGHSCORE:function(e,n){var t=n.payload.score;return Math.max(e,t)}},0),y=7,x=5,A=7,S=3,T="/",R="/play",C="/options",w="/tutorial",M=navigator.userAgent.includes("KAIOS"),_="SoftLeft",D="SoftRight",L="TOUCH",U="CLICK",P=Array(S).fill(0),I={hues:P,inputMode:M?U:L},H=Object(p.a)({CHANGE_HUE:function(e,n){var t=n.payload,a=t.index,o=t.hue,c=Object(h.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:P})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:e.inputMode===U?L:U})}},I),B=t(28),q=t.n(B),N=t(50),G=t.n(N),z=t(24),Q=t.n(z),W=t(60),F=t.n(W),V=q()(function(e,n,t){return function(e,n){var t=e.x,r=e.y;return{x:t+n.x,y:r+n.y}}(function e(n,t){var r=n.x,a=n.y;return t?e({x:a,y:-r},t-1):{x:r,y:a}}(function(e,n){var t=e.x,r=e.y;return{x:t-n.x,y:r-n.y}}(n,e),t),e)}),Y={squares:[],size:0,hidden:!1},J=Object(p.a)({START_GAME:function(){return Y},UPDATE_SELECTION:function(e,n){var t=n.payload,r=t.board,a=t.start,o=t.end,c=K(r,a,o);return G()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return Y},HIDE_SELECTION:function(e){return e.squares.length<4?Y:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return Y},ADVANCE_TUTORIAL:function(){return Y}},Y),K=function(e,n,t){return Object(r.a)({},Y,{size:function(e,n){var t=e.x,r=e.y,a=n.x,o=n.y;return Math.hypot(t-a,r-o)}(n,t),squares:F()(Q()(0,4).map(V(function(e,n,t){var r=e.x,a=e.y;return{x:r*t+n.x*(1-t),y:a*t+n.y*(1-t)}}(n,t,.5),n)).filter($(e)).filter(ne(e)).filter(ee(e,Z(e,n))).map(X))})},X=q()(function(e){return e.x+e.y*A}),$=q()(function(e,n){var t=n.x,r=n.y;return 0<=t&&t<A&&t%1===0&&0<=r&&r<e.length/A&&r%1===0}),Z=function(e,n){return e[X(n)]},ee=q()(function(e,n,t){return Z(e,t)===n}),ne=q()(function(e,n){return Z(e,n)<S}),te={board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game won\u2019t tell you when there aren\u2019t any squares left to remove.\n         You have to call it quits.\n         Enjoy!"],step:0},re=Object(p.a)({START_TUTORIAL:function(e){return Object(r.a)({},e,{step:0})},ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},te);function ae(e){return e.selection||(e=Object(r.a)({},e,{selection:Y,tutorial:te})),e.options.inputMode||(e.options.inputMode=L),e}var oe=t(13),ce=t.n(oe),ie=t(14),ue=t(62),le=t.n(ue),se=t(5),de=t(109),fe=Object(de.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,n,t,r){return{indexes:e,values:n,size:t,bucket:r}},UPDATE_SELECTION:function(e,n,t){return{board:e,start:n,end:t}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},START_TUTORIAL:function(){return{}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,n){return{index:e,hue:n}},RESET_HUES:function(){return{}}}),be=fe.requestAssureGame,ve=fe.requestStartGame,me=fe.startGame,ke=fe.replaceSquares,Oe=fe.updateSelection,he=fe.discardSelection,pe=fe.hideSelection,ge=fe.updateHighscore,je=fe.startTutorial,Ee=fe.advanceTutorial,ye=fe.changeInputMode,xe=fe.changeHue,Ae=fe.resetHues,Se=t(17),Te=function(e){return e.selection},Re=function(e){return e.game&&e.game.streak},Ce=function(e){return e.router.location.pathname===w?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},we=function(e){return e.game&&e.game.bucket},Me=function(e){return e.game&&e.game.score},_e=function(e){return e.highscore},De=Object(Se.a)(function(e){return!!function(e){return e.game}(e)},function(e){return e}),Le=Object(Se.a)(Re,function(e){return e&&e.type}),Ue=Object(Se.a)(Re,function(e){return e&&e.count}),Pe=Object(Se.a)(Te,function(e){return e.squares}),Ie=Object(Se.a)(Te,function(e){return e.size}),He=Object(Se.a)(Te,function(e){return e.hidden}),Be=Object(Se.a)(He,function(e){return e}),qe=function(e){return Object(Se.a)(Ce,Pe,He,function(n,t,r){var a=t.includes(e);return{type:n&&n[e],active:a,inactive:t.length>0&&!a,hidden:r&&a,ready:4===t.length&&a}})},Ne=function(e){return e.router.location.pathname===w},Ge=function(e){return e.tutorial.message[e.tutorial.step]},ze=function(e){return e.options},Qe=Object(Se.a)(ze,function(e){return e.inputMode}),We=Object(Se.a)(ze,function(e){return e.hues}),Fe=ce.a.mark(Ze),Ve=ce.a.mark(en),Ye=ce.a.mark(nn),Je=ce.a.mark(tn),Ke=ce.a.mark(rn),Xe=ce.a.mark(an);function $e(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(h.a)(Array(n)).reduce(function(e){var n=Object(ie.a)(e,2),o=n[0],c=n[1];0===(c=Object(h.a)(c)).length&&(c=Object(h.a)(Array((r-t)*a)).map(function(e,n){return n%(r-t)+t}));var i=Math.random()*c.length|0,u=c.splice(i,1)[0];return[Object(h.a)(o).concat([u]),c]},[[],e])}function Ze(){var e,n,t,r,a;return ce.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(se.c)();case 2:if(e=o.sent,He(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(se.a)(le.a,500);case 7:if(!Ne(e)){o.next=11;break}return o.next=10,Object(se.b)(Ee());case 10:return o.abrupt("return");case 11:return n=$e(we(e),4),t=Object(ie.a)(n,2),r=t[0],a=t[1],o.next=14,Object(se.b)(ke(Pe(e),r,Ie(e),a));case 14:case"end":return o.stop()}},Fe,this)}function en(){var e;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(se.c)();case 2:return e=n.sent,n.next=5,Object(se.b)(ge(Me(e)));case 5:case"end":return n.stop()}},Ve,this)}function nn(){var e,n,t;return ce.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=$e([],y*A),n=Object(ie.a)(e,1),t=n[0],r.next=3,Object(se.b)(me(t));case 3:case"end":return r.stop()}},Ye,this)}function tn(){var e,n,t,r;return ce.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(se.c)();case 2:if(e=a.sent,De(e)){a.next=7;break}return n=$e([],y*A),t=Object(ie.a)(n,1),r=t[0],a.next=7,Object(se.b)(me(r));case 7:case"end":return a.stop()}},Je,this)}function rn(e){return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.payload.location.pathname!==w){n.next=4;break}return n.next=4,Object(se.b)(je());case 4:return n.next=6,Object(se.b)(he());case 6:case"end":return n.stop()}},Ke,this)}function an(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(se.d)("HIDE_SELECTION",Ze);case 2:return e.next=4,Object(se.d)("REPLACE_SQUARES",en);case 4:return e.next=6,Object(se.d)("REQUEST_ASSURE_GAME",tn);case 6:return e.next=8,Object(se.d)("REQUEST_START_GAME",nn);case 8:return e.next=10,Object(se.d)("@@router/LOCATION_CHANGE",rn);case 10:case"end":return e.stop()}},Xe,this)}var on=t(12).checkBEMProps;function cn(e){var n=e.index,t=Object(l.e)(qe(n)),r=Object(l.e)(We),a={filter:"hue-rotate(".concat(r[t.type],"deg)")};return on(o.a,"button",{block:"square",mods:t,style:a})}var un=t(12).checkBEMProps;function ln(e){var n=e.isLocked,t=void 0!==n&&n,r=e.onDragUpdate,c=e.onDragEnd,i=void 0===c?function(){}:c,u=e.onDragAbort,l=void 0===u?function(){}:u,s=e.zIndex,d=void 0===s?1e4:s,f=Object(a.useRef)(),b=Object(a.useState)(null),v=Object(ie.a)(b,2),m=v[0],k=v[1],O={height:"100%",position:"absolute",width:"100%",zIndex:d};function h(){!t&&m&&(k(null),l())}return un(o.a,"div",{style:O,"touch-action":"none",onPointerDown:function(e){return function(e){if(!t){var n=sn(e,f);k(n),r(n,n)}}(e)},onPointerUp:function(e){!t&&m&&(k(null),i())},onPointerMove:function(e){return function(e){m&&r(m,sn(e,f))}(e)},onPointerCancel:function(){return h()},onPointerLeave:function(){return h()},onPointerOut:function(){return h()},onLostPointerCapture:function(){return h()},ref:f})}function sn(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,i=n.current;return{x:(o-r)/i.offsetWidth,y:(c-a)/i.offsetHeight}}var dn=t(12).checkBEMProps;function fn(e){var n=e.gridWidth,t=e.gridHeight,r=e.isLocked,c=e.onDragAbort,i=e.onDragEnd,u=e.onDragUpdate,l=Object(a.useState)(null),s=Object(ie.a)(l,2),d=s[0],f=s[1];return dn(o.a,ln,{onDragAbort:function(){f(null),c()},onDragEnd:function(){f(null),i()},onDragUpdate:function(e,r){var a={x:e.x*n|0,y:e.y*t|0},o={x:r.x*n|0,y:r.y*t|0};d&&r.x===d.x&&r.y===d.y||(f(r),u(a,o))},isLocked:r})}var bn=t(12).checkBEMProps;function vn(e){var n=e.onClick,t=e.onMouseMove,r=void 0===t?function(){}:t,c=e.zIndex,i=void 0===c?1e4:c,u=Object(a.useRef)(),l={height:"100%",position:"absolute",width:"100%",zIndex:i};return bn(o.a,"div",{onClick:function(e){n(mn(e,u))},onMouseMove:function(e){r(mn(e,u))},ref:u,style:l})}function mn(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,i=n.current;return{x:(o-r)/i.offsetWidth,y:(c-a)/i.offsetHeight}}var kn=t(12).checkBEMProps;function On(e){var n=e.gridWidth,t=e.gridHeight,r=e.onDragAbort,c=e.onDragEnd,i=e.onDragUpdate,u=e.isLocked,l=Object(a.useState)(null),s=Object(ie.a)(l,2),d=s[0],f=s[1],b=Object(a.useState)(null),v=Object(ie.a)(b,2),m=v[0],k=v[1];return kn(o.a,vn,{onClick:function(e){if(!u){var a={x:e.x*n|0,y:e.y*t|0};d?a.x===d.x&&a.y===d.y?(f(null),k(null),r()):(f(null),k(null),c()):(f(a),k(a),i(a,a))}},onMouseMove:function(e){if(!u&&d){var r={x:e.x*n|0,y:e.y*t|0};m&&r.x===m.x&&r.y===m.y||(k(r),i(d,r))}}})}var hn=t(12).checkBEMProps;function pn(e){var n=e.isTutorial,t=void 0!==n&&n,r=Object(l.e)(Ce),a=Object(l.e)(Be),c=Object(l.e)(Qe),i=Object(l.d)(),u=t?x:y,s=Q()(0,u*A).map(function(e){return hn(o.a,"div",{block:"board",elem:"square",key:e},hn(o.a,cn,{index:e}))});return hn(o.a,"div",{block:"board",mods:{tutorial:t}},c===L&&hn(o.a,fn,{gridWidth:A,gridHeight:u,onDragEnd:function(){return i(pe())},onDragUpdate:function(e,n){return i(Oe(r,e,n))},onDragAbort:function(){return i(he())},isLocked:a}),c===U&&hn(o.a,On,{gridWidth:A,gridHeight:u,onDragEnd:function(){return i(pe())},onDragUpdate:function(e,n){return i(Oe(r,e,n))},onDragAbort:function(){return i(he())},isLocked:a}),s)}var gn=t(27);function jn(){var e=Object(a.useRef)(),n=Object(a.useRef)();return Object(a.useEffect)(function(){return window.onkeydown=function(t){t.key===_&&e.current.click(),t.key===D&&n.current.click()},function(){window.onkeydown=null}}),{refLeft:e,refRight:n}}var En=t(64),yn=t(8),xn=t(12).checkBEMProps;var An=Object(l.c)(null,{goBack:yn.c})(function(e){var n=e.children,t=e.goBack,r=e.onClick,a=void 0===r?function(){}:r,c=Object(En.a)(e,["children","goBack","onClick"]);return xn(o.a,gn.a,Object.assign({},c,{onClick:function(e){a(),M&&(t(),e.preventDefault())}}),n||"Back")}),Sn=t(12).checkBEMProps;var Tn=function(){var e=jn(),n=e.refLeft,t=e.refRight,r=Object(l.e)(De),a=Object(l.e)(_e),c=Object(l.e)(Me),i=Object(l.e)(Ue),u=Object(l.e)(Le),s=Object(l.e)(We);if(!r)return null;var d={filter:"hue-rotate(".concat(s[u],"deg)")};return Sn(o.a,o.a.Fragment,null,Sn(o.a,"div",{block:"menu"},Sn(o.a,o.a.Fragment,null,Sn(o.a,"div",{block:"stat"},Sn(o.a,"div",{block:"stat",elem:"title"},"Score"),Sn(o.a,"div",{block:"stat",elem:"value"},c)),Sn(o.a,"div",{block:"stat"},Sn(o.a,"div",{block:"stat",elem:"title"},"Streak"),i>0&&Sn(o.a,o.a.Fragment,null,Sn(o.a,"div",{block:"stat",elem:"square"},Sn(o.a,"div",{block:"square",mods:{type:u},style:d})),Sn(o.a,"div",{block:"stat",elem:"value"},i))),Sn(o.a,"div",{block:"stat"},Sn(o.a,"div",{block:"stat",elem:"title"},"Highscore"),Sn(o.a,"div",{block:"stat",elem:"value"},a)))),Sn(o.a,"div",{block:"main-menu"},Sn(o.a,"div",{block:"main-menu",elem:"action"},Sn(o.a,An,{to:T,innerRef:n})),Sn(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!M}},"SELECT"),Sn(o.a,"div",{block:"main-menu",elem:"action"},Sn(o.a,gn.a,{to:C,innerRef:t},"Options"))))},Rn=t(12).checkBEMProps;var Cn=function(){var e=Object(l.d)(),n=Object(l.e)(De);return Object(a.useEffect)(function(){e(be())}),n?Rn(o.a,o.a.Fragment,null,Rn(o.a,pn,null),Rn(o.a,Tn,null)):null},wn=t(12).checkBEMProps;var Mn=function(){var e=jn(),n=e.refLeft,t=e.refRight,r=Object(l.e)(We),a={filter:"hue-rotate(".concat(r[1],"deg)")},c=Q()(0,y*A).map(function(e){return wn(o.a,"div",{block:"board",elem:"square",key:e},wn(o.a,"div",{block:"square",mods:{type:1},style:a}))});return wn(o.a,o.a.Fragment,null,wn(o.a,"div",{block:"board",mods:{title:!0}},wn(o.a,"div",{block:"board",elem:"title"},"Quood"),c),wn(o.a,"div",{block:"main-menu"},wn(o.a,"div",{block:"main-menu",elem:"action"},wn(o.a,gn.a,{to:R,innerRef:n},"Play")),wn(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!M}},"SELECT"),wn(o.a,"div",{block:"main-menu",elem:"action"},wn(o.a,gn.a,{to:w,innerRef:t},"Tutorial"))))},_n=t(12).checkBEMProps;var Dn=Object(l.c)(null,{goBack:yn.c})(function(e){e.goBack;var n=jn().refLeft,t=Object(l.e)(Ge);return _n(o.a,o.a.Fragment,null,_n(o.a,pn,{isTutorial:!0}),_n(o.a,"div",{block:"menu"},_n(o.a,"div",{block:"message"},t)),_n(o.a,"div",{block:"main-menu"},_n(o.a,"div",{block:"main-menu",elem:"action"},_n(o.a,An,{to:T,innerRef:n})),_n(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!M}},"SELECT"),_n(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!0}})))}),Ln=t(12).checkBEMProps;function Un(e){var n=e.index,t=Object(l.e)(We)[n],r=Object(l.d)(),a=Object(l.e)(Qe),c={filter:"hue-rotate(".concat(t,"deg)")};return Ln(o.a,"div",{block:"slider"},Ln(o.a,"div",{block:"slider",elem:"square"},Ln(o.a,"div",{block:"square",mods:{type:n},style:c})),Ln(o.a,"div",{block:"slider",elem:"bar-border"},a===L&&Ln(o.a,ln,{onDragUpdate:function(e,t){r(xe(n,360*t.x|0))}}),a===U&&Ln(o.a,vn,{onClick:function(e){r(xe(n,360*e.x|0))}}),Ln(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(t/3.6,"%")}})))}var Pn=t(12).checkBEMProps;var In=Object(l.c)(null,{goBack:yn.c})(function(e){e.goBack;var n=jn(),t=n.refLeft,r=n.refRight,a=Object(l.e)(Qe),c=Q()(0,S).map(function(e){return Pn(o.a,Un,{key:e,index:e})}),i=Object(l.d)();return Pn(o.a,o.a.Fragment,null,Pn(o.a,"div",{block:"menu"},!M&&Pn(o.a,"div",{block:"menu",elem:"block"},Pn(o.a,"div",{block:"options-headline"},"Input Mode"),Pn(o.a,"button",{block:"action",onClick:function(){return i(ye())}},a===L?"Touch":"Click")),Pn(o.a,"div",{block:"menu",elem:"block"},Pn(o.a,"div",{block:"options-headline"},"Square Colors"),c,Pn(o.a,"button",{block:"action",onClick:function(){return i(Ae())}},"Reset"))),Pn(o.a,"div",{block:"main-menu"},Pn(o.a,"div",{block:"main-menu",elem:"action"},Pn(o.a,An,{to:R,innerRef:t})),Pn(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!M}},"SELECT"),Pn(o.a,"div",{block:"main-menu",elem:"action"},Pn(o.a,An,{to:R,innerRef:r,onClick:function(){i(ve())}},"Restart"))))});var Hn,Bn=Object(s.a)(),qn=Object(k.b)(),Nn=Object(u.e)((Hn=qn,Object(O.a)(Object(u.c)({router:Object(m.b)(Hn),game:j,tutorial:re,highscore:E,selection:J,options:H}),ae)),Object(u.d)(f()("",{slicer:function(e){return function(e){var n=Object(r.a)({},e);return delete n.selection,delete n.tutorial,n}},key:"quood"}),Object(u.a)(Object(v.a)(qn),Bn)));Bn.run(an);var Gn=t(12).checkBEMProps;i.a.render(Gn(o.a,l.a,{store:Nn},Gn(o.a,m.a,{history:qn},Gn(o.a,b.c,null,Gn(o.a,b.a,{exact:!0,path:T,render:function(){return Gn(o.a,Mn,null)}}),Gn(o.a,b.a,{exact:!0,path:R,render:function(){return Gn(o.a,Cn,null)}}),Gn(o.a,b.a,{exact:!0,path:w,render:function(){return Gn(o.a,Dn,null)}}),Gn(o.a,b.a,{exact:!0,path:C,render:function(){return Gn(o.a,In,null)}})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,n,t){e.exports=t(108)},78:function(e,n,t){}},[[65,1,2]]]);
//# sourceMappingURL=main.be5475f4.chunk.js.map