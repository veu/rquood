(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(0),o=n.n(a),c=n(39),i=n.n(c),u=n(25),l=n(3),s=n(63),d=n(59),f=n.n(d),b=n(7),v=n(57),m=n(26),O=n(33);n(78),n(79),n(81),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=n(41),p=n(21),h=n(113),g={board:null,bucket:[],score:0,streak:null},j=Object(h.a)({START_GAME:function(e,t){var n=t.payload.board;return Object(r.a)({},g,{board:n})},REPLACE_SQUARES:function(e,t){var n=t.payload,r=n.indexes,a=n.values,o=n.size,c=n.bucket,i=Object(p.a)(e.board),u=i[r[0]],l=!0,s=!1,d=void 0;try{for(var f,b=r[Symbol.iterator]();!(l=(f=b.next()).done);l=!0){i[f.value]=a.pop()}}catch(m){s=!0,d=m}finally{try{l||null==b.return||b.return()}finally{if(s)throw d}}var v=e.streak&&e.streak.type===u?e.streak.count+1:1;return{board:i,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:u}}}},null),E=Object(h.a)({UPDATE_HIGHSCORE:function(e,t){var n=t.payload.score;return Math.max(e,n)}},0),y=navigator.userAgent.includes("KAIOS"),x=Array(3).fill(0),T={hues:x,inputMode:y?"CLICK":"TOUCH"},C=Object(h.a)({CHANGE_HUE:function(e,t){var n=t.payload,a=n.index,o=n.hue,c=Object(p.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:x})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:"CLICK"===e.inputMode?"TOUCH":"CLICK"})}},T),A=n(28),S=n.n(A),R=n(50),w=n.n(R),M=n(24),L=n.n(M),U=n(60),_=n.n(U),D=function(e,t,n){var r=e.x,a=e.y;return{x:r*n+t.x*(1-n),y:a*n+t.y*(1-n)}},I=S()((function(e,t,n){return function(e,t){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}(function e(t,n){var r=t.x,a=t.y;return n?e({x:a,y:-r},n-1):{x:r,y:a}}(function(e,t){var n=e.x,r=e.y;return{x:n-t.x,y:r-t.y}}(t,e),n),e)})),H=function(e,t){var n=e.x,r=e.y,a=t.x,o=t.y;return Math.hypot(n-a,r-o)},P={squares:[],size:0,hidden:!1},B=Object(h.a)({START_GAME:function(){return P},UPDATE_SELECTION:function(e,t){var n=t.payload,r=n.board,a=n.start,o=n.end,c=q(r,a,o);return w()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return P},HIDE_SELECTION:function(e){return e.squares.length<4?P:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return P},ADVANCE_TUTORIAL:function(){return P}},P),q=function(e,t,n){return Object(r.a)({},P,{size:H(t,n),squares:_()(L()(0,4).map(I(D(t,n,.5),t)).filter(G(e)).filter(W(e)).filter(Q(e,z(e,t))).map(N))})},N=S()((function(e){return e.x+7*e.y})),G=S()((function(e,t){var n=t.x,r=t.y;return 0<=n&&n<7&&n%1===0&&0<=r&&r<e.length/7&&r%1===0})),z=function(e,t){return e[N(t)]},Q=S()((function(e,t,n){return z(e,n)===t})),W=S()((function(e,t){return z(e,t)<3})),F={board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game won\u2019t tell you when there aren\u2019t any squares left to remove.\n         You have to call it quits.\n         Enjoy!"],step:0},K=Object(h.a)({START_TUTORIAL:function(e){return Object(r.a)({},e,{step:0})},ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},F);function V(e){return e.selection||(e=Object(r.a)({},e,{selection:P,tutorial:F})),e.options.inputMode||(e.options.inputMode="TOUCH"),e}var Y=n(13),J=n.n(Y),X=n(14),$=n(62),Z=n.n($),ee=n(5),te=n(112),ne=Object(te.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,t,n,r){return{indexes:e,values:t,size:n,bucket:r}},UPDATE_SELECTION:function(e,t,n){return{board:e,start:t,end:n}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},START_TUTORIAL:function(){return{}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,t){return{index:e,hue:t}},RESET_HUES:function(){return{}}}),re=ne.requestAssureGame,ae=ne.requestStartGame,oe=ne.startGame,ce=ne.replaceSquares,ie=ne.updateSelection,ue=ne.discardSelection,le=ne.hideSelection,se=ne.updateHighscore,de=ne.startTutorial,fe=ne.advanceTutorial,be=ne.changeInputMode,ve=ne.changeHue,me=ne.resetHues,Oe=n(17),ke=function(e){return e.selection},pe=function(e){return e.game&&e.game.streak},he=function(e){return"/tutorial"===e.router.location.pathname?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},ge=function(e){return e.game&&e.game.bucket},je=function(e){return e.game&&e.game.score},Ee=function(e){return e.highscore},ye=Object(Oe.a)((function(e){return!!function(e){return e.game}(e)}),(function(e){return e})),xe=Object(Oe.a)(pe,(function(e){return e&&e.type})),Te=Object(Oe.a)(pe,(function(e){return e&&e.count})),Ce=Object(Oe.a)(ke,(function(e){return e.squares})),Ae=Object(Oe.a)(ke,(function(e){return e.size})),Se=Object(Oe.a)(ke,(function(e){return e.hidden})),Re=Object(Oe.a)(Se,(function(e){return e})),we=function(e){return"/tutorial"===e.router.location.pathname},Me=function(e){return e.tutorial.message[e.tutorial.step]},Le=function(e){return e.options},Ue=Object(Oe.a)(Le,(function(e){return e.inputMode})),_e=Object(Oe.a)(Le,(function(e){return e.hues})),De=J.a.mark(Ge),Ie=J.a.mark(ze),He=J.a.mark(Qe),Pe=J.a.mark(We),Be=J.a.mark(Fe),qe=J.a.mark(Ke);function Ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(p.a)(Array(t)).reduce((function(e){var t=Object(X.a)(e,2),o=t[0],c=t[1];0===(c=Object(p.a)(c)).length&&(c=Object(p.a)(Array((r-n)*a)).map((function(e,t){return t%(r-n)+n})));var i=Math.random()*c.length|0,u=c.splice(i,1)[0];return[Object(p.a)(o).concat([u]),c]}),[[],e])}function Ge(){var e,t,n,r,a;return J.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(ee.c)();case 2:if(e=o.sent,Se(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(ee.a)(Z.a,500);case 7:if(!we(e)){o.next=11;break}return o.next=10,Object(ee.b)(fe());case 10:return o.abrupt("return");case 11:return t=Ne(ge(e),4),n=Object(X.a)(t,2),r=n[0],a=n[1],o.next=14,Object(ee.b)(ce(Ce(e),r,Ae(e),a));case 14:case"end":return o.stop()}}),De,this)}function ze(){var e;return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ee.c)();case 2:return e=t.sent,t.next=5,Object(ee.b)(se(je(e)));case 5:case"end":return t.stop()}}),Ie,this)}function Qe(){var e,t,n;return J.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=Ne([],49),t=Object(X.a)(e,1),n=t[0],r.next=3,Object(ee.b)(oe(n));case 3:case"end":return r.stop()}}),He,this)}function We(){var e,t,n,r;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ee.c)();case 2:if(e=a.sent,ye(e)){a.next=7;break}return t=Ne([],49),n=Object(X.a)(t,1),r=n[0],a.next=7,Object(ee.b)(oe(r));case 7:case"end":return a.stop()}}),Pe,this)}function Fe(e){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("/tutorial"!==e.payload.location.pathname){t.next=4;break}return t.next=4,Object(ee.b)(de());case 4:return t.next=6,Object(ee.b)(ue());case 6:case"end":return t.stop()}}),Be,this)}function Ke(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ee.d)("HIDE_SELECTION",Ge);case 2:return e.next=4,Object(ee.d)("REPLACE_SQUARES",ze);case 4:return e.next=6,Object(ee.d)("REQUEST_ASSURE_GAME",We);case 6:return e.next=8,Object(ee.d)("REQUEST_START_GAME",Qe);case 8:return e.next=10,Object(ee.d)("@@router/LOCATION_CHANGE",Fe);case 10:case"end":return e.stop()}}),qe,this)}var Ve=n(12).checkBEMProps;function Ye(e){var t=e.index,n=Object(l.e)(function(e){return Object(Oe.a)(he,Ce,Se,(function(t,n,r){var a=n.includes(e);return{type:t&&t[e],active:a,inactive:n.length>0&&!a,hidden:r&&a,ready:4===n.length&&a}}))}(t)),r=Object(l.e)(_e),a={filter:"hue-rotate(".concat(r[n.type],"deg)")};return Ve(o.a,"button",{block:"square",mods:n,style:a})}var Je=n(12).checkBEMProps;function Xe(e){var t=e.isLocked,n=void 0!==t&&t,r=e.onDragUpdate,c=e.onDragEnd,i=void 0===c?function(){}:c,u=e.onDragAbort,l=void 0===u?function(){}:u,s=e.zIndex,d=void 0===s?1e4:s,f=Object(a.useRef)(),b=Object(a.useState)(null),v=Object(X.a)(b,2),m=v[0],O=v[1],k={height:"100%",position:"absolute",width:"100%",zIndex:d};function p(){!n&&m&&(O(null),l())}return Je(o.a,"div",{style:k,"touch-action":"none",onPointerDown:function(e){return function(e){if(!n){var t=$e(e,f);O(t),r(t,t)}}(e)},onPointerUp:function(e){!n&&m&&(O(null),i())},onPointerMove:function(e){return function(e){m&&r(m,$e(e,f))}(e)},onPointerCancel:function(){return p()},onPointerLeave:function(){return p()},onPointerOut:function(){return p()},onLostPointerCapture:function(){return p()},ref:f})}function $e(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,i=t.current;return{x:(o-r)/i.offsetWidth,y:(c-a)/i.offsetHeight}}var Ze=n(12).checkBEMProps;function et(e){var t=e.gridWidth,n=e.gridHeight,r=e.isLocked,c=e.onDragAbort,i=e.onDragEnd,u=e.onDragUpdate,l=Object(a.useState)(null),s=Object(X.a)(l,2),d=s[0],f=s[1];return Ze(o.a,Xe,{onDragAbort:function(){f(null),c()},onDragEnd:function(){f(null),i()},onDragUpdate:function(e,r){var a={x:e.x*t|0,y:e.y*n|0},o={x:r.x*t|0,y:r.y*n|0};d&&r.x===d.x&&r.y===d.y||(f(r),u(a,o))},isLocked:r})}var tt=n(12).checkBEMProps;function nt(e){var t=e.onClick,n=e.onMouseMove,r=void 0===n?function(){}:n,c=e.zIndex,i=void 0===c?1e4:c,u=Object(a.useRef)(),l={height:"100%",position:"absolute",width:"100%",zIndex:i};return tt(o.a,"div",{onClick:function(e){t(rt(e,u))},onMouseMove:function(e){r(rt(e,u))},ref:u,style:l})}function rt(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,i=t.current;return{x:(o-r)/i.offsetWidth,y:(c-a)/i.offsetHeight}}var at=n(12).checkBEMProps;function ot(e){var t=e.gridWidth,n=e.gridHeight,r=e.onDragAbort,c=e.onDragEnd,i=e.onDragUpdate,u=e.isLocked,l=Object(a.useState)(null),s=Object(X.a)(l,2),d=s[0],f=s[1],b=Object(a.useState)(null),v=Object(X.a)(b,2),m=v[0],O=v[1];return at(o.a,nt,{onClick:function(e){if(!u){var a={x:e.x*t|0,y:e.y*n|0};d?a.x===d.x&&a.y===d.y?(f(null),O(null),r()):(f(null),O(null),c()):(f(a),O(a),i(a,a))}},onMouseMove:function(e){if(!u&&d){var r={x:e.x*t|0,y:e.y*n|0};m&&r.x===m.x&&r.y===m.y||(O(r),i(d,r))}}})}var ct=n(12).checkBEMProps;function it(e){var t=e.isTutorial,n=void 0!==t&&t,r=Object(l.e)(he),a=Object(l.e)(Re),c=Object(l.e)(Ue),i=Object(l.d)(),u=n?5:7,s=L()(0,7*u).map((function(e){return ct(o.a,"div",{block:"board",elem:"square",key:e},ct(o.a,Ye,{index:e}))}));return ct(o.a,"div",{block:"board",mods:{tutorial:n}},"TOUCH"===c&&ct(o.a,et,{gridWidth:7,gridHeight:u,onDragEnd:function(){return i(le())},onDragUpdate:function(e,t){return i(ie(r,e,t))},onDragAbort:function(){return i(ue())},isLocked:a}),"CLICK"===c&&ct(o.a,ot,{gridWidth:7,gridHeight:u,onDragEnd:function(){return i(le())},onDragUpdate:function(e,t){return i(ie(r,e,t))},onDragAbort:function(){return i(ue())},isLocked:a}),s)}var ut=n(27);function lt(){var e=Object(a.useRef)(),t=Object(a.useRef)();return Object(a.useEffect)((function(){return window.onkeydown=function(n){"SoftLeft"===n.key&&e.current.click(),"SoftRight"===n.key&&t.current.click()},function(){window.onkeydown=null}})),{refLeft:e,refRight:t}}var st=n(64),dt=n(8),ft=n(12).checkBEMProps;var bt=Object(l.c)(null,{goBack:dt.c})((function(e){var t=e.children,n=e.goBack,r=e.onClick,a=void 0===r?function(){}:r,c=Object(st.a)(e,["children","goBack","onClick"]);return ft(o.a,ut.a,Object.assign({},c,{onClick:function(e){a(),y&&(n(),e.preventDefault())}}),t||"Back")})),vt=n(12).checkBEMProps;var mt=function(){var e=lt(),t=e.refLeft,n=e.refRight,r=Object(l.e)(ye),a=Object(l.e)(Ee),c=Object(l.e)(je),i=Object(l.e)(Te),u=Object(l.e)(xe),s=Object(l.e)(_e);if(!r)return null;var d={filter:"hue-rotate(".concat(s[u],"deg)")};return vt(o.a,o.a.Fragment,null,vt(o.a,"div",{block:"menu"},vt(o.a,o.a.Fragment,null,vt(o.a,"div",{block:"stat"},vt(o.a,"div",{block:"stat",elem:"title"},"Score"),vt(o.a,"div",{block:"stat",elem:"value"},c)),vt(o.a,"div",{block:"stat"},vt(o.a,"div",{block:"stat",elem:"title"},"Streak"),i>0&&vt(o.a,o.a.Fragment,null,vt(o.a,"div",{block:"stat",elem:"square"},vt(o.a,"div",{block:"square",mods:{type:u},style:d})),vt(o.a,"div",{block:"stat",elem:"value"},i))),vt(o.a,"div",{block:"stat"},vt(o.a,"div",{block:"stat",elem:"title"},"Highscore"),vt(o.a,"div",{block:"stat",elem:"value"},a)))),vt(o.a,"div",{block:"main-menu"},vt(o.a,"div",{block:"main-menu",elem:"action"},vt(o.a,bt,{to:"/",innerRef:t})),vt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!y}},"SELECT"),vt(o.a,"div",{block:"main-menu",elem:"action"},vt(o.a,ut.a,{to:"/options",innerRef:n},"Options"))))},Ot=n(12).checkBEMProps;var kt=function(){var e=Object(l.d)(),t=Object(l.e)(ye);return Object(a.useEffect)((function(){e(re())})),t?Ot(o.a,o.a.Fragment,null,Ot(o.a,it,null),Ot(o.a,mt,null)):null},pt=n(12).checkBEMProps;var ht=function(){var e=lt(),t=e.refLeft,n=e.refRight,r=Object(l.e)(_e),a={filter:"hue-rotate(".concat(r[1],"deg)")},c=L()(0,49).map((function(e){return pt(o.a,"div",{block:"board",elem:"square",key:e},pt(o.a,"div",{block:"square",mods:{type:1},style:a}))}));return pt(o.a,o.a.Fragment,null,pt(o.a,"div",{block:"board",mods:{title:!0}},pt(o.a,"div",{block:"board",elem:"title"},"Quood"),c),pt(o.a,"div",{block:"main-menu"},pt(o.a,"div",{block:"main-menu",elem:"action"},pt(o.a,ut.a,{to:"/play",innerRef:t},"Play")),pt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!y}},"SELECT"),pt(o.a,"div",{block:"main-menu",elem:"action"},pt(o.a,ut.a,{to:"/tutorial",innerRef:n},"Tutorial"))))},gt=n(12).checkBEMProps;var jt=Object(l.c)(null,{goBack:dt.c})((function(e){e.goBack;var t=lt().refLeft,n=Object(l.e)(Me);return gt(o.a,o.a.Fragment,null,gt(o.a,it,{isTutorial:!0}),gt(o.a,"div",{block:"menu"},gt(o.a,"div",{block:"message"},n)),gt(o.a,"div",{block:"main-menu"},gt(o.a,"div",{block:"main-menu",elem:"action"},gt(o.a,bt,{to:"/",innerRef:t})),gt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!y}},"SELECT"),gt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!0}})))})),Et=n(12).checkBEMProps;function yt(e){var t=e.index,n=Object(l.e)(_e)[t],r=Object(l.d)(),a=Object(l.e)(Ue),c={filter:"hue-rotate(".concat(n,"deg)")};return Et(o.a,"div",{block:"slider"},Et(o.a,"div",{block:"slider",elem:"square"},Et(o.a,"div",{block:"square",mods:{type:t},style:c})),Et(o.a,"div",{block:"slider",elem:"bar-border"},"TOUCH"===a&&Et(o.a,Xe,{onDragUpdate:function(e,n){r(ve(t,360*n.x|0))}}),"CLICK"===a&&Et(o.a,nt,{onClick:function(e){r(ve(t,360*e.x|0))}}),Et(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(n/3.6,"%")}})))}var xt=n(12).checkBEMProps;var Tt=Object(l.c)(null,{goBack:dt.c})((function(e){e.goBack;var t=lt(),n=t.refLeft,r=t.refRight,a=Object(l.e)(Ue),c=L()(0,3).map((function(e){return xt(o.a,yt,{key:e,index:e})})),i=Object(l.d)();return xt(o.a,o.a.Fragment,null,xt(o.a,"div",{block:"menu"},!y&&xt(o.a,"div",{block:"menu",elem:"block"},xt(o.a,"div",{block:"options-headline"},"Input Mode"),xt(o.a,"button",{block:"action",onClick:function(){return i(be())}},"TOUCH"===a?"Touch":"Click")),xt(o.a,"div",{block:"menu",elem:"block"},xt(o.a,"div",{block:"options-headline"},"Square Colors"),c,xt(o.a,"button",{block:"action",onClick:function(){return i(me())}},"Reset"))),xt(o.a,"div",{block:"main-menu"},xt(o.a,"div",{block:"main-menu",elem:"action"},xt(o.a,bt,{to:"/play",innerRef:n})),xt(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!y}},"SELECT"),xt(o.a,"div",{block:"main-menu",elem:"action"},xt(o.a,bt,{to:"/play",innerRef:r,onClick:function(){i(ae())}},"Restart"))))}));var Ct,At=Object(s.a)(),St=Object(O.b)(),Rt=Object(u.e)((Ct=St,Object(k.a)(Object(u.c)({router:Object(m.b)(Ct),game:j,tutorial:K,highscore:E,selection:B,options:C}),V)),Object(u.d)(f()("",{slicer:function(e){return function(e){var t=Object(r.a)({},e);return delete t.selection,delete t.tutorial,t}},key:"quood"}),Object(u.a)(Object(v.a)(St),At)));At.run(Ke);var wt=n(12).checkBEMProps;i.a.render(wt(o.a,l.a,{store:Rt},wt(o.a,m.a,{history:St},wt(o.a,b.c,null,wt(o.a,b.a,{exact:!0,path:"/",render:function(){return wt(o.a,ht,null)}}),wt(o.a,b.a,{exact:!0,path:"/play",render:function(){return wt(o.a,kt,null)}}),wt(o.a,b.a,{exact:!0,path:"/tutorial",render:function(){return wt(o.a,jt,null)}}),wt(o.a,b.a,{exact:!0,path:"/options",render:function(){return wt(o.a,Tt,null)}})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},65:function(e,t,n){e.exports=n(111)},81:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.373d5094.chunk.js.map