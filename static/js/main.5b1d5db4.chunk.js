(this.webpackJsonprquood=this.webpackJsonprquood||[]).push([[0],{47:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(31),i=n.n(a),o=n(2),s=n(7),u=(n(45),n(46),n(47),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var d=n(10),j=function(e){return e.selection},b=function(e){return e.game&&e.game.streak},f=function(e){return w(e)?k(e):e.game&&e.game.board},h=function(e){return e.game&&e.game.score},m=Object(d.a)((function(e){return!!function(e){return e.game}(e)}),(function(e){return e})),v=Object(d.a)(b,(function(e){return e&&e.type})),O=Object(d.a)(b,(function(e){return e&&e.count})),x=Object(d.a)(j,(function(e){return e.squares})),g=Object(d.a)(j,(function(e){return e.size})),p=Object(d.a)(j,(function(e){return e.hidden})),y=Object(d.a)(p,(function(e){return e})),_=function(e){return Object(d.a)(f,x,p,(function(t,n,c){var r=n.includes(e);return{type:t&&t[e],active:r,inactive:n.length>0&&!r,hidden:c&&r,ready:4===n.length&&r}}))},N=function(e){return e.tutorial.message[e.tutorial.step]},k=function(e){return e.tutorial.board[e.tutorial.step]},w=function(e){return e.tutorial.active},S=function(e){return e.options},q=Object(d.a)(S,(function(e){return e.inputMode})),M=Object(d.a)(S,(function(e){return e.hues})),C=n(12),D=n.n(C),H="/",A="/play",T="/options",W="/tutorial",G="/about",L=n(11),E=n(4),U=n(27),I=n.n(U),P=n(32),R=n(6),F=n(36),z=n.n(F),B=n(5),Y={active:!1,board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game won\u2019t tell you when there aren\u2019t any squares left to remove.\n         You have to call it quits.\n         Enjoy!"],step:0},J=n(37),K=n(33),Q={board:null,bucket:[],score:0,streak:null},X="TOUCH",V="CLICK",$=Array(3).fill(0),Z={hues:$,inputMode:X},ee=n(14),te=n.n(ee),ne=n(26),ce=n.n(ne),re=n(34),ae=n.n(re),ie=function(e,t,n){var c=e.x,r=e.y;return{x:c*n+t.x*(1-n),y:r*n+t.y*(1-n)}},oe=function e(t,n){var c=t.x,r=t.y;return n?e({x:r,y:-c},n-1):{x:c,y:r}},se=te()((function(e,t,n){return function(e,t){var n=e.x,c=e.y;return{x:n+t.x,y:c+t.y}}(oe(function(e,t){var n=e.x,c=e.y;return{x:n-t.x,y:c-t.y}}(t,e),n),e)})),ue=function(e,t){var n=e.x,c=e.y,r=t.x,a=t.y;return Math.hypot(n-r,c-a)},le={squares:[],size:0,hidden:!1},de=te()((function(e){return e.x+7*e.y})),je=te()((function(e,t){var n=t.x,c=t.y;return 0<=n&&n<7&&n%1===0&&0<=c&&c<e.length/7&&c%1===0})),be=function(e,t){return e[de(t)]},fe=te()((function(e,t,n){return be(e,n)===t})),he=te()((function(e,t){return be(e,t)<3})),me=function(e){return{selection:le,resetSelection:function(){return e(Object(B.a)((function(e){e.selection=le})))},updateSelection:function(t,n){return e(Object(B.a)((function(e){var c=function(e,t,n){return Object(R.a)(Object(R.a)({},le),{},{size:ue(t,n),squares:ae()(D()(0,4).map(se(ie(t,n,.5),t)).filter(je(e)).filter(he(e)).filter(fe(e,be(e,t))).map(de))})}(f(e),t,n);ce()(c.squares,e.selection.squares)||(e.selection=c)})))},hideSelection:function(){return e(Object(B.a)((function(e){e.selection.squares.length<4?e.selection=le:e.selection.hidden=!0})))}}},ve=n(21),Oe=n.n(ve),xe=n(35);function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(L.a)(Array(t)).reduce((function(e){var t=Object(E.a)(e,2),a=t[0],i=t[1];0===(i=Object(L.a)(i)).length&&(i=Object(L.a)(Array((c-n)*r)).map((function(e,t){return t%(c-n)+n})));var o=Math.random()*i.length|0,s=i.splice(o,1)[0];return[[].concat(Object(L.a)(a),[s]),i]}),[[],e])}var pe=Object(xe.configurePersist)({storage:localStorage}).persist,ye=z()(Object(J.devtools)(pe({key:"quood",allowlist:["game","highscore","options"]},(function(e,t){return Object(R.a)(Object(R.a)(Object(R.a)(Object(R.a)(Object(R.a)(Object(R.a)({},function(e){return{highscore:0,updateHighscore:function(){return e(Object(B.a)((function(e){e.highscore=Math.max(e.highscore,h(e))})))}}}(e)),function(e){return{tutorial:Y,startTutorial:function(){return e(Object(B.a)((function(e){e.tutorial.step=0,e.tutorial.active=!0})))},endTutorial:function(){return e(Object(B.a)((function(e){e.tutorial.active=!1})))},advanceTutorial:function(){return e(Object(B.a)((function(e){e.tutorial.step+=1})))}}}(e)),function(e){return{game:null,initGame:function(t){return e(Object(B.a)((function(e){e.game=Object(R.a)(Object(R.a)({},Q),{},{board:t})})))},replaceSquares:function(t,n){return e(Object(B.a)((function(e){var c,r=x(e),a=g(e),i=e.game.board[r[0]],o=Object(K.a)(r);try{for(o.s();!(c=o.n()).done;){var s=c.value;e.game.board[s]=t.pop()}}catch(l){o.e(l)}finally{o.f()}var u=e.game.streak&&e.game.streak.type===i?e.game.streak.count+1:1;e.game.score=e.game.score+(0|a)*u,e.game.streak={count:u,type:i},e.game.bucket=n})))}}}(e)),function(e){return{options:Z,changeHue:function(t,n){return e(Object(B.a)((function(e){var c=Object(L.a)(e.options.hues);c[t]=n,e.options.hues=c})))},resetHues:function(){return e(Object(B.a)((function(e){e.options.hues=$})))},changeInputMode:function(){return e(Object(B.a)((function(e){e.options.inputMode=e.options.inputMode===V?X:V})))}}}(e)),me(e)),{},{match:function(){var e=Object(P.a)(I.a.mark((function e(){var n,c,r,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t().hideSelection(),e.next=3,Oe()(0);case 3:if(p(t())){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Oe()(500);case 7:if(!w(t())){e.next=11;break}t().advanceTutorial(),e.next=16;break;case 11:return n=ge((i=t()).game&&i.game.bucket,4),c=Object(E.a)(n,2),r=c[0],a=c[1],t().replaceSquares(r,a),e.next=15,Oe()(0);case 15:t().updateHighscore();case 16:t().resetSelection();case 17:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}}(),assureGame:function(){if(!m(t())){var e=ge([],49),n=Object(E.a)(e,1)[0];t().initGame(n)}},startGame:function(){var e=ge([],49),n=Object(E.a)(e,1)[0];t().initGame(n)}})})))),_e=n(0);function Ne(e){var t=e.index,n=ye((function(e){return[M(e),_(t)(e)]})),c=Object(E.a)(n,2),r=c[0],a=c[1],i={filter:"hue-rotate(".concat(r[a.type],"deg)")},o="square",s=Object.entries(a).filter((function(e){var t=Object(E.a)(e,2);t[0];return!1!==t[1]})).map((function(e){var t=Object(E.a)(e,2),n=t[0],c=t[1];return"".concat(o,"_").concat(n).concat(!0===c?"":"_"+c)})),u=[o].concat(Object(L.a)(s)).join(" ");return Object(_e.jsx)("button",{className:u,style:i})}function ke(e){var t=e.isLocked,n=void 0!==t&&t,r=e.onDragUpdate,a=e.onDragEnd,i=void 0===a?function(){}:a,o=e.onDragAbort,s=void 0===o?function(){}:o,u=e.zIndex,l=void 0===u?1e4:u,d=Object(c.useRef)(),j=Object(c.useState)(null),b=Object(E.a)(j,2),f=b[0],h=b[1],m={height:"100%",position:"absolute",width:"100%",zIndex:l};function v(){!n&&f&&(h(null),s())}return Object(_e.jsx)("div",{style:m,"touch-action":"none",onPointerDown:function(e){return function(e){if(!n){var t=we(e,d);h(t),r(t,t)}}(e)},onPointerUp:function(e){!n&&f&&(h(null),i())},onPointerMove:function(e){return function(e){f&&r(f,we(e,d))}(e)},onPointerCancel:function(){return v()},onPointerLeave:function(){return v()},onPointerOut:function(){return v()},onLostPointerCapture:function(){return v()},ref:d})}function we(e,t){var n=t.current.getBoundingClientRect(),c=n.x,r=n.y,a=e.pageX,i=e.pageY,o=t.current;return{x:(a-c)/o.offsetWidth,y:(i-r)/o.offsetHeight}}function Se(e){var t=e.gridWidth,n=e.gridHeight,r=e.isLocked,a=e.onDragAbort,i=e.onDragEnd,o=e.onDragUpdate,s=Object(c.useState)(null),u=Object(E.a)(s,2),l=u[0],d=u[1];return Object(_e.jsx)(ke,{onDragAbort:function(){d(null),a()},onDragEnd:function(){d(null),i()},onDragUpdate:function(e,c){var r={x:e.x*t|0,y:e.y*n|0},a={x:c.x*t|0,y:c.y*n|0};l&&c.x===l.x&&c.y===l.y||(d(c),o(r,a))},isLocked:r})}function qe(e){var t=e.onClick,n=e.onMouseMove,r=void 0===n?function(){}:n,a=e.zIndex,i=void 0===a?1e4:a,o=Object(c.useRef)(),s={height:"100%",position:"absolute",width:"100%",zIndex:i};return Object(_e.jsx)("div",{onClick:function(e){t(Me(e,o))},onMouseMove:function(e){r(Me(e,o))},ref:o,style:s})}function Me(e,t){var n=t.current.getBoundingClientRect(),c=n.x,r=n.y,a=e.pageX,i=e.pageY,o=t.current;return{x:(a-c)/o.offsetWidth,y:(i-r)/o.offsetHeight}}function Ce(e){var t=e.gridWidth,n=e.gridHeight,r=e.onDragAbort,a=e.onDragEnd,i=e.onDragUpdate,o=e.isLocked,s=Object(c.useState)(null),u=Object(E.a)(s,2),l=u[0],d=u[1],j=Object(c.useState)(null),b=Object(E.a)(j,2),f=b[0],h=b[1];return Object(_e.jsx)(qe,{onClick:function(e){if(!o){var c={x:e.x*t|0,y:e.y*n|0};l?c.x===l.x&&c.y===l.y?(d(null),h(null),r()):(d(null),h(null),a()):(d(c),h(c),i(c,c))}},onMouseMove:function(e){if(!o&&l){var c={x:e.x*t|0,y:e.y*n|0};f&&c.x===f.x&&c.y===f.y||(h(c),i(l,c))}}})}function De(e){var t=e.isTutorial,n=void 0!==t&&t,c=ye((function(e){return{isBoardLocked:y(e),inputMode:q(e),match:e.match,resetSelection:e.resetSelection,updateSelection:e.updateSelection}})),r=c.isBoardLocked,a=c.inputMode,i=c.match,o=c.resetSelection,s=c.updateSelection,u=n?5:7,l=D()(0,7*u).map((function(e){return Object(_e.jsx)("div",{className:"board__square",children:Object(_e.jsx)(Ne,{index:e})},e)}));return Object(_e.jsxs)("div",{className:"board".concat(n?" board_tutorial":""),children:[a===X&&Object(_e.jsx)(Se,{gridWidth:7,gridHeight:u,onDragEnd:function(){return i()},onDragUpdate:function(e,t){return s(e,t)},onDragAbort:function(){return o()},isLocked:r}),a===V&&Object(_e.jsx)(Ce,{gridWidth:7,gridHeight:u,onDragEnd:function(){return i()},onDragUpdate:function(e,t){return s(e,t)},onDragAbort:function(){return o()},isLocked:r}),l]})}var He=n(13),Ae=n(40),Te=["children","onClick"];var We=function(e){var t=e.children,n=e.onClick,c=void 0===n?function(){}:n,r=Object(Ae.a)(e,Te);return Object(_e.jsx)(He.a,Object(R.a)(Object(R.a)({},r),{},{onClick:c,children:t||"Back"}))};var Ge=function(){var e=ye((function(e){return{highscore:e.highscore,hues:M(e),isGameActive:m(e),score:h(e),streakCount:O(e),streakType:v(e)}})),t=e.highscore,n=e.hues,c=e.isGameActive,r=e.score,a=e.streakCount,i=e.streakType;if(!c)return null;var o={filter:"hue-rotate(".concat(n[i],"deg)")};return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)("div",{className:"menu",children:Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)("div",{className:"stat",children:[Object(_e.jsx)("div",{className:"stat__title",children:"Score"}),Object(_e.jsx)("div",{className:"stat__value",children:r})]}),Object(_e.jsxs)("div",{className:"stat",children:[Object(_e.jsx)("div",{className:"stat__title",children:"Streak"}),a>0&&Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)("div",{className:"stat__square",children:Object(_e.jsx)("div",{className:"square square_type_".concat(i),style:o})}),Object(_e.jsx)("div",{className:"stat__value",children:a})]})]}),Object(_e.jsxs)("div",{className:"stat",children:[Object(_e.jsx)("div",{className:"stat__title",children:"Highscore"}),Object(_e.jsx)("div",{className:"stat__value",children:t})]})]})}),Object(_e.jsxs)("div",{className:"main-menu",children:[Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(We,{to:H})}),Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(He.a,{to:T,children:"Options"})})]})]})};var Le=function(){var e=ye((function(e){return{isActive:m(e),assureGame:e.assureGame,resetSelection:e.resetSelection}})),t=e.isActive,n=e.assureGame,r=e.resetSelection;return Object(c.useEffect)((function(){n(),r()}),[n,r]),t?Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(De,{}),Object(_e.jsx)(Ge,{})]}):null};var Ee=function(){var e=ye(M),t={filter:"hue-rotate(".concat(e[1],"deg)")},n=D()(0,49).map((function(e){return Object(_e.jsx)("div",{className:"board__square",children:Object(_e.jsx)("div",{className:"square square_type_1",style:t})},e)}));return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)("div",{className:"board board_title",children:[Object(_e.jsx)("div",{className:"board__title",children:"Quood"}),n]}),Object(_e.jsxs)("div",{className:"main-menu",children:[Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(He.a,{to:A,children:"Play"})}),Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(He.a,{to:G,children:"About"})}),Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(He.a,{to:W,children:"Tutorial"})})]})]})};var Ue=function(){var e=ye((function(e){return[e.endTutorial,N(e),e.resetSelection,e.startTutorial]})),t=Object(E.a)(e,4),n=t[0],r=t[1],a=t[2],i=t[3];return Object(c.useEffect)((function(){return i(),a(),n}),[n,a,i]),Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsx)(De,{isTutorial:!0}),Object(_e.jsx)("div",{className:"menu",children:Object(_e.jsx)("div",{className:"message",children:r})}),Object(_e.jsxs)("div",{className:"main-menu",children:[Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(We,{to:H})}),Object(_e.jsx)("div",{className:"main-menu__action main-menu__action_inactive"})]})]})};function Ie(e){var t=e.index,n=ye((function(e){return{changeHue:e.changeHue,hue:M(e)[t],inputMode:q(e)}})),c=n.changeHue,r=n.hue,a=n.inputMode,i={filter:"hue-rotate(".concat(r,"deg)")};return Object(_e.jsxs)("div",{className:"slider",children:[Object(_e.jsx)("div",{className:"slider__square",children:Object(_e.jsx)("div",{className:"square square_type_".concat(t),style:i})}),Object(_e.jsxs)("div",{className:"slider__bar-border",children:[a===X&&Object(_e.jsx)(ke,{onDragUpdate:function(e,n){c(t,360*n.x|0)}}),a===V&&Object(_e.jsx)(qe,{onClick:function(e){c(t,360*e.x|0)}}),Object(_e.jsx)("div",{className:"slider__bar",style:{width:"".concat(r/3.6,"%")}})]})]})}var Pe=function(){var e=ye((function(e){return{changeInputMode:e.changeInputMode,inputMode:q(e),startGame:e.startGame,resetHues:e.resetHues}})),t=e.changeInputMode,n=e.inputMode,c=e.startGame,r=e.resetHues,a=D()(0,3).map((function(e){return Object(_e.jsx)(Ie,{index:e},e)}));return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)("div",{className:"menu",children:[Object(_e.jsxs)("div",{className:"menu__block",children:[Object(_e.jsx)("div",{className:"options-headline",children:"Input Mode"}),Object(_e.jsx)("button",{className:"action",onClick:function(){return t()},children:n===X?"Touch":"Click"})]}),Object(_e.jsxs)("div",{className:"menu__block",children:[Object(_e.jsx)("div",{className:"options-headline",children:"Square Colors"}),a,Object(_e.jsx)("button",{className:"action",onClick:function(){return r()},children:"Reset"})]})]}),Object(_e.jsxs)("div",{className:"main-menu",children:[Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(We,{to:A})}),Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(We,{to:A,onClick:function(){return c()},children:"Restart"})})]})]})};var Re=function(){return Object(_e.jsxs)(_e.Fragment,{children:[Object(_e.jsxs)("div",{className:"menu",children:[Object(_e.jsxs)("div",{className:"menu__block",children:[Object(_e.jsx)("div",{className:"message",children:"Quood Version 2.0.0"}),Object(_e.jsx)("div",{className:"message",children:"By Rebecca K\xf6nig"})]}),Object(_e.jsx)("div",{className:"menu__block",children:Object(_e.jsx)("div",{className:"message",children:Object(_e.jsx)("a",{href:"https://github.com/veu/rquood",children:"Source Code"})})})]}),Object(_e.jsxs)("div",{className:"main-menu",children:[Object(_e.jsx)("div",{className:"main-menu__action",children:Object(_e.jsx)(We,{to:H})}),Object(_e.jsx)("div",{className:"main-menu__action main-menu__action_inactive"})]})]})},Fe=Object(s.b)();i.a.render(Object(_e.jsx)(r.a.StrictMode,{children:Object(_e.jsx)(o.b,{history:Fe,children:Object(_e.jsxs)(o.c,{children:[Object(_e.jsx)(o.a,{exact:!0,path:H,render:function(){return Object(_e.jsx)(Ee,{})}}),Object(_e.jsx)(o.a,{exact:!0,path:A,render:function(){return Object(_e.jsx)(Le,{})}}),Object(_e.jsx)(o.a,{exact:!0,path:W,render:function(){return Object(_e.jsx)(Ue,{})}}),Object(_e.jsx)(o.a,{exact:!0,path:T,render:function(){return Object(_e.jsx)(Pe,{})}}),Object(_e.jsx)(o.a,{exact:!0,path:G,render:function(){return Object(_e.jsx)(Re,{})}})]})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");u?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):l(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):l(t,e)}))}}()}},[[74,1,2]]]);
//# sourceMappingURL=main.5b1d5db4.chunk.js.map