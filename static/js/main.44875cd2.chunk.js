(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,n,t){"use strict";t.r(n);var r=t(9),a=t(0),o=t.n(a),c=t(39),u=t.n(c),i=t(25),l=t(3),s=t(63),d=t(59),f=t.n(d),b=t(7),v=t(57),m=t(26),k=t(32);t(77),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=t(41),h=t(21),p=t(109),g={board:null,bucket:[],score:0,streak:null},E=Object(p.a)({START_GAME:function(e,n){var t=n.payload.board;return Object(r.a)({},g,{board:t})},REPLACE_SQUARES:function(e,n){var t=n.payload,r=t.indexes,a=t.values,o=t.size,c=t.bucket,u=Object(h.a)(e.board),i=u[r[0]],l=!0,s=!1,d=void 0;try{for(var f,b=r[Symbol.iterator]();!(l=(f=b.next()).done);l=!0){u[f.value]=a.pop()}}catch(m){s=!0,d=m}finally{try{l||null==b.return||b.return()}finally{if(s)throw d}}var v=e.streak&&e.streak.type===i?e.streak.count+1:1;return{board:u,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:i}}}},null),j=Object(p.a)({UPDATE_HIGHSCORE:function(e,n){var t=n.payload.score;return Math.max(e,t)}},0),y=7,x=5,A=7,S=3,T="/play",R="/options",C="/tutorial",w=navigator.userAgent.includes("KAIOS"),M="SoftLeft",_="SoftRight",D="TOUCH",L="CLICK",U=Array(S).fill(0),I={hues:U,inputMode:w?L:D},P=Object(p.a)({CHANGE_HUE:function(e,n){var t=n.payload,a=t.index,o=t.hue,c=Object(h.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:U})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:e.inputMode===L?D:L})}},I),H=t(27),B=t.n(H),q=t(50),N=t.n(q),G=t(24),z=t.n(G),Q=t(60),W=t.n(Q),F=B()(function(e,n,t){return function(e,n){var t=e.x,r=e.y;return{x:t+n.x,y:r+n.y}}(function e(n,t){var r=n.x,a=n.y;return t?e({x:a,y:-r},t-1):{x:r,y:a}}(function(e,n){var t=e.x,r=e.y;return{x:t-n.x,y:r-n.y}}(n,e),t),e)}),V={squares:[],size:0,hidden:!1},Y=Object(p.a)({START_GAME:function(){return V},UPDATE_SELECTION:function(e,n){var t=n.payload,r=t.board,a=t.start,o=t.end,c=J(r,a,o);return N()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return V},HIDE_SELECTION:function(e){return e.squares.length<4?V:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return V},ADVANCE_TUTORIAL:function(){return V}},V),J=function(e,n,t){return Object(r.a)({},V,{size:function(e,n){var t=e.x,r=e.y,a=n.x,o=n.y;return Math.hypot(t-a,r-o)}(n,t),squares:W()(z()(0,4).map(F(function(e,n,t){var r=e.x,a=e.y;return{x:r*t+n.x*(1-t),y:a*t+n.y*(1-t)}}(n,t,.5),n)).filter(X(e)).filter(ee(e)).filter(Z(e,$(e,n))).map(K))})},K=B()(function(e){return e.x+e.y*A}),X=B()(function(e,n){var t=n.x,r=n.y;return 0<=t&&t<A&&t%1===0&&0<=r&&r<e.length/A&&r%1===0}),$=function(e,n){return e[K(n)]},Z=B()(function(e,n,t){return $(e,t)===n}),ee=B()(function(e,n){return $(e,n)<S}),ne={board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game won\u2019t tell you when there aren\u2019t any squares left to remove.\n         You have to call it quits.\n         Enjoy!"],step:0},te=Object(p.a)({START_TUTORIAL:function(e){return Object(r.a)({},e,{step:0})},ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},ne);function re(e){return e.selection||(e=Object(r.a)({},e,{selection:V,tutorial:ne})),e.options.inputMode||(e.options.inputMode=D),e}var ae=t(13),oe=t.n(ae),ce=t(14),ue=t(62),ie=t.n(ue),le=t(5),se=t(108),de=Object(se.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,n,t,r){return{indexes:e,values:n,size:t,bucket:r}},UPDATE_SELECTION:function(e,n,t){return{board:e,start:n,end:t}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},START_TUTORIAL:function(){return{}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,n){return{index:e,hue:n}},RESET_HUES:function(){return{}}}),fe=de.requestAssureGame,be=de.requestStartGame,ve=de.startGame,me=de.replaceSquares,ke=de.updateSelection,Oe=de.discardSelection,he=de.hideSelection,pe=de.updateHighscore,ge=de.startTutorial,Ee=de.advanceTutorial,je=de.changeInputMode,ye=de.changeHue,xe=de.resetHues,Ae=t(17),Se=function(e){return e.selection},Te=function(e){return e.game&&e.game.streak},Re=function(e){return e.router.location.pathname===C?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},Ce=function(e){return e.game&&e.game.bucket},we=function(e){return e.game&&e.game.score},Me=function(e){return e.highscore},_e=Object(Ae.a)(function(e){return!!function(e){return e.game}(e)},function(e){return e}),De=Object(Ae.a)(Te,function(e){return e&&e.type}),Le=Object(Ae.a)(Te,function(e){return e&&e.count}),Ue=Object(Ae.a)(Se,function(e){return e.squares}),Ie=Object(Ae.a)(Se,function(e){return e.size}),Pe=Object(Ae.a)(Se,function(e){return e.hidden}),He=Object(Ae.a)(Pe,function(e){return e}),Be=function(e){return Object(Ae.a)(Re,Ue,Pe,function(n,t,r){var a=t.includes(e);return{type:n&&n[e],active:a,inactive:t.length>0&&!a,hidden:r&&a,ready:4===t.length&&a}})},qe=function(e){return e.router.location.pathname===C},Ne=function(e){return e.tutorial.message[e.tutorial.step]},Ge=function(e){return e.options},ze=Object(Ae.a)(Ge,function(e){return e.inputMode}),Qe=Object(Ae.a)(Ge,function(e){return e.hues}),We=oe.a.mark($e),Fe=oe.a.mark(Ze),Ve=oe.a.mark(en),Ye=oe.a.mark(nn),Je=oe.a.mark(tn),Ke=oe.a.mark(rn);function Xe(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(h.a)(Array(n)).reduce(function(e){var n=Object(ce.a)(e,2),o=n[0],c=n[1];0===(c=Object(h.a)(c)).length&&(c=Object(h.a)(Array((r-t)*a)).map(function(e,n){return n%(r-t)+t}));var u=Math.random()*c.length|0,i=c.splice(u,1)[0];return[Object(h.a)(o).concat([i]),c]},[[],e])}function $e(){var e,n,t,r,a;return oe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(le.c)();case 2:if(e=o.sent,Pe(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(le.a)(ie.a,500);case 7:if(!qe(e)){o.next=11;break}return o.next=10,Object(le.b)(Ee());case 10:return o.abrupt("return");case 11:return n=Xe(Ce(e),4),t=Object(ce.a)(n,2),r=t[0],a=t[1],o.next=14,Object(le.b)(me(Ue(e),r,Ie(e),a));case 14:case"end":return o.stop()}},We,this)}function Ze(){var e;return oe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(le.c)();case 2:return e=n.sent,n.next=5,Object(le.b)(pe(we(e)));case 5:case"end":return n.stop()}},Fe,this)}function en(){var e,n,t;return oe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=Xe([],y*A),n=Object(ce.a)(e,1),t=n[0],r.next=3,Object(le.b)(ve(t));case 3:case"end":return r.stop()}},Ve,this)}function nn(){var e,n,t,r;return oe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(le.c)();case 2:if(e=a.sent,_e(e)){a.next=7;break}return n=Xe([],y*A),t=Object(ce.a)(n,1),r=t[0],a.next=7,Object(le.b)(ve(r));case 7:case"end":return a.stop()}},Ye,this)}function tn(e){return oe.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.payload.location.pathname!==C){n.next=4;break}return n.next=4,Object(le.b)(ge());case 4:return n.next=6,Object(le.b)(Oe());case 6:case"end":return n.stop()}},Je,this)}function rn(){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(le.d)("HIDE_SELECTION",$e);case 2:return e.next=4,Object(le.d)("REPLACE_SQUARES",Ze);case 4:return e.next=6,Object(le.d)("REQUEST_ASSURE_GAME",nn);case 6:return e.next=8,Object(le.d)("REQUEST_START_GAME",en);case 8:return e.next=10,Object(le.d)("@@router/LOCATION_CHANGE",tn);case 10:case"end":return e.stop()}},Ke,this)}var an=t(12).checkBEMProps;function on(e){var n=e.index,t=Object(l.e)(Be(n)),r=Object(l.e)(Qe),a={filter:"hue-rotate(".concat(r[t.type],"deg)")};return an(o.a,"button",{block:"square",mods:t,style:a})}var cn=t(12).checkBEMProps;function un(e){var n=e.isLocked,t=void 0!==n&&n,r=e.onDragUpdate,c=e.onDragEnd,u=void 0===c?function(){}:c,i=e.onDragAbort,l=void 0===i?function(){}:i,s=e.zIndex,d=void 0===s?1e4:s,f=Object(a.useRef)(),b=Object(a.useState)(null),v=Object(ce.a)(b,2),m=v[0],k=v[1],O={height:"100%",position:"absolute",width:"100%",zIndex:d};function h(){!t&&m&&(k(null),l())}return cn(o.a,"div",{style:O,"touch-action":"none",onPointerDown:function(e){return function(e){if(!t){var n=ln(e,f);k(n),r(n,n)}}(e)},onPointerUp:function(e){!t&&m&&(k(null),u())},onPointerMove:function(e){return function(e){m&&r(m,ln(e,f))}(e)},onPointerCancel:function(){return h()},onPointerLeave:function(){return h()},onPointerOut:function(){return h()},onLostPointerCapture:function(){return h()},ref:f})}function ln(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,u=n.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var sn=t(12).checkBEMProps;function dn(e){var n=e.gridWidth,t=e.gridHeight,r=e.isLocked,c=e.onDragAbort,u=e.onDragEnd,i=e.onDragUpdate,l=Object(a.useState)(null),s=Object(ce.a)(l,2),d=s[0],f=s[1];return sn(o.a,un,{onDragAbort:function(){f(null),c()},onDragEnd:function(){f(null),u()},onDragUpdate:function(e,r){var a={x:e.x*n|0,y:e.y*t|0},o={x:r.x*n|0,y:r.y*t|0};d&&r.x===d.x&&r.y===d.y||(f(r),i(a,o))},isLocked:r})}var fn=t(12).checkBEMProps;function bn(e){var n=e.onClick,t=e.onMouseMove,r=void 0===t?function(){}:t,c=e.zIndex,u=void 0===c?1e4:c,i=Object(a.useRef)(),l={height:"100%",position:"absolute",width:"100%",zIndex:u};return fn(o.a,"div",{onClick:function(e){n(vn(e,i))},onMouseMove:function(e){r(vn(e,i))},ref:i,style:l})}function vn(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,u=n.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var mn=t(12).checkBEMProps;function kn(e){var n=e.gridWidth,t=e.gridHeight,r=e.onDragAbort,c=e.onDragEnd,u=e.onDragUpdate,i=e.isLocked,l=Object(a.useState)(null),s=Object(ce.a)(l,2),d=s[0],f=s[1],b=Object(a.useState)(null),v=Object(ce.a)(b,2),m=v[0],k=v[1];return mn(o.a,bn,{onClick:function(e){if(!i){var a={x:e.x*n|0,y:e.y*t|0};d?a.x===d.x&&a.y===d.y?(f(null),k(null),r()):(f(null),k(null),c()):(f(a),k(a),u(a,a))}},onMouseMove:function(e){if(!i&&d){var r={x:e.x*n|0,y:e.y*t|0};m&&r.x===m.x&&r.y===m.y||(k(r),u(d,r))}}})}var On=t(12).checkBEMProps;function hn(e){var n=e.isTutorial,t=void 0!==n&&n,r=Object(l.e)(Re),a=Object(l.e)(He),c=Object(l.e)(ze),u=Object(l.d)(),i=t?x:y,s=z()(0,i*A).map(function(e){return On(o.a,"div",{block:"board",elem:"square",key:e},On(o.a,on,{index:e}))});return On(o.a,"div",{block:"board",mods:{tutorial:t}},c===D&&On(o.a,dn,{gridWidth:A,gridHeight:i,onDragEnd:function(){return u(he())},onDragUpdate:function(e,n){return u(ke(r,e,n))},onDragAbort:function(){return u(Oe())},isLocked:a}),c===L&&On(o.a,kn,{gridWidth:A,gridHeight:i,onDragEnd:function(){return u(he())},onDragUpdate:function(e,n){return u(ke(r,e,n))},onDragAbort:function(){return u(Oe())},isLocked:a}),s)}var pn=t(36),gn=t(8);function En(){var e=Object(a.useRef)(),n=Object(a.useRef)();return Object(a.useEffect)(function(){return window.onkeydown=function(t){t.key===M&&e.current.click(),t.key===_&&n.current.click()},function(){window.onkeydown=null}}),{refLeft:e,refRight:n}}var jn=t(12).checkBEMProps;var yn=Object(l.c)(null,{goBack:gn.c})(function(e){var n=e.goBack,t=En(),r=t.refLeft,a=t.refRight;if(!Object(l.e)(_e))return null;var c=Object(l.e)(Me),u=Object(l.e)(we),i=Object(l.e)(Le),s=Object(l.e)(De);return jn(o.a,o.a.Fragment,null,jn(o.a,"div",{block:"menu"},jn(o.a,o.a.Fragment,null,jn(o.a,"div",{block:"stat"},jn(o.a,"div",{block:"stat",elem:"title"},"Score"),jn(o.a,"div",{block:"stat",elem:"value"},u)),jn(o.a,"div",{block:"stat"},jn(o.a,"div",{block:"stat",elem:"title"},"Streak"),jn(o.a,"div",{block:"stat",elem:"square"},jn(o.a,"div",{block:"square",mods:{type:s}})),jn(o.a,"div",{block:"stat",elem:"value"},i)),jn(o.a,"div",{block:"stat"},jn(o.a,"div",{block:"stat",elem:"title"},"Highscore"),jn(o.a,"div",{block:"stat",elem:"value"},c)))),jn(o.a,"div",{block:"main-menu"},jn(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){return n()},ref:r},"Back"),jn(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),jn(o.a,"div",{block:"main-menu",elem:"action"},jn(o.a,pn.a,{to:R,innerRef:a},"Options"))))}),xn=t(12).checkBEMProps;var An=function(){var e=Object(l.d)(),n=Object(l.e)(_e);return Object(a.useEffect)(function(){e(fe())}),n?xn(o.a,o.a.Fragment,null,xn(o.a,hn,null),xn(o.a,yn,null)):null},Sn=t(12).checkBEMProps;var Tn=function(){var e=En(),n=e.refLeft,t=e.refRight,r=z()(0,y*A).map(function(e){return Sn(o.a,"div",{block:"board",elem:"square",key:e},Sn(o.a,"div",{block:"square",mods:{type:1}}))});return Sn(o.a,o.a.Fragment,null,Sn(o.a,"div",{block:"board",mods:{title:!0}},Sn(o.a,"div",{block:"board",elem:"title"},"Quood"),r),Sn(o.a,"div",{block:"main-menu"},Sn(o.a,"div",{block:"main-menu",elem:"action"},Sn(o.a,pn.a,{to:T,innerRef:n},"Play")),Sn(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),Sn(o.a,"div",{block:"main-menu",elem:"action"},Sn(o.a,pn.a,{to:C,innerRef:t},"Tutorial"))))},Rn=t(12).checkBEMProps;var Cn=Object(l.c)(null,{goBack:gn.c})(function(e){var n=e.goBack,t=En().refLeft,r=Object(l.e)(Ne);return Rn(o.a,o.a.Fragment,null,Rn(o.a,hn,{isTutorial:!0}),Rn(o.a,"div",{block:"menu"},Rn(o.a,"div",{block:"message"},r)),Rn(o.a,"div",{block:"main-menu"},Rn(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){return n()},ref:t},"Back"),Rn(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),Rn(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!0}})))}),wn=t(12).checkBEMProps;function Mn(e){var n=e.index,t=Object(l.e)(Qe)[n],r=Object(l.d)(),a=Object(l.e)(ze),c={filter:"hue-rotate(".concat(t,"deg)")};return wn(o.a,"div",{block:"slider"},wn(o.a,"div",{block:"slider",elem:"square"},wn(o.a,"div",{block:"square",mods:{type:n},style:c})),wn(o.a,"div",{block:"slider",elem:"bar-border"},a===D&&wn(o.a,un,{onDragUpdate:function(e,t){r(ye(n,360*t.x|0))}}),a===L&&wn(o.a,bn,{onClick:function(e){r(ye(n,360*e.x|0))}}),wn(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(t/3.6,"%")}})))}var _n=t(12).checkBEMProps;var Dn=Object(l.c)(null,{goBack:gn.c})(function(e){var n=e.goBack,t=En(),r=t.refLeft,a=t.refRight,c=Object(l.e)(ze),u=z()(0,S).map(function(e){return _n(o.a,Mn,{key:e,index:e})}),i=Object(l.d)();return _n(o.a,o.a.Fragment,null,_n(o.a,"div",{block:"menu"},!w&&_n(o.a,"div",{block:"menu",elem:"block"},_n(o.a,"div",{block:"options-headline"},"Input Mode"),_n(o.a,"button",{block:"action",onClick:function(){return i(je())}},c===D?"Touch":"Click")),_n(o.a,"div",{block:"menu",elem:"block"},_n(o.a,"div",{block:"options-headline"},"Square Colors"),u,_n(o.a,"button",{block:"action",onClick:function(){return i(xe())}},"Reset"))),_n(o.a,"div",{block:"main-menu"},_n(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){return n()},ref:r},"Back"),_n(o.a,"div",{block:"main-menu",elem:"action",mods:{inactive:!w}},"SELECT"),_n(o.a,"div",{block:"main-menu",elem:"action",onClick:function(){i(be()),n()},ref:a},"Restart")))});var Ln,Un=Object(s.a)(),In=Object(k.b)(),Pn=Object(i.e)((Ln=In,Object(O.a)(Object(i.c)({router:Object(m.b)(Ln),game:E,tutorial:te,highscore:j,selection:Y,options:P}),re)),Object(i.d)(f()("",{slicer:function(e){return function(e){var n=Object(r.a)({},e);return delete n.selection,delete n.tutorial,n}},key:"quood"}),Object(i.a)(Object(v.a)(In),Un)));Un.run(rn);var Hn=t(12).checkBEMProps;u.a.render(Hn(o.a,l.a,{store:Pn},Hn(o.a,m.a,{history:In},Hn(o.a,b.c,null,Hn(o.a,b.a,{exact:!0,path:"/",render:function(){return Hn(o.a,Tn,null)}}),Hn(o.a,b.a,{exact:!0,path:T,render:function(){return Hn(o.a,An,null)}}),Hn(o.a,b.a,{exact:!0,path:C,render:function(){return Hn(o.a,Cn,null)}}),Hn(o.a,b.a,{exact:!0,path:R,render:function(){return Hn(o.a,Dn,null)}})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,n,t){e.exports=t(107)},77:function(e,n,t){}},[[64,1,2]]]);
//# sourceMappingURL=main.44875cd2.chunk.js.map