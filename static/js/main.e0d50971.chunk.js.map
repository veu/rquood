{"version":3,"sources":["serviceWorker.js","state/selectors.js","config.js","state/reducers/tutorial.js","state/reducers/game.js","state/reducers/options.js","vectors.js","state/reducers/selection.js","state/store.js","state/reducers/highscore.js","components/Square.js","components/DraggingOverlay.js","components/GridDraggingOverlay.js","components/ClickOverlay.js","components/GridClickOverlay.js","components/Board.js","components/BackLink.js","components/Menu.js","components/Game.js","components/Title.js","components/Tutorial.js","components/HueSlider.js","components/Options.js","index.js"],"names":["Boolean","window","location","hostname","match","getSelection","state","selection","getStreak","game","streak","getBoard","board","getScore","score","isGameActive","createSelector","getGame","active","getStreakType","type","getStreakCount","count","getSelectedSquares","squares","getSelectionSize","size","isSelectionHidden","hidden","isBoardLocked","getSquare","isTutorial","index","getTutorialBoard","gameBoard","tutorialBoard","includes","inactive","length","ready","getTutorialMessage","tutorial","message","step","getOptions","options","getInputMode","inputMode","getHues","hues","GAME_URL","OPTIONS_URL","TUTORIAL_URL","defaultTutorial","defaultGame","bucket","INPUT_MODE_TOUCH","INPUT_MODE_CLICK","defaultHues","Array","fill","defaultOptions","tween","r","x","y","rotate90","times","rotate90Around","curry","center","v","add","sub","distance","x2","y2","Math","hypot","defaultSelection","toIndex","isValid","getType","typeEquals","isValidType","createSelectionSlice","set","resetSelection","produce","updateSelection","start","end","newSelection","uniq","range","map","filter","equals","hideSelection","getRandom","min","max","reduce","values","_","random","value","splice","persist","configurePersist","storage","localStorage","useStore","create","devtools","key","allowlist","get","highscore","updateHighscore","createHighscoreSlice","startTutorial","advanceTutorial","createTutorialSlice","initGame","replaceSquares","indexes","pop","streakCount","createGameSlice","changeHue","hue","resetHues","changeInputMode","createOptionsSlice","a","delay","assureGame","BOARD_HEIGHT","startGame","Square","square","style","block","mods","Object","entries","name","val","className","join","DraggingOverlay","isLocked","onDragUpdate","onDragEnd","onDragAbort","zIndex","ref","useRef","useState","dragStart","setDragStart","height","position","width","abortDragging","onPointerDown","event","getPosition","startDragging","onPointerUp","onPointerMove","updatePosition","onPointerCancel","onPointerLeave","onPointerOut","onLostPointerCapture","current","getBoundingClientRect","offsetX","offsetY","pageX","pageY","offsetWidth","offsetHeight","GridDraggingOverlay","gridWidth","gridHeight","lastEnd","setLastEnd","gridStart","gridEnd","ClickOverlay","onClick","onMouseMove","GridClickOverlay","setStart","setEnd","gridPosition","Board","discardSelection","getIsBoardLocked","BackLink","children","props","Menu","getIsGameActive","streakType","to","Game","isActive","useEffect","Title","squareStyle","Tutorial","HueSlider","pos","Options","sliders","history","createHashHistory","ReactDOM","render","exact","path","document","getElementById","navigator","serviceWorker","then","registration","unregister"],"mappings":"yLAYoBA,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2D,YChBAC,EAAe,SAACC,GAAD,OAAWA,EAAMC,WAChCC,EAAY,SAACF,GAAD,OAAWA,EAAMG,MAAQH,EAAMG,KAAKC,QAGzCC,EAAW,SAACL,GACvB,OAAOA,EAAMG,MAAQH,EAAMG,KAAKG,OAGrBC,EAAW,SAACP,GAAD,OAAWA,EAAMG,MAAQH,EAAMG,KAAKK,OAK/CC,EAAeC,aAC1B,SAACV,GAAD,QAXqB,SAACA,GAAD,OAAWA,EAAMG,KAWzBQ,CAAQX,MACrB,SAACY,GAAD,OAAYA,KAKDC,EAAgBH,YAC3BR,GACA,SAACE,GAAD,OAAYA,GAAUA,EAAOU,QAGlBC,EAAiBL,YAC5BR,GACA,SAACE,GAAD,OAAYA,GAAUA,EAAOY,SAKlBC,EAAqBP,YAChCX,GACA,SAACE,GAAD,OAAeA,EAAUiB,WAGdC,EAAmBT,YAC9BX,GACA,SAACE,GAAD,OAAeA,EAAUmB,QAGdC,EAAoBX,YAC/BX,GACA,SAACE,GAAD,OAAeA,EAAUqB,UAGdC,EAAgBb,YAC3BW,GACA,SAACC,GAAD,OAAYA,KAGDE,EAAY,SAACC,EAAYC,GAAb,OACvBhB,YACEL,EACAsB,EACAV,EACAI,GACA,SAACO,EAAWC,EAAeX,EAASI,GAClC,IAAMV,EAASM,EAAQY,SAASJ,GAC1BpB,EAAQmB,EAAaI,EAAgBD,EAE3C,MAAO,CACLd,KAAMR,GAASA,EAAMoB,GACrBd,SACAmB,SAAUb,EAAQc,OAAS,IAAMpB,EACjCU,OAAQA,GAAUV,EAClBqB,MAA0B,IAAnBf,EAAQc,QAAgBpB,OAO1BsB,EAAqB,SAAClC,GAAD,OAChCA,EAAMmC,SAASC,QAAQpC,EAAMmC,SAASE,OAE3BV,EAAmB,SAAC3B,GAAD,OAC9BA,EAAMmC,SAAS7B,MAAMN,EAAMmC,SAASE,OAIhCC,EAAa,SAACtC,GAAD,OAAWA,EAAMuC,SAEvBC,EAAe9B,YAC1B4B,GACA,SAACC,GAAD,OAAaA,EAAQE,aAGVC,EAAUhC,YAAe4B,GAAY,SAACC,GAAD,OAAaA,EAAQI,Q,iBCpF1DC,EAAW,QACXC,EAAc,WACdC,EAAe,Y,uECPfC,EAAkB,CAC7BzC,MAAO,CACL,CACE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE7B,CACE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE7B,CACE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxE,EAAG,EAAG,EAEN,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAEpB,CACE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IAG/B8B,QAAS,CAAC,oHAAD,2TASTC,KAAM,G,gBC7BFW,EAAc,CAClB1C,MAAO,KACP2C,OAAQ,GACRzC,MAAO,EACPJ,OAAQ,MCJG8C,EAAmB,QACnBC,EAAmB,QAEnBC,EAAcC,MHFC,GGEmBC,KAAK,GAEvCC,EAAiB,CAC5BZ,KAAMS,EACNX,UAAWS,G,mDCJAM,GAAQ,SAAC,EAAD,EAA6BC,GAA7B,IAAGC,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAN,MAAoC,CACvDD,EAAGA,EAAID,EADY,EAAaC,GACf,EAAID,GACrBE,EAAGA,EAAIF,EAFY,EAAoBE,GAEtB,EAAIF,KAGVG,GAAW,SAAXA,EAAY,EAAUC,GAAX,IAAGH,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAN,OACtBE,EAAQD,EAAS,CAAEF,EAAGC,EAAGA,GAAID,GAAKG,EAAQ,GAAK,CAAEH,IAAGC,MAEzCG,GAAiBC,KAAM,SAACC,EAAQC,EAAGJ,GAAZ,OAZjB,SAAC,EAAD,OAAGH,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAN,MAAiC,CAAED,EAAGA,EAAtC,EAAaA,EAAiCC,EAAGA,EAAjD,EAAoBA,GAarCO,CAAIN,GAXa,SAAC,EAAD,OAAGF,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAN,MAAiC,CAAED,EAAGA,EAAtC,EAAaA,EAAiCC,EAAGA,EAAjD,EAAoBA,GAWxBQ,CAAIF,EAAGD,GAASH,GAAQG,MAG1BI,GAAW,SAAC,EAAD,OAAGV,EAAH,EAAGA,EAAGC,EAAN,EAAMA,EAAUU,EAAhB,EAAaX,EAAUY,EAAvB,EAAoBX,EAApB,OACtBY,KAAKC,MAAMd,EAAIW,EAAIV,EAAIW,ICVZG,GAAmB,CAC9BvD,QAAS,GACTE,KAAM,EACNE,QAAQ,GAgBJoD,GAAUX,KAAM,qBAAGL,ELzBE,EKyBL,EAAMC,KACtBgB,GAAUZ,KACd,SAACzD,EAAD,OAAUoD,EAAV,EAAUA,EAAGC,EAAb,EAAaA,EAAb,OACE,GAAKD,GACLA,EL7BuB,GK8BvBA,EAAI,IAAM,GACV,GAAKC,GACLA,EAAIrD,EAAM0B,OLhCa,GKiCvB2B,EAAI,IAAM,KAERiB,GAAU,SAACtE,EAAO2D,GAAR,OAAc3D,EAAMoE,GAAQT,KACtCY,GAAad,KAAM,SAACzD,EAAOQ,EAAMmD,GAAd,OAAoBW,GAAQtE,EAAO2D,KAAOnD,KAC7DgE,GAAcf,KAAM,SAACzD,EAAO2D,GAAR,OAAcW,GAAQtE,EAAO2D,GLpC3B,KKsCfc,GAAuB,SAACC,GAAD,MAAU,CAC5C/E,UAAWwE,GACXQ,eAAgB,kBACdD,EACEE,aAAQ,SAAClF,GACPA,EAAMC,UAAYwE,QAGxBU,gBAAiB,SAACC,EAAOC,GAAR,OACfL,EACEE,aAAQ,SAAClF,GACP,IAAMsF,EAtCO,SAAChF,EAAO8E,EAAOC,GAAf,mBAAC,eACjBZ,IADgB,IAEnBrD,KAAMgD,GAASgB,EAAOC,GACtBnE,QAASqE,IACPC,IAAM,EAAG,GACNC,IAAI3B,GAAeN,GAAM4B,EAAOC,EAAK,IAAMD,IAC3CM,OAAOf,GAAQrE,IACfoF,OAAOZ,GAAYxE,IACnBoF,OAAOb,GAAWvE,EAAOsE,GAAQtE,EAAO8E,KACxCK,IAAIf,OA6BkB3E,CAAaM,EAASL,GAAQoF,EAAOC,GAErDM,IAAOL,EAAapE,QAASlB,EAAMC,UAAUiB,WAChDlB,EAAMC,UAAYqF,QAI1BM,cAAe,kBACbZ,EACEE,aAAQ,SAAClF,GACHA,EAAMC,UAAUiB,QAAQc,OAAS,EACnChC,EAAMC,UAAYwE,GAElBzE,EAAMC,UAAUqB,QAAS,S,6BCtDnC,SAASuE,GAAU5C,EAAQjC,GAAoC,IAA7B8E,EAA4B,uDAAtB,EAAGC,EAAmB,uDAAb,EAAG3E,EAAU,uDAAH,EACzD,OAAO,YAAIiC,MAAMrC,IAAQgF,QACvB,YAAuB,IAAD,mBAApBC,EAAoB,KAAZhD,EAAY,KAGE,KAFtBA,EAAM,YAAOA,IAEFjB,SACTiB,EAAS,YAAII,OAAO0C,EAAMD,GAAO1E,IAAOqE,KAAI,SAACS,EAAGxE,GAC9C,OAAQA,GAASqE,EAAMD,GAAQA,MAInC,IAAMpE,EAAS6C,KAAK4B,SAAWlD,EAAOjB,OAAU,EAC1CoE,EAAQnD,EAAOoD,OAAO3E,EAAO,GAAG,GAEtC,MAAO,CAAC,GAAD,mBAAKuE,GAAL,CAAaG,IAAQnD,KAE9B,CAAC,GAAIA,IAIT,IAAQqD,GAAYC,4BAAiB,CACnCC,QAASC,eADHH,QAIKI,GAAWC,IACtBC,mBACEN,GACE,CAAEO,IAAK,QAASC,UAAW,CAAC,OAAQ,YAAa,aACjD,SAAC9B,EAAK+B,GAAN,mBAAC,+DCrC6B,SAAC/B,GAAD,MAAU,CAC5CgC,UAAW,EACXC,gBAAiB,kBACfjC,EACEE,aAAQ,SAAClF,GACPA,EAAMgH,UAAYzC,KAAKwB,IAAI/F,EAAMgH,UAAWzG,EAASP,UDiClDkH,CAAqBlC,ILNG,SAACA,GAAD,MAAU,CAC3C7C,SAAUY,EACVoE,cAAe,kBACbnC,EACEE,aAAQ,SAAClF,GACPA,EAAMmC,SAASE,KAAO,OAG5B+E,gBAAiB,kBACfpC,EACEE,aAAQ,SAAClF,GACPA,EAAMmC,SAASE,MAAQ,QKJpBgF,CAAoBrC,IJhCA,SAACA,GAAD,MAAU,CACvC7E,KAAM,KACNmH,SAAU,SAAChH,GAAD,OACR0E,EACEE,aAAQ,SAAClF,GACPA,EAAMG,KAAN,2BAAkB6C,GAAlB,IAA+B1C,eAGrCiH,eAAgB,SAACtB,EAAQhD,GAAT,OACd+B,EACEE,aAAQ,SAAClF,GACP,IADiB,EACXwH,EAAUvG,EAAmBjB,GAC7BoB,EAAOD,EAAiBnB,GACxBc,EAAOd,EAAMG,KAAKG,MAAMkH,EAAQ,IAHrB,cAKGA,GALH,IAKjB,2BAA6B,CAAC,IAAnB9F,EAAkB,QAC3B1B,EAAMG,KAAKG,MAAMoB,GAASuE,EAAOwB,OANlB,8BASjB,IAAMC,EACJ1H,EAAMG,KAAKC,QAAUJ,EAAMG,KAAKC,OAAOU,OAASA,EAC5Cd,EAAMG,KAAKC,OAAOY,MAAQ,EAC1B,EACNhB,EAAMG,KAAKK,MAAQR,EAAMG,KAAKK,OAAgB,EAAPY,GAAYsG,EACnD1H,EAAMG,KAAKC,OAAS,CAClBY,MAAO0G,EACP5G,QAEFd,EAAMG,KAAK8C,OAASA,QIKjB0E,CAAgB3C,IH9BO,SAACA,GAAD,MAAU,CAC1CzC,QAASgB,EACTqE,UAAW,SAAClG,EAAOmG,GAAR,OACT7C,EACEE,aAAQ,SAAClF,GACP,IAAM2C,EAAI,YAAO3C,EAAMuC,QAAQI,MAC/BA,EAAKjB,GAASmG,EAEd7H,EAAMuC,QAAQI,KAAOA,OAG3BmF,UAAW,kBACT9C,EACEE,aAAQ,SAAClF,GACPA,EAAMuC,QAAQI,KAAOS,OAG3B2E,gBAAiB,kBACf/C,EACEE,aAAQ,SAAClF,GACPA,EAAMuC,QAAQE,UACZzC,EAAMuC,QAAQE,YAAcU,EACxBD,EACAC,QGQH6E,CAAmBhD,IACnBD,GAAqBC,IAL1B,IAMElF,MAAM,WAAD,4BAAE,WAAO2B,GAAP,qBAAAwG,EAAA,6DACLlB,IAAMnB,gBADD,SAGCsC,KAAM,GAHP,UAKA7G,EAAkB0F,KALlB,iEASCmB,KAAM,KATP,WAWDzG,EAXC,iBAYHsF,IAAMK,kBAZH,iCAcsBvB,IPnDX7F,EOmD+B+G,KPnDf5G,MAAQH,EAAMG,KAAK8C,OOmDI,GAdlD,mBAcIgD,EAdJ,KAcYhD,EAdZ,KAgBH8D,IAAMQ,eAAetB,EAAQhD,GAhB1B,UAkBGiF,KAAM,GAlBT,QAoBHnB,IAAME,kBApBH,QAuBLF,IAAM9B,iBAvBD,kCPrCU,IAACjF,IOqCX,OAAF,mDAAC,GAyBNmI,WAAY,WACV,IAAK1H,EAAasG,KAAQ,CACxB,MAAiBlB,GAAU,GAAIuC,IAAxBnC,EAAP,oBAEAc,IAAMO,SAASrB,KAGnBoC,UAAW,WACT,MAAiBxC,GAAU,GAAIuC,IAAxBnC,EAAP,oBAEAc,IAAMO,SAASrB,W,QE7EV,SAASqC,GAAT,GAAgD,IAA9B5G,EAA6B,EAA7BA,MAA6B,IAAtBD,kBAAsB,SAC5D,EAAuBiF,IAAS,SAAC1G,GAAD,MAAW,CACzC0C,EAAQ1C,GACRwB,EAAUC,EAAYC,EAAtBF,CAA6BxB,OAF/B,mBAAO2C,EAAP,KAAa4F,EAAb,KAIMC,EAAQ,CACZ9C,OAAO,cAAD,OAAgB/C,EAAK4F,EAAOzH,MAA5B,SAGF2H,EAAQ,SACRC,EAAOC,OAAOC,QAAQL,GACzB7C,QAAO,+CAA0B,IAA1B,QACPD,KAAI,mCAAEoD,EAAF,KAAQC,EAAR,qBAAoBL,EAApB,YAA6BI,GAA7B,QAA4C,IAARC,EAAe,GAAK,IAAMA,MAC/DC,EAAY,CAACN,GAAD,mBAAWC,IAAMM,KAAK,KAExC,OAAO,yBAAQD,UAAWA,EAAWP,MAAOA,ICjBvC,SAASS,GAAT,GAMH,IAAD,IALDC,gBAKC,SAJDC,EAIC,EAJDA,aAIC,IAHDC,iBAGC,MAHW,aAGX,MAFDC,mBAEC,MAFa,aAEb,MADDC,cACC,MADQ,IACR,EACKC,EAAMC,mBACZ,EAAkCC,mBAAS,MAA3C,mBAAOC,EAAP,KAAkBC,EAAlB,KAEMnB,EAAQ,CACZoB,OAAQ,OACRC,SAAU,WACVC,MAAO,OACPR,UAuBF,SAASS,KACHb,GAAaQ,IAIjBC,EAAa,MACbN,KASF,OACE,sBACEb,MAAOA,EACP,eAAa,OACbwB,cAAe,SAACC,GAAD,OAvCnB,SAAuBA,GACrB,IAAIf,EAAJ,CAIA,IAAMW,EAAWK,GAAYD,EAAOV,GAEpCI,EAAaE,GACbV,EAAaU,EAAUA,IA+BKM,CAAcF,IACxCG,YAAa,SAACH,IA5BZf,GAAaQ,IAIjBC,EAAa,MACbP,MAwBEiB,cAAe,SAACJ,GAAD,OAZnB,SAAwBA,GAClBP,GACFP,EAAaO,EAAWQ,GAAYD,EAAOV,IAUjBe,CAAeL,IACzCM,gBAAiB,kBAAMR,KACvBS,eAAgB,kBAAMT,KACtBU,aAAc,kBAAMV,KACpBW,qBAAsB,kBAAMX,KAC5BR,IAAKA,IAKX,SAASW,GAAYD,EAAOV,GAC1B,MAAmCA,EAAIoB,QAAQC,wBAApCC,EAAX,EAAQnH,EAAeoH,EAAvB,EAAoBnH,EACZoH,EAAiBd,EAAjBc,MAAOC,EAAUf,EAAVe,MACf,EAAsCzB,EAAIoB,QAI1C,MAAO,CAAEjH,GAHEqH,EAAQF,GADnB,EAAQI,YAIItH,GAFDqH,EAAQF,GAFnB,EAAqBI,cCtEhB,SAASC,GAAT,GAOH,IANFC,EAMC,EANDA,UACAC,EAKC,EALDA,WACAnC,EAIC,EAJDA,SACAG,EAGC,EAHDA,YACAD,EAEC,EAFDA,UACAD,EACC,EADDA,aAEA,EAA8BM,mBAAS,MAAvC,mBAAO6B,EAAP,KAAgBC,EAAhB,KAiCA,OACE,eAACtC,GAAD,CACEI,YAdJ,WACEkC,EAAW,MAEXlC,KAYED,UATJ,WACEmC,EAAW,MAEXnC,KAOED,aAnCJ,SAAoB/D,EAAOC,GACzB,IAAMmG,EAAY,CAChB9H,EAAI0B,EAAM1B,EAAI0H,EAAa,EAC3BzH,EAAIyB,EAAMzB,EAAI0H,EAAc,GAExBI,EAAU,CACd/H,EAAI2B,EAAI3B,EAAI0H,EAAa,EACzBzH,EAAI0B,EAAI1B,EAAI0H,EAAc,GAGxBC,GAAWjG,EAAI3B,IAAM4H,EAAQ5H,GAAK2B,EAAI1B,IAAM2H,EAAQ3H,IAIxD4H,EAAWlG,GAEX8D,EAAaqC,EAAWC,KAoBtBvC,SAAUA,IC/CD,SAASwC,GAAT,GAIX,IAHFC,EAGC,EAHDA,QAGC,IAFDC,mBAEC,MAFa,aAEb,MADDtC,cACC,MADQ,IACR,EACKC,EAAMC,mBAENhB,EAAQ,CACZoB,OAAQ,OACRC,SAAU,WACVC,MAAO,OACPR,UAWF,OACE,sBAAKqC,QATP,SAAe1B,GACb0B,EAAQzB,GAAYD,EAAOV,KAQNqC,YALvB,SAAmB3B,GACjB2B,EAAY1B,GAAYD,EAAOV,KAIcA,IAAKA,EAAKf,MAAOA,IAIlE,SAAS0B,GAAYD,EAAOV,GAC1B,MAAmCA,EAAIoB,QAAQC,wBAApCC,EAAX,EAAQnH,EAAeoH,EAAvB,EAAoBnH,EACZoH,EAAiBd,EAAjBc,MAAOC,EAAUf,EAAVe,MACf,EAAsCzB,EAAIoB,QAI1C,MAAO,CAAEjH,GAHEqH,EAAQF,GADnB,EAAQI,YAIItH,GAFDqH,EAAQF,GAFnB,EAAqBI,cC7BR,SAASW,GAAT,GAOX,IANFT,EAMC,EANDA,UACAC,EAKC,EALDA,WACAhC,EAIC,EAJDA,YACAD,EAGC,EAHDA,UACAD,EAEC,EAFDA,aACAD,EACC,EADDA,SAEA,EAA0BO,mBAAS,MAAnC,mBAAOrE,EAAP,KAAc0G,EAAd,KACA,EAAsBrC,mBAAS,MAA/B,mBAAOpE,EAAP,KAAY0G,EAAZ,KA8CA,OAAO,eAACL,GAAD,CAAcC,QA5CrB,SAAe9B,GACb,IAAIX,EAAJ,CAIA,IAAM8C,EAAe,CACnBtI,EAAImG,EAASnG,EAAI0H,EAAa,EAC9BzH,EAAIkG,EAASlG,EAAI0H,EAAc,GAG5BjG,EAIM4G,EAAatI,IAAM0B,EAAM1B,GAAKsI,EAAarI,IAAMyB,EAAMzB,GAChEmI,EAAS,MACTC,EAAO,MACP1C,MAEAyC,EAAS,MACTC,EAAO,MACP3C,MAVA0C,EAASE,GACTD,EAAOC,GACP7C,EAAa6C,EAAcA,MA+BMJ,YAnBrC,SAAmB/B,GACjB,IAAIX,GAAa9D,EAAjB,CAIA,IAAM4G,EAAe,CACnBtI,EAAImG,EAASnG,EAAI0H,EAAa,EAC9BzH,EAAIkG,EAASlG,EAAI0H,EAAc,GAG7BhG,GAAO2G,EAAatI,IAAM2B,EAAI3B,GAAKsI,EAAarI,IAAM0B,EAAI1B,IAI9DoI,EAAOC,GAEP7C,EAAa/D,EAAO4G,QC1CT,SAASC,GAAT,GAAwC,IAAD,IAAtBxK,kBAAsB,SACpD,EACEiF,IAAS,SAAC1G,GAAD,MAAY,CACnBkM,iBAAkBlM,EAAMkM,iBACxB3K,cAAe4K,EAAiBnM,GAChCyC,UAAWD,EAAaxC,GACxBF,MAAOE,EAAMF,MACbqF,gBAAiBnF,EAAMmF,oBANnB+G,EAAR,EAAQA,iBAAkB3K,EAA1B,EAA0BA,cAAekB,EAAzC,EAAyCA,UAAW3C,EAApD,EAAoDA,MAAOqF,EAA3D,EAA2DA,gBAQrDyE,EAASnI,EbpBoB,EADT,EauBpBP,EAAUsE,IAAM,EbrBG,EaqBAoE,GAAsBnE,KAAI,SAAC/D,GAClD,OACE,sBAAKqH,UAAU,gBAAf,SACE,eAACT,GAAD,CAAQ5G,MAAOA,EAAOD,WAAYA,KADAC,MAMxC,OACE,uBAAKqH,UAAU,QAAf,UACGtG,IAAcS,GACb,eAACiI,GAAD,CACEC,UbjCiB,EakCjBC,WAAYzB,EACZR,UAAW,kBAAMtJ,EAAM2B,IACvB0H,aAAc,SAAC/D,EAAOC,GAAR,OAAgBF,EAAgBC,EAAOC,IACrDgE,YAAa,kBAAM6C,KACnBhD,SAAU3H,IAGbkB,IAAcU,GACb,eAAC0I,GAAD,CACET,Ub3CiB,Ea4CjBC,WAAYzB,EACZR,UAAW,kBAAMtJ,EAAM2B,IACvB0H,aAAc,SAAC/D,EAAOC,GAAR,OAAgBF,EAAgBC,EAAOC,IACrDgE,YAAa,kBAAM6C,KACnBhD,SAAU3H,IAIbL,K,gDC5CQkL,OARf,YAA+D,IAA3CC,EAA0C,EAA1CA,SAA0C,IAAhCV,eAAgC,MAAtB,aAAsB,EAATW,EAAS,mBAC5D,OACE,eAAC,KAAD,2BAAUA,GAAV,IAAiBX,QAASA,EAA1B,SACGU,GAAY,WCsEJE,OA/Df,WACE,MACE7F,IAAS,SAAC1G,GAAD,MAAY,CACnBgH,UAAWhH,EAAMgH,UACjBrE,KAAMD,EAAQ1C,GACdS,aAAc+L,EAAgBxM,GAC9BQ,MAAOD,EAASP,GAChB0H,YAAa3G,EAAef,GAC5ByM,WAAY5L,EAAcb,OAPtBgH,EAAR,EAAQA,UAAWrE,EAAnB,EAAmBA,KAAMlC,EAAzB,EAAyBA,aAAcD,EAAvC,EAAuCA,MAAOkH,EAA9C,EAA8CA,YAAa+E,EAA3D,EAA2DA,WAU3D,IAAKhM,EACH,OAAO,KAGT,IAAM+H,EAAQ,CACZ9C,OAAO,cAAD,OAAgB/C,EAAK8J,GAArB,SAgCR,OACE,uCACE,sBAAK1D,UAAU,OAAf,SA7BA,uCACE,uBAAKA,UAAU,OAAf,UACE,sBAAKA,UAAU,cAAf,mBACA,sBAAKA,UAAU,cAAf,SAA8BvI,OAEhC,uBAAKuI,UAAU,OAAf,UACE,sBAAKA,UAAU,cAAf,oBACCrB,EAAc,GACb,uCACE,sBAAKqB,UAAU,eAAf,SACE,sBACEA,UAAS,6BAAwB0D,GACjCjE,MAAOA,MAGX,sBAAKO,UAAU,cAAf,SAA8BrB,UAIpC,uBAAKqB,UAAU,OAAf,UACE,sBAAKA,UAAU,cAAf,uBACA,sBAAKA,UAAU,cAAf,SAA8B/B,YASlC,uBAAK+B,UAAU,YAAf,UACE,sBAAKA,UAAU,oBAAf,SACE,eAAC,GAAD,CAAU2D,Gf5DK,Qe8DjB,sBAAK3D,UAAU,oBAAf,SACE,eAAC,KAAD,CAAM2D,GAAI7J,EAAV,8BCvCK8J,OAxBf,WACE,MAAiDjG,IAAS,SAAC1G,GAAD,MAAY,CACpE4M,SAAUnM,EAAaT,GACvBmI,WAAYnI,EAAMmI,WAClBlD,eAAgBjF,EAAMiF,mBAHhB2H,EAAR,EAAQA,SAAUzE,EAAlB,EAAkBA,WAAYlD,EAA9B,EAA8BA,eAW9B,OALA4H,qBAAU,WACR1E,IACAlD,MACC,CAACkD,EAAYlD,IAEX2H,EAKH,uCACE,eAACX,GAAD,IACA,eAAC,GAAD,OANK,MCsBIa,OAlCf,WACE,IAAMnK,EAAO+D,GAAShE,GAChBqK,EAAc,CAClBrH,OAAO,cAAD,OAAgB/C,EAAK,GAArB,SAGFzB,EAAUsE,IAAM,EAAG4C,IAA4B3C,KAAI,SAAC/D,GACxD,OACE,sBAAKqH,UAAU,gBAAf,SACE,sBAAKA,UAAU,uBAAuBP,MAAOuE,KADXrL,MAMxC,OACE,uCACE,uBAAKqH,UAAU,oBAAf,UACE,sBAAKA,UAAU,eAAf,mBAEC7H,KAGH,uBAAK6H,UAAU,YAAf,UACE,sBAAKA,UAAU,oBAAf,SACE,eAAC,KAAD,CAAM2D,GAAI9J,EAAV,oBAEF,sBAAKmG,UAAU,oBAAf,SACE,eAAC,KAAD,CAAM2D,GAAI5J,EAAV,+BCCKkK,OA5Bf,WACE,MAAiDtG,IAAS,SAAC1G,GAAD,MAAW,CACnEkC,EAAmBlC,GACnBA,EAAMiF,eACNjF,EAAMmH,kBAHR,mBAAO/E,EAAP,KAAgB6C,EAAhB,KAAgCkC,EAAhC,KAWA,OALA0F,qBAAU,WACR1F,IACAlC,MACC,CAACA,EAAgBkC,IAGlB,uCACE,eAAC8E,GAAD,CAAOxK,YAAY,IACnB,sBAAKsH,UAAU,OAAf,SACE,sBAAKA,UAAU,UAAf,SAA0B3G,MAE5B,uBAAK2G,UAAU,YAAf,UACE,sBAAKA,UAAU,oBAAf,SACE,eAAC,GAAD,CAAU2D,GlBrBK,QkBuBjB,sBAAK3D,UAAU,wDCtBR,SAASkE,GAAT,GAA+B,IAAVvL,EAAS,EAATA,MAClC,EAAsCgF,IAAS,SAAC1G,GAAD,MAAY,CACzD4H,UAAW5H,EAAM4H,UACjBC,IAAKnF,EAAQ1C,GAAO0B,GACpBe,UAAWD,EAAaxC,OAHlB4H,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,IAAKpF,EAAxB,EAAwBA,UAKlB+F,EAAQ,CACZ9C,OAAO,cAAD,OAAgBmC,EAAhB,SAWR,OACE,uBAAKkB,UAAU,SAAf,UACE,sBAAKA,UAAU,iBAAf,SACE,sBAAKA,UAAS,6BAAwBrH,GAAS8G,MAAOA,MAExD,uBAAKO,UAAU,qBAAf,UACGtG,IAAcS,GACb,eAAC+F,GAAD,CAAiBE,aAfzB,SAAsBjD,EAAGb,GACvBuC,EAAUlG,EAAgB,IAAR2D,EAAI3B,EAAW,MAgB5BjB,IAAcU,GAAoB,eAACuI,GAAD,CAAcC,QAbvD,SAAiBuB,GACftF,EAAUlG,EAAgB,IAARwL,EAAIxJ,EAAW,MAa7B,sBAAKqF,UAAU,cAAcP,MAAO,CAAEsB,MAAM,GAAD,OAAKjC,EAAM,IAAX,cCkBpCsF,OA5Cf,WACE,MAA6DzG,IAC3D,SAAC1G,GAAD,MAAY,CACV+H,gBAAiB/H,EAAM+H,gBACvBtF,UAAWD,EAAaxC,GACxBqI,UAAWrI,EAAMqI,UACjBP,UAAW9H,EAAM8H,cALbC,EAAR,EAAQA,gBAAiBtF,EAAzB,EAAyBA,UAAW4F,EAApC,EAAoCA,UAAWP,EAA/C,EAA+CA,UAQzCsF,EAAU5H,IAAM,EpBdI,GoBcaC,KAAI,SAAC3E,GAC1C,OAAO,eAACmM,GAAD,CAAsBvL,MAAOZ,GAAbA,MAGzB,OACE,uCACE,uBAAKiI,UAAU,OAAf,UACE,uBAAKA,UAAU,cAAf,UACE,sBAAKA,UAAU,mBAAf,wBACA,yBAAQA,UAAU,SAAS4C,QAAS,kBAAM5D,KAA1C,SACGtF,IAAcS,EAAmB,QAAU,aAGhD,uBAAK6F,UAAU,cAAf,UACE,sBAAKA,UAAU,mBAAf,2BACCqE,EACD,yBAAQrE,UAAU,SAAS4C,QAAS,kBAAM7D,KAA1C,yBAKJ,uBAAKiB,UAAU,YAAf,UACE,sBAAKA,UAAU,oBAAf,SACE,eAAC,GAAD,CAAU2D,GAAI9J,MAEhB,sBAAKmG,UAAU,oBAAf,SACE,eAAC,GAAD,CAAU2D,GAAI9J,EAAU+I,QAAS,kBAAMtD,KAAvC,8BC9BJgF,GAAUC,cAEhBC,IAASC,OACP,eAAC,IAAD,CAAQH,QAASA,GAAjB,SACE,gBAAC,IAAD,WACE,eAAC,IAAD,CAAOI,OAAK,EAACC,KrBbM,IqBaWF,OAAQ,kBAAM,eAAC,GAAD,OAC5C,eAAC,IAAD,CAAOC,OAAK,EAACC,KAAM9K,EAAU4K,OAAQ,kBAAM,eAAC,GAAD,OAC3C,eAAC,IAAD,CAAOC,OAAK,EAACC,KAAM5K,EAAc0K,OAAQ,kBAAM,eAAC,GAAD,OAC/C,eAAC,IAAD,CAAOC,OAAK,EAACC,KAAM7K,EAAa2K,OAAQ,kBAAM,eAAC,GAAD,YAGlDG,SAASC,eAAe,SvBoGpB,kBAAmBC,WACrBA,UAAUC,cAAc7L,MAAM8L,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.e0d50971.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createSelector } from \"reselect\";\n\nconst getSelection = (state) => state.selection;\nconst getStreak = (state) => state.game && state.game.streak;\n\nexport const getGame = (state) => state.game;\nexport const getBoard = (state) => {\n  return state.game && state.game.board;\n};\nexport const getBucket = (state) => state.game && state.game.bucket;\nexport const getScore = (state) => state.game && state.game.score;\nexport const getHighscore = (state) => state.highscore;\n\n// game\n\nexport const isGameActive = createSelector(\n  (state) => !!getGame(state),\n  (active) => active\n);\n\n// stats\n\nexport const getStreakType = createSelector(\n  getStreak,\n  (streak) => streak && streak.type\n);\n\nexport const getStreakCount = createSelector(\n  getStreak,\n  (streak) => streak && streak.count\n);\n\n// board\n\nexport const getSelectedSquares = createSelector(\n  getSelection,\n  (selection) => selection.squares\n);\n\nexport const getSelectionSize = createSelector(\n  getSelection,\n  (selection) => selection.size\n);\n\nexport const isSelectionHidden = createSelector(\n  getSelection,\n  (selection) => selection.hidden\n);\n\nexport const isBoardLocked = createSelector(\n  isSelectionHidden,\n  (hidden) => hidden\n);\n\nexport const getSquare = (isTutorial, index) =>\n  createSelector(\n    getBoard,\n    getTutorialBoard,\n    getSelectedSquares,\n    isSelectionHidden,\n    (gameBoard, tutorialBoard, squares, hidden) => {\n      const active = squares.includes(index);\n      const board = isTutorial ? tutorialBoard : gameBoard;\n\n      return {\n        type: board && board[index],\n        active,\n        inactive: squares.length > 0 && !active,\n        hidden: hidden && active,\n        ready: squares.length === 4 && active,\n      };\n    }\n  );\n\n// tutorial\n\nexport const getTutorialMessage = (state) =>\n  state.tutorial.message[state.tutorial.step];\n\nexport const getTutorialBoard = (state) =>\n  state.tutorial.board[state.tutorial.step];\n\n// options\n\nconst getOptions = (state) => state.options;\n\nexport const getInputMode = createSelector(\n  getOptions,\n  (options) => options.inputMode\n);\n\nexport const getHues = createSelector(getOptions, (options) => options.hues);\n","// Dimensions and types exist to have named constants. Changing them requires more work.\nexport const BOARD_HEIGHT = 7;\nexport const BOARD_HEIGHT_TUTORIAL = 5;\nexport const BOARD_WIDTH = 7;\nexport const SQUARE_TYPES = 3;\n\nexport const TITLE_URL = \"/\";\nexport const GAME_URL = \"/play\";\nexport const OPTIONS_URL = \"/options\";\nexport const TUTORIAL_URL = \"/tutorial\";\n","import produce from \"immer\";\n\nexport const defaultTutorial = {\n  board: [\n    [\n      3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 3, 1, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 1, 3,\n      1, 3, 3, 3, 3, 3, 3, 3, 3, 3,\n    ],\n    [\n      3, 3, 0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 3, 3,\n      3, 3, 3, 3, 3, 3, 3, 0, 3, 3,\n    ],\n    [\n      3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 0, 0, 3, 3, 3, 3, 3, 0, 0,\n      3, 3, 3,\n\n      3, 3, 3, 3, 3, 3, 3,\n    ],\n    [\n      3, 0, 3, 3, 3, 1, 3, 3, 2, 1, 3, 3, 3, 0, 3, 3, 3, 3, 3, 0, 3, 3, 3, 3, 3,\n      1, 2, 1, 3, 2, 1, 3, 2, 2, 3,\n    ],\n  ],\n  message: [\n    `Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.`,\n    `Squares have different sizes and orientations. Removing bigger squares yields a higher score.`,\n    `Removing multiple squares of the same color in a row  will multiply your score.`,\n    `The game won’t tell you when there aren’t any squares left to remove.\n         You have to call it quits.\n         Enjoy!`,\n  ],\n  step: 0,\n};\n\nexport const createTutorialSlice = (set) => ({\n  tutorial: defaultTutorial,\n  startTutorial: () =>\n    set(\n      produce((state) => {\n        state.tutorial.step = 0;\n      })\n    ),\n  advanceTutorial: () =>\n    set(\n      produce((state) => {\n        state.tutorial.step += 1;\n      })\n    ),\n});\n","import produce from \"immer\";\nimport { getSelectedSquares, getSelectionSize } from \"../selectors\";\n\nconst defaultGame = {\n  board: null,\n  bucket: [],\n  score: 0,\n  streak: null,\n};\n\nexport const createGameSlice = (set) => ({\n  game: null,\n  initGame: (board) =>\n    set(\n      produce((state) => {\n        state.game = { ...defaultGame, board };\n      })\n    ),\n  replaceSquares: (values, bucket) =>\n    set(\n      produce((state) => {\n        const indexes = getSelectedSquares(state);\n        const size = getSelectionSize(state);\n        const type = state.game.board[indexes[0]];\n\n        for (const index of indexes) {\n          state.game.board[index] = values.pop();\n        }\n\n        const streakCount =\n          state.game.streak && state.game.streak.type === type\n            ? state.game.streak.count + 1\n            : 1;\n        state.game.score = state.game.score + (size | 0) * streakCount;\n        state.game.streak = {\n          count: streakCount,\n          type,\n        };\n        state.game.bucket = bucket;\n      })\n    ),\n});\n","import { SQUARE_TYPES } from \"../../config\";\nimport produce from \"immer\";\n\nexport const INPUT_MODE_TOUCH = \"TOUCH\";\nexport const INPUT_MODE_CLICK = \"CLICK\";\n\nexport const defaultHues = Array(SQUARE_TYPES).fill(0);\n\nexport const defaultOptions = {\n  hues: defaultHues,\n  inputMode: INPUT_MODE_TOUCH,\n};\n\nexport const createOptionsSlice = (set) => ({\n  options: defaultOptions,\n  changeHue: (index, hue) =>\n    set(\n      produce((state) => {\n        const hues = [...state.options.hues];\n        hues[index] = hue;\n\n        state.options.hues = hues;\n      })\n    ),\n  resetHues: () =>\n    set(\n      produce((state) => {\n        state.options.hues = defaultHues;\n      })\n    ),\n  changeInputMode: () =>\n    set(\n      produce((state) => {\n        state.options.inputMode =\n          state.options.inputMode === INPUT_MODE_CLICK\n            ? INPUT_MODE_TOUCH\n            : INPUT_MODE_CLICK;\n      })\n    ),\n});\n","import curry from \"ramda/src/curry\";\n\nexport const add = ({ x, y }, { x: x2, y: y2 }) => ({ x: x + x2, y: y + y2 });\n\nexport const sub = ({ x, y }, { x: x2, y: y2 }) => ({ x: x - x2, y: y - y2 });\n\nexport const tween = ({ x, y }, { x: x2, y: y2 }, r) => ({\n  x: x * r + x2 * (1 - r),\n  y: y * r + y2 * (1 - r),\n});\n\nexport const rotate90 = ({ x, y }, times) =>\n  times ? rotate90({ x: y, y: -x }, times - 1) : { x, y };\n\nexport const rotate90Around = curry((center, v, times) =>\n  add(rotate90(sub(v, center), times), center)\n);\n\nexport const distance = ({ x, y }, { x: x2, y: y2 }) =>\n  Math.hypot(x - x2, y - y2);\n","import curry from \"ramda/src/curry\";\nimport equals from \"ramda/src/equals\";\nimport range from \"ramda/src/range\";\nimport uniq from \"ramda/src/uniq\";\nimport { SQUARE_TYPES, BOARD_WIDTH } from \"../../config\";\nimport { distance, rotate90Around, tween } from \"../../vectors\";\nimport produce from \"immer\";\nimport { getBoard } from \"../selectors\";\n\nexport const defaultSelection = {\n  squares: [],\n  size: 0,\n  hidden: false,\n};\n\nconst getSelection = (board, start, end) => ({\n  ...defaultSelection,\n  size: distance(start, end),\n  squares: uniq(\n    range(0, 4)\n      .map(rotate90Around(tween(start, end, 0.5), start))\n      .filter(isValid(board))\n      .filter(isValidType(board))\n      .filter(typeEquals(board, getType(board, start)))\n      .map(toIndex)\n  ),\n});\n\nconst toIndex = curry(({ x, y }) => x + y * BOARD_WIDTH);\nconst isValid = curry(\n  (board, { x, y }) =>\n    0 <= x &&\n    x < BOARD_WIDTH &&\n    x % 1 === 0 &&\n    0 <= y &&\n    y < board.length / BOARD_WIDTH &&\n    y % 1 === 0\n);\nconst getType = (board, v) => board[toIndex(v)];\nconst typeEquals = curry((board, type, v) => getType(board, v) === type);\nconst isValidType = curry((board, v) => getType(board, v) < SQUARE_TYPES);\n\nexport const createSelectionSlice = (set) => ({\n  selection: defaultSelection,\n  resetSelection: () =>\n    set(\n      produce((state) => {\n        state.selection = defaultSelection;\n      })\n    ),\n  updateSelection: (start, end) =>\n    set(\n      produce((state) => {\n        const newSelection = getSelection(getBoard(state), start, end);\n\n        if (!equals(newSelection.squares, state.selection.squares)) {\n          state.selection = newSelection;\n        }\n      })\n    ),\n  hideSelection: () =>\n    set(\n      produce((state) => {\n        if (state.selection.squares.length < 4) {\n          state.selection = defaultSelection;\n        } else {\n          state.selection.hidden = true;\n        }\n      })\n    ),\n});\n","import create from \"zustand\";\nimport { createHighscoreSlice } from \"./reducers/highscore\";\nimport { createTutorialSlice } from \"./reducers/tutorial\";\nimport { devtools } from \"zustand/middleware\";\nimport { createGameSlice } from \"./reducers/game\";\nimport { createOptionsSlice } from \"./reducers/options\";\nimport { createSelectionSlice } from \"./reducers/selection\";\nimport { getBucket, isGameActive, isSelectionHidden } from \"./selectors\";\nimport delay from \"delay\";\nimport { BOARD_HEIGHT, BOARD_WIDTH } from \"../config\";\nimport { configurePersist } from \"zustand-persist\";\n\nfunction getRandom(bucket, count, min = 0, max = 3, size = 2) {\n  return [...Array(count)].reduce(\n    ([values, bucket]) => {\n      bucket = [...bucket];\n\n      if (bucket.length === 0) {\n        bucket = [...Array((max - min) * size)].map((_, index) => {\n          return (index % (max - min)) + min;\n        });\n      }\n\n      const index = (Math.random() * bucket.length) | 0;\n      const value = bucket.splice(index, 1)[0];\n\n      return [[...values, value], bucket];\n    },\n    [[], bucket]\n  );\n}\n\nconst { persist } = configurePersist({\n  storage: localStorage,\n});\n\nexport const useStore = create(\n  devtools(\n    persist(\n      { key: \"quood\", allowlist: [\"game\", \"highscore\", \"options\"] },\n      (set, get) => ({\n        ...createHighscoreSlice(set, get),\n        ...createTutorialSlice(set, get),\n        ...createGameSlice(set, get),\n        ...createOptionsSlice(set, get),\n        ...createSelectionSlice(set, get),\n        match: async (isTutorial) => {\n          get().hideSelection();\n\n          await delay(0);\n\n          if (!isSelectionHidden(get())) {\n            return;\n          }\n\n          await delay(500);\n\n          if (isTutorial) {\n            get().advanceTutorial();\n          } else {\n            const [values, bucket] = getRandom(getBucket(get()), 4);\n\n            get().replaceSquares(values, bucket);\n\n            await delay(0);\n\n            get().updateHighscore();\n          }\n\n          get().resetSelection();\n        },\n        assureGame: () => {\n          if (!isGameActive(get())) {\n            const [values] = getRandom([], BOARD_HEIGHT * BOARD_WIDTH);\n\n            get().initGame(values);\n          }\n        },\n        startGame: () => {\n          const [values] = getRandom([], BOARD_HEIGHT * BOARD_WIDTH);\n\n          get().initGame(values);\n        },\n      })\n    )\n  )\n);\n","import produce from \"immer\";\nimport { getScore } from \"../selectors\";\n\nexport const createHighscoreSlice = (set) => ({\n  highscore: 0,\n  updateHighscore: () =>\n    set(\n      produce((state) => {\n        state.highscore = Math.max(state.highscore, getScore(state));\n      })\n    ),\n});\n","import React from \"react\";\nimport { getSquare, getHues } from \"../state/selectors\";\nimport { useStore } from \"../state/store\";\n\nexport default function Square({ index, isTutorial = false }) {\n  const [hues, square] = useStore((state) => [\n    getHues(state),\n    getSquare(isTutorial, index)(state),\n  ]);\n  const style = {\n    filter: `hue-rotate(${hues[square.type]}deg)`,\n  };\n\n  const block = \"square\";\n  const mods = Object.entries(square)\n    .filter(([_, value]) => value !== false)\n    .map(([name, val]) => `${block}_${name}${val === true ? \"\" : \"_\" + val}`);\n  const className = [block, ...mods].join(\" \");\n\n  return <button className={className} style={style} />;\n}\n","import React, { useRef, useState } from \"react\";\n\nexport function DraggingOverlay({\n  isLocked = false,\n  onDragUpdate,\n  onDragEnd = () => {},\n  onDragAbort = () => {},\n  zIndex = 10000,\n}) {\n  const ref = useRef();\n  const [dragStart, setDragStart] = useState(null);\n\n  const style = {\n    height: \"100%\",\n    position: \"absolute\",\n    width: \"100%\",\n    zIndex,\n  };\n\n  function startDragging(event) {\n    if (isLocked) {\n      return;\n    }\n\n    const position = getPosition(event, ref);\n\n    setDragStart(position);\n    onDragUpdate(position, position);\n  }\n\n  function finishDragging() {\n    if (isLocked || !dragStart) {\n      return;\n    }\n\n    setDragStart(null);\n    onDragEnd();\n  }\n\n  function abortDragging() {\n    if (isLocked || !dragStart) {\n      return;\n    }\n\n    setDragStart(null);\n    onDragAbort();\n  }\n\n  function updatePosition(event) {\n    if (dragStart) {\n      onDragUpdate(dragStart, getPosition(event, ref));\n    }\n  }\n\n  return (\n    <div\n      style={style}\n      touch-action=\"none\"\n      onPointerDown={(event) => startDragging(event)}\n      onPointerUp={(event) => finishDragging(event)}\n      onPointerMove={(event) => updatePosition(event)}\n      onPointerCancel={() => abortDragging()}\n      onPointerLeave={() => abortDragging()}\n      onPointerOut={() => abortDragging()}\n      onLostPointerCapture={() => abortDragging()}\n      ref={ref}\n    ></div>\n  );\n}\n\nfunction getPosition(event, ref) {\n  const { x: offsetX, y: offsetY } = ref.current.getBoundingClientRect();\n  const { pageX, pageY } = event;\n  const { offsetWidth, offsetHeight } = ref.current;\n  const x = (pageX - offsetX) / offsetWidth;\n  const y = (pageY - offsetY) / offsetHeight;\n\n  return { x, y };\n}\n","import React, { useState } from \"react\";\nimport { DraggingOverlay } from \"./DraggingOverlay\";\n\nexport function GridDraggingOverlay({\n  gridWidth,\n  gridHeight,\n  isLocked,\n  onDragAbort,\n  onDragEnd,\n  onDragUpdate,\n}) {\n  const [lastEnd, setLastEnd] = useState(null);\n\n  function dragUpdate(start, end) {\n    const gridStart = {\n      x: (start.x * gridWidth) | 0,\n      y: (start.y * gridHeight) | 0,\n    };\n    const gridEnd = {\n      x: (end.x * gridWidth) | 0,\n      y: (end.y * gridHeight) | 0,\n    };\n\n    if (lastEnd && end.x === lastEnd.x && end.y === lastEnd.y) {\n      return;\n    }\n\n    setLastEnd(end);\n\n    onDragUpdate(gridStart, gridEnd);\n  }\n\n  function dragAbort() {\n    setLastEnd(null);\n\n    onDragAbort();\n  }\n\n  function dragEnd() {\n    setLastEnd(null);\n\n    onDragEnd();\n  }\n\n  return (\n    <DraggingOverlay\n      onDragAbort={dragAbort}\n      onDragEnd={dragEnd}\n      onDragUpdate={dragUpdate}\n      isLocked={isLocked}\n    />\n  );\n}\n","import React, { useRef } from \"react\";\n\nexport default function ClickOverlay({\n  onClick,\n  onMouseMove = () => {},\n  zIndex = 10000,\n}) {\n  const ref = useRef();\n\n  const style = {\n    height: \"100%\",\n    position: \"absolute\",\n    width: \"100%\",\n    zIndex,\n  };\n\n  function click(event) {\n    onClick(getPosition(event, ref));\n  }\n\n  function mouseMove(event) {\n    onMouseMove(getPosition(event, ref));\n  }\n\n  return (\n    <div onClick={click} onMouseMove={mouseMove} ref={ref} style={style}></div>\n  );\n}\n\nfunction getPosition(event, ref) {\n  const { x: offsetX, y: offsetY } = ref.current.getBoundingClientRect();\n  const { pageX, pageY } = event;\n  const { offsetWidth, offsetHeight } = ref.current;\n  const x = (pageX - offsetX) / offsetWidth;\n  const y = (pageY - offsetY) / offsetHeight;\n\n  return { x, y };\n}\n","import React, { useState } from \"react\";\nimport ClickOverlay from \"./ClickOverlay\";\n\nexport default function GridClickOverlay({\n  gridWidth,\n  gridHeight,\n  onDragAbort,\n  onDragEnd,\n  onDragUpdate,\n  isLocked,\n}) {\n  const [start, setStart] = useState(null);\n  const [end, setEnd] = useState(null);\n\n  function click(position) {\n    if (isLocked) {\n      return;\n    }\n\n    const gridPosition = {\n      x: (position.x * gridWidth) | 0,\n      y: (position.y * gridHeight) | 0,\n    };\n\n    if (!start) {\n      setStart(gridPosition);\n      setEnd(gridPosition);\n      onDragUpdate(gridPosition, gridPosition);\n    } else if (gridPosition.x === start.x && gridPosition.y === start.y) {\n      setStart(null);\n      setEnd(null);\n      onDragAbort();\n    } else {\n      setStart(null);\n      setEnd(null);\n      onDragEnd();\n    }\n  }\n\n  function mouseMove(position) {\n    if (isLocked || !start) {\n      return;\n    }\n\n    const gridPosition = {\n      x: (position.x * gridWidth) | 0,\n      y: (position.y * gridHeight) | 0,\n    };\n\n    if (end && gridPosition.x === end.x && gridPosition.y === end.y) {\n      return;\n    }\n\n    setEnd(gridPosition);\n\n    onDragUpdate(start, gridPosition);\n  }\n\n  return <ClickOverlay onClick={click} onMouseMove={mouseMove}></ClickOverlay>;\n}\n","import React from \"react\";\nimport range from \"ramda/src/range\";\nimport {\n  isBoardLocked as getIsBoardLocked,\n  getInputMode,\n} from \"../state/selectors\";\nimport { BOARD_WIDTH, BOARD_HEIGHT_TUTORIAL, BOARD_HEIGHT } from \"../config\";\nimport Square from \"./Square\";\nimport { GridDraggingOverlay } from \"./GridDraggingOverlay\";\nimport { INPUT_MODE_TOUCH, INPUT_MODE_CLICK } from \"../state/reducers/options\";\nimport GridClickOverlay from \"./GridClickOverlay\";\nimport { useStore } from \"../state/store\";\n\nexport default function Board({ isTutorial = false }) {\n  const { discardSelection, isBoardLocked, inputMode, match, updateSelection } =\n    useStore((state) => ({\n      discardSelection: state.discardSelection,\n      isBoardLocked: getIsBoardLocked(state),\n      inputMode: getInputMode(state),\n      match: state.match,\n      updateSelection: state.updateSelection,\n    }));\n  const height = isTutorial ? BOARD_HEIGHT_TUTORIAL : BOARD_HEIGHT;\n\n  const squares = range(0, height * BOARD_WIDTH).map((index) => {\n    return (\n      <div className=\"board__square\" key={index}>\n        <Square index={index} isTutorial={isTutorial} />\n      </div>\n    );\n  });\n\n  return (\n    <div className=\"board\">\n      {inputMode === INPUT_MODE_TOUCH && (\n        <GridDraggingOverlay\n          gridWidth={BOARD_WIDTH}\n          gridHeight={height}\n          onDragEnd={() => match(isTutorial)}\n          onDragUpdate={(start, end) => updateSelection(start, end)}\n          onDragAbort={() => discardSelection()}\n          isLocked={isBoardLocked}\n        />\n      )}\n      {inputMode === INPUT_MODE_CLICK && (\n        <GridClickOverlay\n          gridWidth={BOARD_WIDTH}\n          gridHeight={height}\n          onDragEnd={() => match(isTutorial)}\n          onDragUpdate={(start, end) => updateSelection(start, end)}\n          onDragAbort={() => discardSelection()}\n          isLocked={isBoardLocked}\n        ></GridClickOverlay>\n      )}\n\n      {squares}\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction BackLink({ children, onClick = () => {}, ...props }) {\n  return (\n    <Link {...props} onClick={onClick}>\n      {children || \"Back\"}\n    </Link>\n  );\n}\n\nexport default BackLink;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport {\n  isGameActive as getIsGameActive,\n  getScore,\n  getStreakType,\n  getStreakCount,\n  getHues,\n} from \"../state/selectors\";\nimport { OPTIONS_URL, TITLE_URL } from \"../config\";\nimport BackLink from \"./BackLink\";\nimport { useStore } from \"../state/store\";\n\nfunction Menu() {\n  const { highscore, hues, isGameActive, score, streakCount, streakType } =\n    useStore((state) => ({\n      highscore: state.highscore,\n      hues: getHues(state),\n      isGameActive: getIsGameActive(state),\n      score: getScore(state),\n      streakCount: getStreakCount(state),\n      streakType: getStreakType(state),\n    }));\n\n  if (!isGameActive) {\n    return null;\n  }\n\n  const style = {\n    filter: `hue-rotate(${hues[streakType]}deg)`,\n  };\n\n  function getStats() {\n    return (\n      <>\n        <div className=\"stat\">\n          <div className=\"stat__title\">Score</div>\n          <div className=\"stat__value\">{score}</div>\n        </div>\n        <div className=\"stat\">\n          <div className=\"stat__title\">Streak</div>\n          {streakCount > 0 && (\n            <>\n              <div className=\"stat__square\">\n                <div\n                  className={`square square_type_${streakType}`}\n                  style={style}\n                />\n              </div>\n              <div className=\"stat__value\">{streakCount}</div>\n            </>\n          )}\n        </div>\n        <div className=\"stat\">\n          <div className=\"stat__title\">Highscore</div>\n          <div className=\"stat__value\">{highscore}</div>\n        </div>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <div className=\"menu\">{getStats()}</div>\n      <div className=\"main-menu\">\n        <div className=\"main-menu__action\">\n          <BackLink to={TITLE_URL} />\n        </div>\n        <div className=\"main-menu__action\">\n          <Link to={OPTIONS_URL}>Options</Link>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Menu;\n","import React, { useEffect } from \"react\";\nimport { isGameActive } from \"../state/selectors\";\nimport Board from \"./Board\";\nimport Menu from \"./Menu\";\nimport { useStore } from \"../state/store\";\n\nfunction Game() {\n  const { isActive, assureGame, resetSelection } = useStore((state) => ({\n    isActive: isGameActive(state),\n    assureGame: state.assureGame,\n    resetSelection: state.resetSelection,\n  }));\n\n  useEffect(() => {\n    assureGame();\n    resetSelection();\n  }, [assureGame, resetSelection]);\n\n  if (!isActive) {\n    return null;\n  }\n\n  return (\n    <>\n      <Board />\n      <Menu />\n    </>\n  );\n}\n\nexport default Game;\n","import range from \"ramda/src/range\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { GAME_URL, TUTORIAL_URL, BOARD_HEIGHT, BOARD_WIDTH } from \"../config\";\nimport { getHues } from \"../state/selectors\";\nimport { useStore } from \"../state/store\";\n\nfunction Title() {\n  const hues = useStore(getHues);\n  const squareStyle = {\n    filter: `hue-rotate(${hues[1]}deg)`,\n  };\n\n  const squares = range(0, BOARD_HEIGHT * BOARD_WIDTH).map((index) => {\n    return (\n      <div className=\"board__square\" key={index}>\n        <div className=\"square square_type_1\" style={squareStyle} />\n      </div>\n    );\n  });\n\n  return (\n    <>\n      <div className=\"board board_title\">\n        <div className=\"board__title\">Quood</div>\n\n        {squares}\n      </div>\n\n      <div className=\"main-menu\">\n        <div className=\"main-menu__action\">\n          <Link to={GAME_URL}>Play</Link>\n        </div>\n        <div className=\"main-menu__action\">\n          <Link to={TUTORIAL_URL}>Tutorial</Link>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Title;\n","import React, { useEffect } from \"react\";\nimport Board from \"./Board\";\nimport { TITLE_URL } from \"../config\";\nimport BackLink from \"./BackLink\";\nimport { useStore } from \"../state/store\";\nimport { getTutorialMessage } from \"../state/selectors\";\n\nfunction Tutorial() {\n  const [message, resetSelection, startTutorial] = useStore((state) => [\n    getTutorialMessage(state),\n    state.resetSelection,\n    state.startTutorial,\n  ]);\n\n  useEffect(() => {\n    startTutorial();\n    resetSelection();\n  }, [resetSelection, startTutorial]);\n\n  return (\n    <>\n      <Board isTutorial={true} />\n      <div className=\"menu\">\n        <div className=\"message\">{message}</div>\n      </div>\n      <div className=\"main-menu\">\n        <div className=\"main-menu__action\">\n          <BackLink to={TITLE_URL} />\n        </div>\n        <div className=\"main-menu__action main-menu__action_inactive\" />\n      </div>\n    </>\n  );\n}\n\nexport default Tutorial;\n","import React from \"react\";\nimport { getHues, getInputMode } from \"../state/selectors\";\nimport { DraggingOverlay } from \"./DraggingOverlay\";\nimport { INPUT_MODE_TOUCH, INPUT_MODE_CLICK } from \"../state/reducers/options\";\nimport ClickOverlay from \"./ClickOverlay\";\nimport { useStore } from \"../state/store\";\n\nexport default function HueSlider({ index }) {\n  const { changeHue, hue, inputMode } = useStore((state) => ({\n    changeHue: state.changeHue,\n    hue: getHues(state)[index],\n    inputMode: getInputMode(state),\n  }));\n  const style = {\n    filter: `hue-rotate(${hue}deg)`,\n  };\n\n  function onDragUpdate(_, end) {\n    changeHue(index, (end.x * 360) | 0);\n  }\n\n  function onClick(pos) {\n    changeHue(index, (pos.x * 360) | 0);\n  }\n\n  return (\n    <div className=\"slider\">\n      <div className=\"slider__square\">\n        <div className={`square square_type_${index}`} style={style} />\n      </div>\n      <div className=\"slider__bar-border\">\n        {inputMode === INPUT_MODE_TOUCH && (\n          <DraggingOverlay onDragUpdate={onDragUpdate} />\n        )}\n        {inputMode === INPUT_MODE_CLICK && <ClickOverlay onClick={onClick} />}\n        <div className=\"slider__bar\" style={{ width: `${hue / 3.6}%` }}></div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport range from \"ramda/src/range\";\nimport { SQUARE_TYPES, GAME_URL } from \"../config\";\nimport HueSlider from \"./HueSlider\";\nimport { getInputMode } from \"../state/selectors\";\nimport { INPUT_MODE_TOUCH } from \"../state/reducers/options\";\nimport BackLink from \"./BackLink\";\nimport { useStore } from \"../state/store\";\n\nfunction Options() {\n  const { changeInputMode, inputMode, startGame, resetHues } = useStore(\n    (state) => ({\n      changeInputMode: state.changeInputMode,\n      inputMode: getInputMode(state),\n      startGame: state.startGame,\n      resetHues: state.resetHues,\n    })\n  );\n  const sliders = range(0, SQUARE_TYPES).map((type) => {\n    return <HueSlider key={type} index={type} />;\n  });\n\n  return (\n    <>\n      <div className=\"menu\">\n        <div className=\"menu__block\">\n          <div className=\"options-headline\">Input Mode</div>\n          <button className=\"action\" onClick={() => changeInputMode()}>\n            {inputMode === INPUT_MODE_TOUCH ? \"Touch\" : \"Click\"}\n          </button>\n        </div>\n        <div className=\"menu__block\">\n          <div className=\"options-headline\">Square Colors</div>\n          {sliders}\n          <button className=\"action\" onClick={() => resetHues()}>\n            Reset\n          </button>\n        </div>\n      </div>\n      <div className=\"main-menu\">\n        <div className=\"main-menu__action\">\n          <BackLink to={GAME_URL} />\n        </div>\n        <div className=\"main-menu__action\">\n          <BackLink to={GAME_URL} onClick={() => startGame()}>\n            Restart\n          </BackLink>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default Options;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Switch, Route, Router } from \"react-router\";\nimport { createHashHistory } from \"history\";\nimport \"pepjs\";\nimport \"normalize.css\";\nimport \"./index.css\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport Game from \"./components/Game\";\nimport Title from \"./components/Title\";\nimport Tutorial from \"./components/Tutorial\";\nimport { TITLE_URL, GAME_URL, TUTORIAL_URL, OPTIONS_URL } from \"./config\";\nimport Options from \"./components/Options\";\n\nconst history = createHashHistory();\n\nReactDOM.render(\n  <Router history={history}>\n    <Switch>\n      <Route exact path={TITLE_URL} render={() => <Title />} />\n      <Route exact path={GAME_URL} render={() => <Game />} />\n      <Route exact path={TUTORIAL_URL} render={() => <Tutorial />} />\n      <Route exact path={OPTIONS_URL} render={() => <Options />} />\n    </Switch>\n  </Router>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}