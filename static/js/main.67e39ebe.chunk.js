(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){"use strict";n.r(t);var r=n(9),a=n(0),o=n.n(a),c=n(39),u=n.n(c),i=n(25),s=n(3),l=n(64),d=n(59),f=n.n(d),b=n(7),v=n(57),k=n(27),O=n(32);n(78),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=n(41),p=n(21),g=n(110),m={board:null,bucket:[],score:0,streak:null},j=Object(g.a)({START_GAME:function(e,t){var n=t.payload.board;return Object(r.a)({},m,{board:n})},REPLACE_SQUARES:function(e,t){var n=t.payload,r=n.indexes,a=n.values,o=n.size,c=n.bucket,u=Object(p.a)(e.board),i=u[r[0]],s=!0,l=!1,d=void 0;try{for(var f,b=r[Symbol.iterator]();!(s=(f=b.next()).done);s=!0){u[f.value]=a.pop()}}catch(k){l=!0,d=k}finally{try{s||null==b.return||b.return()}finally{if(l)throw d}}var v=e.streak&&e.streak.type===i?e.streak.count+1:1;return{board:u,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:i}}}},null),E=Object(g.a)({UPDATE_HIGHSCORE:function(e,t){var n=t.payload.score;return Math.max(e,n)}},0),x=7,y=5,A=7,S=3,T="/play",R="/options",C="/tutorial",M=navigator.userAgent.includes("KAIOS"),w="SoftLeft",D="SoftRight",_="TOUCH",L="CLICK",U=Array(S).fill(0),I={hues:U,inputMode:M?L:_},P=Object(g.a)({CHANGE_HUE:function(e,t){var n=t.payload,a=n.index,o=n.hue,c=Object(p.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:U})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:e.inputMode===L?_:L})}},I),q=n(28),B=n.n(q),H=n(50),N=n.n(H),G=n(24),z=n.n(G),F=n(60),Q=n.n(F),W=B()(function(e,t,n){return function(e,t){var n=e.x,r=e.y;return{x:n+t.x,y:r+t.y}}(function e(t,n){var r=t.x,a=t.y;return n?e({x:a,y:-r},n-1):{x:r,y:a}}(function(e,t){var n=e.x,r=e.y;return{x:n-t.x,y:r-t.y}}(t,e),n),e)}),Y={squares:[],size:0,hidden:!1},V=Object(g.a)({START_GAME:function(){return Y},UPDATE_SELECTION:function(e,t){var n=t.payload,r=n.board,a=n.start,o=n.end,c=J(r,a,o);return N()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return Y},HIDE_SELECTION:function(e){return e.squares.length<4?Y:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return Y},ADVANCE_TUTORIAL:function(){return Y}},Y),J=function(e,t,n){return Object(r.a)({},Y,{size:function(e,t){var n=e.x,r=e.y,a=t.x,o=t.y;return Math.hypot(n-a,r-o)}(t,n),squares:Q()(z()(0,4).map(W(function(e,t,n){var r=e.x,a=e.y;return{x:r*n+t.x*(1-n),y:a*n+t.y*(1-n)}}(t,n,.5),t)).filter(X(e)).filter(ee(e)).filter(Z(e,$(e,t))).map(K))})},K=B()(function(e){return e.x+e.y*A}),X=B()(function(e,t){var n=t.x,r=t.y;return 0<=n&&n<A&&n%1===0&&0<=r&&r<e.length/A&&r%1===0}),$=function(e,t){return e[K(t)]},Z=B()(function(e,t,n){return $(e,n)===t}),ee=B()(function(e,t){return $(e,t)<S}),te={board:[[3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,3,1,3,3,2,1,3,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,3,2,1,3,2,2,3]],message:["Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.","Squares have different sizes and orientations. Removing bigger squares yields a higher score.","Removing multiple squares of the same color in a row  will multiply your score.","The game wont\u2019t tell you if there are no squares to remove. You have to call it quits.\n         Enjoy!","The game doesn\u2019t end if there are no squares to remove. You have to call it quits.\n         Enjoy!"],step:0},ne=Object(g.a)({START_TUTORIAL:function(e){return Object(r.a)({},e,{step:0})},ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},te);function re(e){return e.selection||(e=Object(r.a)({},e,{selection:Y,tutorial:te})),e.options.inputMode||(e.options.inputMode=_),e}var ae=n(13),oe=n.n(ae),ce=n(14),ue=n(62),ie=n.n(ue),se=n(5),le=n(109),de=Object(le.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,t,n,r){return{indexes:e,values:t,size:n,bucket:r}},UPDATE_SELECTION:function(e,t,n){return{board:e,start:t,end:n}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},START_TUTORIAL:function(){return{}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,t){return{index:e,hue:t}},RESET_HUES:function(){return{}}}),fe=de.requestAssureGame,be=de.requestStartGame,ve=de.startGame,ke=de.replaceSquares,Oe=de.updateSelection,he=de.discardSelection,pe=de.hideSelection,ge=de.updateHighscore,me=de.startTutorial,je=de.advanceTutorial,Ee=de.changeInputMode,xe=de.changeHue,ye=de.resetHues,Ae=n(17),Se=function(e){return e.selection},Te=function(e){return e.game&&e.game.streak},Re=function(e){return e.router.location.pathname===C?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},Ce=function(e){return e.game&&e.game.bucket},Me=function(e){return e.game&&e.game.score},we=function(e){return e.highscore},De=Object(Ae.a)(function(e){return!!function(e){return e.game}(e)},function(e){return e}),_e=Object(Ae.a)(Te,function(e){return e&&e.type}),Le=Object(Ae.a)(Te,function(e){return e&&e.count}),Ue=Object(Ae.a)(Se,function(e){return e.squares}),Ie=Object(Ae.a)(Se,function(e){return e.size}),Pe=Object(Ae.a)(Se,function(e){return e.hidden}),qe=Object(Ae.a)(Pe,function(e){return e}),Be=function(e){return Object(Ae.a)(Re,Ue,Pe,function(t,n,r){var a=n.includes(e);return{type:t&&t[e],active:a,inactive:n.length>0&&!a,hidden:r&&a,ready:4===n.length&&a}})},He=function(e){return e.router.location.pathname===C},Ne=function(e){return e.tutorial.message[e.tutorial.step]},Ge=function(e){return e.options},ze=Object(Ae.a)(Ge,function(e){return e.inputMode}),Fe=Object(Ae.a)(Ge,function(e){return e.hues}),Qe=oe.a.mark($e),We=oe.a.mark(Ze),Ye=oe.a.mark(et),Ve=oe.a.mark(tt),Je=oe.a.mark(nt),Ke=oe.a.mark(rt);function Xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(p.a)(Array(t)).reduce(function(e){var t=Object(ce.a)(e,2),o=t[0],c=t[1];0===(c=Object(p.a)(c)).length&&(c=Object(p.a)(Array((r-n)*a)).map(function(e,t){return t%(r-n)+n}));var u=Math.random()*c.length|0,i=c.splice(u,1)[0];return[Object(p.a)(o).concat([i]),c]},[[],e])}function $e(){var e,t,n,r,a;return oe.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(se.c)();case 2:if(e=o.sent,Pe(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(se.a)(ie.a,500);case 7:if(!He(e)){o.next=11;break}return o.next=10,Object(se.b)(je());case 10:return o.abrupt("return");case 11:return t=Xe(Ce(e),4),n=Object(ce.a)(t,2),r=n[0],a=n[1],o.next=14,Object(se.b)(ke(Ue(e),r,Ie(e),a));case 14:case"end":return o.stop()}},Qe,this)}function Ze(){var e;return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(se.c)();case 2:return e=t.sent,t.next=5,Object(se.b)(ge(Me(e)));case 5:case"end":return t.stop()}},We,this)}function et(){var e,t,n;return oe.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=Xe([],x*A),t=Object(ce.a)(e,1),n=t[0],r.next=3,Object(se.b)(ve(n));case 3:case"end":return r.stop()}},Ye,this)}function tt(){var e,t,n,r;return oe.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(se.c)();case 2:if(e=a.sent,De(e)){a.next=7;break}return t=Xe([],x*A),n=Object(ce.a)(t,1),r=n[0],a.next=7,Object(se.b)(ve(r));case 7:case"end":return a.stop()}},Ve,this)}function nt(e){return oe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payload.location.pathname!==C){t.next=4;break}return t.next=4,Object(se.b)(me());case 4:return t.next=6,Object(se.b)(he());case 6:case"end":return t.stop()}},Je,this)}function rt(){return oe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(se.d)("HIDE_SELECTION",$e);case 2:return e.next=4,Object(se.d)("REPLACE_SQUARES",Ze);case 4:return e.next=6,Object(se.d)("REQUEST_ASSURE_GAME",tt);case 6:return e.next=8,Object(se.d)("REQUEST_START_GAME",et);case 8:return e.next=10,Object(se.d)("@@router/LOCATION_CHANGE",nt);case 10:case"end":return e.stop()}},Ke,this)}var at=n(12).checkBEMProps;function ot(e){var t=e.index,n=Object(s.e)(Be(t));return at(o.a,"button",{block:"square",mods:n})}var ct=n(12).checkBEMProps;function ut(e){var t=Object(a.useRef)(),n=Object(a.useState)(null),r=Object(ce.a)(n,2),c=r[0],u=r[1],i={height:"100%",position:"absolute",width:"100%",zIndex:void 0===e.zIndex?1e4:e.zIndex};function s(){!e.isLocked&&c&&(u(null),e.onDragAbort())}return ct(o.a,"div",{style:i,"touch-action":"none",onPointerDown:function(n){return function(n){if(!e.isLocked){var r=it(n,t);u(r),e.onDragUpdate(r,r)}}(n)},onPointerUp:function(t){!e.isLocked&&c&&(u(null),e.onDragEnd())},onPointerMove:function(n){return function(n){c&&e.onDragUpdate(c,it(n,t))}(n)},onPointerCancel:function(){return s()},onPointerLeave:function(){return s()},onPointerOut:function(){return s()},onLostPointerCapture:function(){return s()},ref:t})}function it(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,u=t.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var st=n(12).checkBEMProps;function lt(e){var t=e.active,n=e.gridWidth,r=e.gridHeight,c=e.isLocked,u=e.onDragAbort,i=e.onDragEnd,s=e.onDragUpdate,l=Object(a.useState)(null),d=Object(ce.a)(l,2),f=d[0],b=d[1];if(!t)return st(o.a,o.a.Fragment,null);return st(o.a,ut,{onDragAbort:function(){b(null),u()},onDragEnd:function(){b(null),i()},onDragUpdate:function(e,t){var a={x:e.x*n|0,y:e.y*r|0},o={x:t.x*n|0,y:t.y*r|0};f&&t.x===f.x&&t.y===f.y||(b(t),s(a,o))},isLocked:c})}var dt=n(12).checkBEMProps;function ft(e){var t=e.onClick,n=e.onMouseMove,r=e.zIndex,c=void 0===r?1e4:r,u=Object(a.useRef)(),i={height:"100%",position:"absolute",width:"100%",zIndex:c};return dt(o.a,"div",{onClick:function(e){t(bt(e,u))},onMouseMove:function(e){n(bt(e,u))},ref:u,style:i})}function bt(e,t){var n=t.current.getBoundingClientRect(),r=n.x,a=n.y,o=e.pageX,c=e.pageY,u=t.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var vt=n(12).checkBEMProps;function kt(e){var t=e.active,n=e.gridWidth,r=e.gridHeight,c=e.onDragAbort,u=e.onDragEnd,i=e.onDragUpdate,s=e.isLocked,l=Object(a.useState)(null),d=Object(ce.a)(l,2),f=d[0],b=d[1],v=Object(a.useState)(null),k=Object(ce.a)(v,2),O=k[0],h=k[1];if(!t)return vt(o.a,o.a.Fragment,null);return vt(o.a,ft,{onClick:function(e){if(!s){var t={x:e.x*n|0,y:e.y*r|0};f?t.x===f.x&&t.y===f.y?(b(null),h(null),c()):(b(null),h(null),u()):(b(t),h(t),i(t,t))}},onMouseMove:function(e){if(!s&&f){var t={x:e.x*n|0,y:e.y*r|0};O&&t.x===O.x&&t.y===O.y||(h(t),i(f,t))}}})}var Ot=n(12).checkBEMProps;function ht(e){var t=e.isTutorial,n=void 0!==t&&t,r=Object(s.e)(Re),a=Object(s.e)(qe),c=Object(s.e)(ze),u=Object(s.d)(),i=n?y:x,l=z()(0,i*A).map(function(e){return Ot(o.a,"div",{block:"board",elem:"square",key:e},Ot(o.a,ot,{index:e}))});return Ot(o.a,"div",{block:"board",mods:{tutorial:n}},Ot(o.a,lt,{active:c===_,gridWidth:A,gridHeight:i,onDragEnd:function(){return u(pe())},onDragUpdate:function(e,t){return u(Oe(r,e,t))},onDragAbort:function(){return u(he())},isLocked:a}),Ot(o.a,kt,{active:c===L,gridWidth:A,gridHeight:i,onDragEnd:function(){return u(pe())},onDragUpdate:function(e,t){return u(Oe(r,e,t))},onDragAbort:function(){return u(he())},isLocked:a}),l)}var pt=n(36),gt=n(8);function mt(){var e=Object(a.useRef)(),t=Object(a.useRef)();return Object(a.useEffect)(function(){return window.onkeydown=function(n){n.key===w&&e.current.click(),n.key===D&&t.current.click()},function(){window.onkeydown=null}}),{refLeft:e,refRight:t}}var jt=n(12).checkBEMProps;var Et=Object(s.c)(null,{goBack:gt.c})(function(e){var t=e.goBack,n=mt(),r=n.refLeft,a=n.refRight;if(!Object(s.e)(De))return null;var c=Object(s.e)(we),u=Object(s.e)(Me),i=Object(s.e)(Le),l=Object(s.e)(_e);return jt(o.a,o.a.Fragment,null,jt(o.a,"div",{block:"menu"},jt(o.a,o.a.Fragment,null,jt(o.a,"div",{block:"stat"},jt(o.a,"div",{block:"stat",elem:"title"},"Score"),jt(o.a,"div",{block:"stat",elem:"value"},u)),jt(o.a,"div",{block:"stat"},jt(o.a,"div",{block:"stat",elem:"title"},"Streak"),jt(o.a,"div",{block:"stat",elem:"square"},jt(o.a,"div",{block:"square",mods:{type:l}})),jt(o.a,"div",{block:"stat",elem:"value"},i)),jt(o.a,"div",{block:"stat"},jt(o.a,"div",{block:"stat",elem:"title"},"Highscore"),jt(o.a,"div",{block:"stat",elem:"value"},c)))),jt(o.a,"div",{block:"menu",mods:{main:!0}},jt(o.a,"div",{block:"action",onClick:function(){return t()},ref:r},"Back"),jt(o.a,"div",{block:"action"},jt(o.a,pt.a,{to:R,innerRef:a},"Options"))))}),xt=n(12).checkBEMProps;var yt=function(){var e=Object(s.d)(),t=Object(s.e)(De);return Object(a.useEffect)(function(){e(fe())}),t?xt(o.a,o.a.Fragment,null,xt(o.a,ht,null),xt(o.a,Et,null)):null},At=n(12).checkBEMProps;var St=function(){var e=mt(),t=e.refLeft,n=e.refRight,r=z()(0,x*A).map(function(e){return At(o.a,"div",{block:"board",elem:"square",key:e},At(o.a,"div",{block:"square",mods:{type:1}}))});return At(o.a,o.a.Fragment,null,At(o.a,"div",{block:"board",mods:{title:!0}},At(o.a,"div",{block:"board",elem:"title"},"Quood"),r),At(o.a,"div",{block:"menu",mods:{main:!0}},At(o.a,"div",{block:"action"},At(o.a,pt.a,{to:T,innerRef:t},"Play")),At(o.a,"div",{block:"action"},At(o.a,pt.a,{to:C,innerRef:n},"Tutorial"))))},Tt=n(12).checkBEMProps;var Rt=Object(s.c)(null,{goBack:gt.c})(function(e){var t=e.goBack,n=mt().refLeft,r=Object(s.e)(Ne);return Tt(o.a,o.a.Fragment,null,Tt(o.a,ht,{isTutorial:!0}),Tt(o.a,"div",{block:"menu"},Tt(o.a,"div",{block:"message"},r)),Tt(o.a,"div",{block:"menu",mods:{main:!0}},Tt(o.a,"div",{block:"action",onClick:function(){return t()},ref:n},"Back")))}),Ct=n(12).checkBEMProps;function Mt(e){var t=e.index,n=Object(s.e)(Fe)[t],r=Object(s.d)();return Ct(o.a,"div",{block:"slider"},Ct(o.a,"div",{block:"slider",elem:"square"},Ct(o.a,"div",{block:"square",mods:{type:t}})),Ct(o.a,"div",{block:"slider",elem:"bar-border"},Ct(o.a,ut,{onDragUpdate:function(e,n){r(xe(t,360*n.x|0))},onDragAbort:function(){},onDragEnd:function(){},isLocked:!1}),Ct(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(n/3.6,"%")}})))}var wt=n(12).checkBEMProps;var Dt=Object(s.c)(null,{goBack:gt.c})(function(e){var t=e.goBack,n=mt(),r=n.refLeft,a=n.refRight,c=Object(s.e)(ze),u=z()(0,S).map(function(e){return wt(o.a,Mt,{key:e,index:e})}),i=Object(s.d)();return wt(o.a,o.a.Fragment,null,wt(o.a,"div",{block:"menu"},!M&&wt(o.a,"div",{block:"menu",elem:"block"},wt(o.a,"div",{block:"options-headline"},"Input Mode"),wt(o.a,"button",{block:"action",onClick:function(){return i(Ee())}},c)),wt(o.a,"div",{block:"menu",elem:"block"},wt(o.a,"div",{block:"options-headline"},"Square Colors"),u,wt(o.a,"button",{block:"action",onClick:function(){return i(ye())}},"Reset"))),wt(o.a,"div",{block:"menu",mods:{main:!0}},wt(o.a,"div",{block:"action",onClick:function(){return t()},ref:r},"Back"),wt(o.a,"div",{block:"action",onClick:function(){i(be()),t()},ref:a},"Restart")))}),_t=n(63),Lt=n.n(_t),Ut=n(12).checkBEMProps;var It,Pt=Object(l.a)(),qt=Object(O.b)(),Bt=Object(i.e)((It=qt,Object(h.a)(Object(i.c)({router:Object(k.b)(It),game:j,tutorial:ne,highscore:E,selection:V,options:P}),re)),Object(i.d)(f()("",{slicer:function(e){return function(e){var t=Object(r.a)({},e);return delete t.selection,delete t.tutorial,t}},key:"quood"}),Object(i.a)(Object(v.a)(qt),Pt)));Pt.run(rt);var Ht=n(12).checkBEMProps;u.a.render(Ht(o.a,s.a,{store:Bt},Ht(o.a,k.a,{history:qt},Ht(o.a,function(e){var t=e.children,n=Object(s.e)(Fe),r=Lt()(n.map(function(e,t){return["--hue".concat(t),e]}));return Ut(o.a,"div",{style:r},t)},null,Ht(o.a,b.c,null,Ht(o.a,b.a,{exact:!0,path:"/",render:function(){return Ht(o.a,St,null)}}),Ht(o.a,b.a,{exact:!0,path:T,render:function(){return Ht(o.a,yt,null)}}),Ht(o.a,b.a,{exact:!0,path:C,render:function(){return Ht(o.a,Rt,null)}}),Ht(o.a,b.a,{exact:!0,path:R,render:function(){return Ht(o.a,Dt,null)}}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,t,n){e.exports=n(108)},78:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.67e39ebe.chunk.js.map