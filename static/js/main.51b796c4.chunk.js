(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,n,t){"use strict";t.r(n);var r=t(10),a=t(0),o=t.n(a),c=t(39),u=t.n(c),i=t(27),s=t(3),l=t(64),d=t(59),f=t.n(d),b=t(6),v=t(57),p=t(23),k=t(33);t(78),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=t(41),h=t(22),j=t(110),E={board:null,bucket:[],score:0,streak:null},m=Object(j.a)({START_GAME:function(e,n){var t=n.payload.board;return Object(r.a)({},E,{board:t})},REPLACE_SQUARES:function(e,n){var t=n.payload,r=t.indexes,a=t.values,o=t.size,c=t.bucket,u=Object(h.a)(e.board),i=u[r[0]],s=!0,l=!1,d=void 0;try{for(var f,b=r[Symbol.iterator]();!(s=(f=b.next()).done);s=!0){u[f.value]=a.pop()}}catch(p){l=!0,d=p}finally{try{s||null==b.return||b.return()}finally{if(l)throw d}}var v=e.streak&&e.streak.type===i?e.streak.count+1:1;return{board:u,bucket:c,score:e.score+(0|o)*v,streak:{count:v,type:i}}}},null),y=Object(j.a)({UPDATE_HIGHSCORE:function(e,n){var t=n.payload.score;return Math.max(e,t)}},0),g=7,x=3,w="/",S="/play",A="/options",M="/tutorial",T=navigator.userAgent.includes("KAIOS"),D="SoftLeft",C="SoftRight",R="TOUCH",_="CLICK",U=Array(x).fill(0),P={hues:U,inputMode:T?_:R},I=Object(j.a)({CHANGE_HUE:function(e,n){var t=n.payload,a=t.index,o=t.hue,c=Object(h.a)(e.hues);return c[a]=o,Object(r.a)({},e,{hues:c})},RESET_HUES:function(e){return Object(r.a)({},e,{hues:U})},CHANGE_INPUT_MODE:function(e){return Object(r.a)({},e,{inputMode:e.inputMode===_?R:_})}},P),L=t(32),q=t.n(L),H=t(50),B=t.n(H),N=t(26),G=t.n(N),z=t(60),F=t.n(z),Q=q()(function(e,n,t){return function(e,n){var t=e.x,r=e.y;return{x:t+n.x,y:r+n.y}}(function e(n,t){var r=n.x,a=n.y;return t?e({x:a,y:-r},t-1):{x:r,y:a}}(function(e,n){var t=e.x,r=e.y;return{x:t-n.x,y:r-n.y}}(n,e),t),e)}),W={squares:[],size:0,hidden:!1},V=Object(j.a)({START_GAME:function(){return W},UPDATE_SELECTION:function(e,n){var t=n.payload,r=t.board,a=t.start,o=t.end,c=J(r,a,o);return B()(c.squares,e.squares)?e:c},DISCARD_SELECTION:function(){return W},HIDE_SELECTION:function(e){return e.squares.length<4?W:Object(r.a)({},e,{hidden:!0})},REPLACE_SQUARES:function(){return W},ADVANCE_TUTORIAL:function(){return W}},W),J=function(e,n,t){return Object(r.a)({},W,{size:function(e,n){var t=e.x,r=e.y,a=n.x,o=n.y;return Math.hypot(t-a,r-o)}(n,t),squares:F()(G()(0,4).map(Q(function(e,n,t){var r=e.x,a=e.y;return{x:r*t+n.x*(1-t),y:a*t+n.y*(1-t)}}(n,t,.5),n)).filter(X).filter(Z(e)).filter($(e,Y(e,n))).map(K))})},K=q()(function(e){return e.x+e.y*g}),X=function(e){var n=e.x,t=e.y;return 0<=n&&n<g&&n%1===0&&0<=t&&t<g&&t%1===0},Y=function(e,n){return e[K(n)]},$=q()(function(e,n,t){return Y(e,t)===n}),Z=q()(function(e,n){return Y(e,n)<x}),ee={board:[[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,1,3,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3],[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3],[3,0,3,3,1,3,3,3,2,1,3,3,0,3,3,3,3,3,0,3,3,3,3,3,1,2,1,0,3,2,3,2,2,3,3,3,0,3,1,3,0,3,3,3,3,3,3,3,3]],message:["Hi there. Find a square with corners of the same color\n         and remove it by connecting two opposite corners.","Squares have different sizes and orientations.\n         Remove bigger squares to yield a higher score.","Removing multiple squares of the same color in a row\n         will multiply your score.","The game does not stop if there are no more squares\n         to remove. It\u2019s up to you to call it quits."],step:0},ne=Object(j.a)({ADVANCE_TUTORIAL:function(e){return Object(r.a)({},e,{step:e.step+1})}},ee);function te(e){return e.selection||(e=Object(r.a)({},e,{selection:W,tutorial:ee})),e.options.inputMode||(e.options.inputMode=R),e}var re=t(13),ae=t.n(re),oe=t(14),ce=t(62),ue=t.n(ce),ie=t(7),se=t(109),le=Object(se.a)({REQUEST_ASSURE_GAME:function(){return{}},REQUEST_START_GAME:function(){return{}},START_GAME:function(e){return{board:e}},REPLACE_SQUARES:function(e,n,t,r){return{indexes:e,values:n,size:t,bucket:r}},UPDATE_SELECTION:function(e,n,t){return{board:e,start:n,end:t}},DISCARD_SELECTION:function(){return{}},HIDE_SELECTION:function(){return{}},UPDATE_HIGHSCORE:function(e){return{score:e}},ADVANCE_TUTORIAL:function(){return{}},CHANGE_INPUT_MODE:function(){return{}},CHANGE_HUE:function(e,n){return{index:e,hue:n}},RESET_HUES:function(){return{}}}),de=le.requestAssureGame,fe=le.requestStartGame,be=le.startGame,ve=le.replaceSquares,pe=le.updateSelection,ke=le.discardSelection,Oe=le.hideSelection,he=le.updateHighscore,je=le.advanceTutorial,Ee=le.changeInputMode,me=le.changeHue,ye=le.resetHues,ge=t(17),xe=function(e){return e.selection},we=function(e){return e.game&&e.game.streak},Se=function(e){return e.router.location.pathname===M?e.tutorial.board[e.tutorial.step]:e.game&&e.game.board},Ae=function(e){return e.game&&e.game.bucket},Me=function(e){return e.game&&e.game.score},Te=function(e){return e.highscore},De=Object(ge.a)(function(e){return!!function(e){return e.game}(e)},function(e){return e}),Ce=Object(ge.a)(we,function(e){return e&&e.type}),Re=Object(ge.a)(we,function(e){return e&&e.count}),_e=Object(ge.a)(xe,function(e){return e.squares}),Ue=Object(ge.a)(xe,function(e){return e.size}),Pe=Object(ge.a)(xe,function(e){return e.hidden}),Ie=Object(ge.a)(Pe,function(e){return e}),Le=function(e){return Object(ge.a)(Se,_e,Pe,function(n,t,r){var a=t.includes(e);return{type:n&&n[e],active:a,inactive:t.length>0&&!a,hidden:r&&a,ready:4===t.length&&a}})},qe=function(e){return e.router.location.pathname===M},He=function(e){return e.tutorial.message[e.tutorial.step]},Be=function(e){return e.options},Ne=Object(ge.a)(Be,function(e){return e.inputMode}),Ge=Object(ge.a)(Be,function(e){return e.hues}),ze=ae.a.mark(Xe),Fe=ae.a.mark(Ye),Qe=ae.a.mark($e),We=ae.a.mark(Ze),Ve=ae.a.mark(en),Je=ae.a.mark(nn);function Ke(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;return Object(h.a)(Array(n)).reduce(function(e){var n=Object(oe.a)(e,2),o=n[0],c=n[1];0===(c=Object(h.a)(c)).length&&(c=Object(h.a)(Array((r-t)*a)).map(function(e,n){return n%(r-t)+t}));var u=Math.random()*c.length|0,i=c.splice(u,1)[0];return[Object(h.a)(o).concat([i]),c]},[[],e])}function Xe(){var e,n,t,r,a;return ae.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(ie.c)();case 2:if(e=o.sent,Pe(e)){o.next=5;break}return o.abrupt("return");case 5:return o.next=7,Object(ie.a)(ue.a,500);case 7:if(!qe(e)){o.next=11;break}return o.next=10,Object(ie.b)(je());case 10:return o.abrupt("return");case 11:return n=Ke(Ae(e),4),t=Object(oe.a)(n,2),r=t[0],a=t[1],o.next=14,Object(ie.b)(ve(_e(e),r,Ue(e),a));case 14:case"end":return o.stop()}},ze,this)}function Ye(){var e;return ae.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(ie.c)();case 2:return e=n.sent,n.next=5,Object(ie.b)(he(Me(e)));case 5:case"end":return n.stop()}},Fe,this)}function $e(){var e,n,t;return ae.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=Ke([],Math.pow(g,2)),n=Object(oe.a)(e,1),t=n[0],r.next=3,Object(ie.b)(be(t));case 3:case"end":return r.stop()}},Qe,this)}function Ze(){var e,n,t,r;return ae.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(ie.c)();case 2:if(e=a.sent,De(e)){a.next=7;break}return n=Ke([],Math.pow(g,2)),t=Object(oe.a)(n,1),r=t[0],a.next=7,Object(ie.b)(be(r));case 7:case"end":return a.stop()}},We,this)}function en(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.b)(ke());case 2:case"end":return e.stop()}},Ve,this)}function nn(){return ae.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ie.d)("HIDE_SELECTION",Xe);case 2:return e.next=4,Object(ie.d)("REPLACE_SQUARES",Ye);case 4:return e.next=6,Object(ie.d)("REQUEST_ASSURE_GAME",Ze);case 6:return e.next=8,Object(ie.d)("REQUEST_START_GAME",$e);case 8:return e.next=10,Object(ie.d)("@@router/LOCATION_CHANGE",en);case 10:case"end":return e.stop()}},Je,this)}var tn=t(8),rn=t(12).checkBEMProps;function an(e){var n=e.index,t=Object(s.e)(Le(n));return rn(o.a,"button",{block:"square",mods:t})}var on=t(12).checkBEMProps;function cn(e){var n=Object(a.useRef)(),t=Object(a.useState)(null),r=Object(oe.a)(t,2),c=r[0],u=r[1],i={height:"100%",position:"absolute",width:"100%",zIndex:void 0===e.zIndex?1e4:e.zIndex};function s(){!e.isLocked&&c&&(u(null),e.onDragAbort())}return on(o.a,"div",{style:i,"touch-action":"none",onPointerDown:function(t){return function(t){if(!e.isLocked){var r=un(t,n);u(r),e.onDragUpdate(r,r)}}(t)},onPointerUp:function(n){!e.isLocked&&c&&(u(null),e.onDragEnd())},onPointerMove:function(t){return function(t){c&&e.onDragUpdate(c,un(t,n))}(t)},onPointerCancel:function(){return s()},onPointerLeave:function(){return s()},onPointerOut:function(){return s()},onLostPointerCapture:function(){return s()},ref:n})}function un(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,u=n.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var sn=t(12).checkBEMProps;function ln(e){var n=e.active,t=e.gridSize,r=e.isLocked,c=e.onDragAbort,u=e.onDragEnd,i=e.onDragUpdate,s=Object(a.useState)(null),l=Object(oe.a)(s,2),d=l[0],f=l[1];if(!n)return sn(o.a,o.a.Fragment,null);return sn(o.a,cn,{onDragAbort:function(){f(null),c()},onDragEnd:function(){f(null),u()},onDragUpdate:function(e,n){var r={x:e.x*t|0,y:e.y*t|0},a={x:n.x*t|0,y:n.y*t|0};d&&n.x===d.x&&n.y===d.y||(f(n),i(r,a))},isLocked:r})}var dn=t(12).checkBEMProps;function fn(e){var n=e.onClick,t=e.onMouseMove,r=e.zIndex,c=void 0===r?1e4:r,u=Object(a.useRef)(),i={height:"100%",position:"absolute",width:"100%",zIndex:c};return dn(o.a,"div",{onClick:function(e){n(bn(e,u))},onMouseMove:function(e){t(bn(e,u))},ref:u,style:i})}function bn(e,n){var t=n.current.getBoundingClientRect(),r=t.x,a=t.y,o=e.pageX,c=e.pageY,u=n.current;return{x:(o-r)/u.offsetWidth,y:(c-a)/u.offsetHeight}}var vn=t(12).checkBEMProps;function pn(e){var n=e.active,t=e.gridSize,r=e.onDragAbort,c=e.onDragEnd,u=e.onDragUpdate,i=e.isLocked,s=Object(a.useState)(null),l=Object(oe.a)(s,2),d=l[0],f=l[1],b=Object(a.useState)(null),v=Object(oe.a)(b,2),p=v[0],k=v[1];if(!n)return vn(o.a,o.a.Fragment,null);return vn(o.a,fn,{onClick:function(e){if(!i){var n={x:e.x*t|0,y:e.y*t|0};d?n.x===d.x&&n.y===d.y?(f(null),k(null),r()):(f(null),k(null),c()):(f(n),k(n),u(n,n))}},onMouseMove:function(e){if(!i&&d){var n={x:e.x*t|0,y:e.y*t|0};p&&n.x===p.x&&n.y===p.y||(k(n),u(d,n))}}})}var kn=t(12).checkBEMProps;function On(){var e=Object(s.e)(Se),n=Object(s.e)(Ie),t=Object(s.e)(Ne),r=Object(s.d)(),a=G()(0,Math.pow(g,2)).map(function(e){return kn(o.a,"div",{block:"board",elem:"square",key:e},kn(o.a,an,{index:e}))});return kn(o.a,"div",{block:"board"},kn(o.a,ln,{active:t===R,gridSize:g,onDragEnd:function(){return r(Oe())},onDragUpdate:function(n,t){return r(pe(e,n,t))},onDragAbort:function(){return r(ke())},isLocked:n}),kn(o.a,pn,{active:t===_,gridSize:g,onDragEnd:function(){return r(Oe())},onDragUpdate:function(n,t){return r(pe(e,n,t))},onDragAbort:function(){return r(ke())},isLocked:n}),a)}var hn=t(18),jn=t(12).checkBEMProps;function En(){if(!Object(s.e)(De))return null;var e=Object(s.e)(Te),n=Object(s.e)(Me),t=Object(s.e)(Re),r=Object(s.e)(Ce),a=Object(s.d)();return jn(o.a,o.a.Fragment,null,jn(o.a,"div",{block:"menu"},jn(o.a,o.a.Fragment,null,jn(o.a,"div",{block:"stat"},jn(o.a,"div",{block:"stat",elem:"title"},"Score"),jn(o.a,"div",{block:"stat",elem:"value"},n)),jn(o.a,"div",{block:"stat"},jn(o.a,"div",{block:"stat",elem:"title"},"Streak"),jn(o.a,"div",{block:"stat",elem:"square"},jn(o.a,"div",{block:"square",mods:{type:r}})),jn(o.a,"div",{block:"stat",elem:"value"},t)),jn(o.a,"div",{block:"stat"},jn(o.a,"div",{block:"stat",elem:"title"},"Highscore"),jn(o.a,"div",{block:"stat",elem:"value"},e)))),jn(o.a,"div",{block:"menu",mods:{main:!0}},jn(o.a,"div",{block:"action"},jn(o.a,hn.a,{to:w},"Back")),jn(o.a,"div",{block:"action",onClick:function(){return a(fe())}},"New Game")))}var mn=t(12).checkBEMProps;var yn=Object(s.c)(null,{push:tn.d})(function(e){var n=e.push,t=Object(s.d)();Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===D&&n(w),e.key===C&&t(fe())},function(){window.onkeydown=null}});var r=Object(s.e)(De);return Object(a.useEffect)(function(){t(de())}),r?mn(o.a,o.a.Fragment,null,mn(o.a,On,null),mn(o.a,En,null)):null}),gn=t(12).checkBEMProps;var xn=Object(s.c)(null,{push:tn.d})(function(e){var n=e.push;Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===D&&n(S),e.key===C&&n(M)},function(){window.onkeydown=null}});var t=G()(0,Math.pow(g,2)).map(function(e){return gn(o.a,"div",{block:"board",elem:"square",key:e},gn(o.a,"div",{block:"square",mods:{type:1}}))});return gn(o.a,o.a.Fragment,null,gn(o.a,"div",{block:"board"},gn(o.a,"div",{block:"board",elem:"title"},"Quood"),t),gn(o.a,"div",{block:"menu",mods:{main:!0}},gn(o.a,"div",{block:"action"},gn(o.a,hn.a,{to:S},"Play")),gn(o.a,"div",{block:"action"},gn(o.a,hn.a,{to:A},"Options")),gn(o.a,"div",{block:"action"},gn(o.a,hn.a,{to:M},"Tutorial"))))}),wn=t(12).checkBEMProps;var Sn=Object(s.c)(null,{push:tn.d})(function(e){var n=e.push;Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===D&&n(w)},function(){window.onkeydown=null}});var t=Object(s.e)(He);return wn(o.a,o.a.Fragment,null,wn(o.a,On,null),wn(o.a,"div",{block:"menu",mods:{main:!0}},wn(o.a,"div",{block:"message"},t),wn(o.a,"div",{block:"action"},wn(o.a,hn.a,{to:w},"Back"))))}),An=t(12).checkBEMProps;function Mn(e){var n=e.index,t=Object(s.e)(Ge)[n],r=Object(s.d)();return An(o.a,"div",{block:"slider"},An(o.a,"div",{block:"slider",elem:"square"},An(o.a,"div",{block:"square",mods:{type:n}})),An(o.a,"div",{block:"slider",elem:"bar-border"},An(o.a,cn,{onDragUpdate:function(e,t){r(me(n,360*t.x|0))},onDragAbort:function(){},onDragEnd:function(){},isLocked:!1}),An(o.a,"div",{block:"slider",elem:"bar",style:{width:"".concat(t/3.6,"%")}})))}var Tn=t(12).checkBEMProps;var Dn=Object(s.c)(null,{push:tn.d})(function(e){var n=e.push;Object(a.useEffect)(function(){return window.onkeydown=function(e){e.key===D&&n(w)},function(){window.onkeydown=null}});var t=Object(s.e)(Ne),r=G()(0,x).map(function(e){return Tn(o.a,Mn,{key:e,index:e})}),c=Object(s.d)();return Tn(o.a,o.a.Fragment,null,Tn(o.a,"div",{block:"menu"},!T&&Tn(o.a,"div",{block:"menu",elem:"block"},Tn(o.a,"div",{block:"options-headline"},"Input Mode"),Tn(o.a,"button",{block:"action",onClick:function(){return c(Ee())}},t)),Tn(o.a,"div",{block:"menu",elem:"block"},Tn(o.a,"div",{block:"options-headline"},"Square Colors"),r,Tn(o.a,"button",{block:"action",onClick:function(){return c(ye())}},"Reset"))),Tn(o.a,"div",{block:"menu",mods:{main:!0}},Tn(o.a,"div",{block:"action"},Tn(o.a,hn.a,{to:w},"Back"))))}),Cn=t(63),Rn=t.n(Cn),_n=t(12).checkBEMProps;var Un,Pn=Object(l.a)(),In=Object(k.b)(),Ln=Object(i.e)((Un=In,Object(O.a)(Object(i.c)({router:Object(p.b)(Un),game:m,tutorial:ne,highscore:y,selection:V,options:I}),te)),Object(i.d)(f()("",{slicer:function(e){return function(e){var n=Object(r.a)({},e);return delete n.selection,delete n.tutorial,n}},key:"quood"}),Object(i.a)(Object(v.a)(In),Pn)));Pn.run(nn);var qn=t(12).checkBEMProps;u.a.render(qn(o.a,s.a,{store:Ln},qn(o.a,p.a,{history:In},qn(o.a,function(e){var n=e.children,t=Object(s.e)(Ge),r=Rn()(t.map(function(e,n){return["--hue".concat(n),e]}));return _n(o.a,"div",{style:r},n)},null,qn(o.a,b.c,null,qn(o.a,b.a,{exact:!0,path:w,render:function(){return qn(o.a,xn,null)}}),qn(o.a,b.a,{exact:!0,path:S,render:function(){return qn(o.a,yn,null)}}),qn(o.a,b.a,{exact:!0,path:M,render:function(){return qn(o.a,Sn,null)}}),qn(o.a,b.a,{exact:!0,path:A,render:function(){return qn(o.a,Dn,null)}}))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},65:function(e,n,t){e.exports=t(108)},78:function(e,n,t){}},[[65,1,2]]]);
//# sourceMappingURL=main.51b796c4.chunk.js.map