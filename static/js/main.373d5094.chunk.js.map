{"version":3,"sources":["serviceWorker.js","state/reducers/game.js","state/reducers/highscore.js","config.js","state/reducers/options.js","vectors.js","state/reducers/selection.js","state/reducers/tutorial.js","state/reducers.js","state/actions.js","state/selectors.js","sagas.js","components/Square.js","components/DraggingOverlay.js","components/GridDraggingOverlay.js","components/ClickOverlay.js","components/GridClickOverlay.js","components/Board.js","hooks.js","components/BackLink.js","components/Menu.js","components/Game.js","components/Title.js","components/Tutorial.js","components/HueSlider.js","components/Options.js","index.js"],"names":["Boolean","window","location","hostname","match","defaultGame","board","bucket","score","streak","gameReducers","handleActions","START_GAME","_","payload","REPLACE_SQUARES","game","indexes","values","size","type","pop","streakCount","count","highscoreReducers","UPDATE_HIGHSCORE","highscore","Math","max","IS_KAY_OS","navigator","userAgent","includes","defaultHues","Array","fill","defaultOptions","hues","inputMode","optionsReducers","CHANGE_HUE","options","index","hue","RESET_HUES","CHANGE_INPUT_MODE","tween","r","x","y","rotate90Around","curry","center","v","times","add","rotate90","sub","distance","x2","y2","hypot","defaultSelection","squares","hidden","selectionReducers","UPDATE_SELECTION","selection","start","end","newSelection","getSelection","equals","DISCARD_SELECTION","HIDE_SELECTION","length","ADVANCE_TUTORIAL","uniq","range","map","filter","isValid","isValidType","typeEquals","getType","toIndex","defaultTutorial","message","step","tutorialReducers","START_TUTORIAL","tutorial","patchReducer","state","createActions","REQUEST_ASSURE_GAME","REQUEST_START_GAME","requestAssureGame","requestStartGame","startGame","replaceSquares","updateSelection","discardSelection","hideSelection","updateHighscore","startTutorial","advanceTutorial","changeInputMode","changeHue","resetHues","getStreak","getBoard","router","pathname","getBucket","getScore","getHighscore","isGameActive","createSelector","getGame","active","getStreakType","getStreakCount","getSelectedSquares","getSelectionSize","isSelectionHidden","isBoardLocked","isTutorial","getTutorialMessage","getOptions","getInputMode","getHues","onHideSelection","onReplaceSquares","onRequestStartGame","onRequestAssureGame","onLocationChange","getRandom","min","reduce","random","value","splice","select","call","delay","put","BOARD_HEIGHT","takeEvery","Square","square","useSelector","inactive","ready","getSquare","style","block","mods","DraggingOverlay","isLocked","onDragUpdate","onDragEnd","onDragAbort","zIndex","ref","useRef","useState","dragStart","setDragStart","height","position","width","abortDragging","touch-action","onPointerDown","event","getPosition","startDragging","onPointerUp","onPointerMove","updatePosition","onPointerCancel","onPointerLeave","onPointerOut","onLostPointerCapture","current","getBoundingClientRect","offsetX","offsetY","pageX","pageY","offsetWidth","offsetHeight","GridDraggingOverlay","gridWidth","gridHeight","lastEnd","setLastEnd","gridStart","gridEnd","ClickOverlay","onClick","onMouseMove","GridClickOverlay","setStart","setEnd","gridPosition","Board","getIsBoardLocked","dispatch","useDispatch","elem","key","useKaiOsSoftwareKeys","refLeft","refRight","useEffect","onkeydown","click","connect","goBack","children","props","preventDefault","Menu","getIsGameActive","streakType","to","innerRef","Game","isActive","Title","squareStyle","title","HueSlider","pos","sliders","history","sagaMiddleware","createSagaMiddleware","createHashHistory","store","createStore","reduceReducers","combineReducers","connectRouter","compose","persistState","slicer","paths","persist","applyMiddleware","routerMiddleware","run","saga","ReactDOM","render","exact","path","document","getElementById","serviceWorker","then","registration","unregister"],"mappings":"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","file":"static/js/main.373d5094.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { handleActions } from 'redux-actions';\n\nconst defaultGame = {\n    board: null,\n    bucket: [],\n    score: 0,\n    streak: null,\n};\n\nconst gameReducers = handleActions({\n    START_GAME: (_, {payload: {board}}) => {\n        return {\n            ...defaultGame,\n            board,\n        };\n    },\n    REPLACE_SQUARES: (game, {payload: {indexes, values, size, bucket}}) => {\n        const board = [...game.board];\n        const type = board[indexes[0]];\n\n        for (const index of indexes) {\n            board[index] = values.pop();\n        }\n\n        const streakCount = game.streak && game.streak.type === type ? game.streak.count + 1 : 1;\n        const score = game.score + (size | 0) * streakCount;\n        const streak = {\n            count: streakCount,\n            type,\n        };\n\n        return {\n            board,\n            bucket,\n            score,\n            streak,\n        }\n    }\n}, null);\n\nexport default gameReducers;\n","import { handleActions } from 'redux-actions';\n\nconst highscoreReducers = handleActions({\n    UPDATE_HIGHSCORE: (highscore, { payload: { score } }) => {\n        return Math.max(highscore, score);\n    }\n}, 0);\n\nexport default highscoreReducers;\n","// Dimensions and types exist to have named constants. Changing them requires more work.\nexport const BOARD_HEIGHT = 7;\nexport const BOARD_HEIGHT_TUTORIAL = 5;\nexport const BOARD_WIDTH = 7;\nexport const SQUARE_TYPES = 3;\n\nexport const TITLE_URL = '/';\nexport const GAME_URL = '/play';\nexport const OPTIONS_URL = '/options';\nexport const TUTORIAL_URL = '/tutorial';\n\nexport const IS_KAY_OS = navigator.userAgent.includes('KAIOS');\nexport const KEY_SOFT_LEFT = 'SoftLeft';\nexport const KEY_SOFT_RIGHT = 'SoftRight';\n","import { handleActions } from 'redux-actions';\nimport { SQUARE_TYPES, IS_KAY_OS } from '../../config';\n\nexport const INPUT_MODE_TOUCH = 'TOUCH';\nexport const INPUT_MODE_CLICK = 'CLICK';\n\nexport const defaultHues = Array(SQUARE_TYPES).fill(0);\n\nexport const defaultOptions = {\n    hues: defaultHues,\n    inputMode: IS_KAY_OS ? INPUT_MODE_CLICK : INPUT_MODE_TOUCH\n};\n\nconst optionsReducers = handleActions({\n    CHANGE_HUE: (options, { payload: { index, hue } }) => {\n        const hues = [...options.hues];\n        hues[index] = hue;\n\n        return {\n            ...options,\n            hues\n        };\n    },\n    RESET_HUES: (options) => {\n        return {\n            ...options,\n            hues: defaultHues,\n        };\n    },\n    CHANGE_INPUT_MODE: (options) => {\n        return {\n            ...options,\n            inputMode:\n                options.inputMode === INPUT_MODE_CLICK\n                    ? INPUT_MODE_TOUCH\n                    : INPUT_MODE_CLICK\n        }\n    }\n}, defaultOptions);\n\nexport default optionsReducers;\n","import curry from 'ramda/src/curry';\n\nexport const add = ({x, y}, {x: x2, y: y2}) => ({x: x + x2, y: y + y2});\n\nexport const sub = ({x, y}, {x: x2, y: y2}) => ({x: x - x2, y: y - y2});\n\nexport const tween = ({x, y}, {x: x2, y: y2}, r) => ({x: x * r + x2 * (1 - r), y: y * r + y2 * (1 - r)});\n\nexport const rotate90 = ({x, y}, times) => times ? rotate90({x: y, y: -x}, times - 1) : {x, y};\n\nexport const rotate90Around = curry((center, v, times) => add(rotate90(sub(v, center), times), center));\n\nexport const distance = ({x, y}, {x: x2, y: y2}) => Math.hypot(x - x2, y - y2);\n","import curry from 'ramda/src/curry';\nimport equals from 'ramda/src/equals';\nimport range from 'ramda/src/range';\nimport uniq from 'ramda/src/uniq';\nimport { handleActions } from 'redux-actions';\nimport { SQUARE_TYPES, BOARD_WIDTH } from '../../config';\nimport { distance, rotate90Around, tween } from '../../vectors';\n\nexport const defaultSelection = {\n    squares: [],\n    size: 0,\n    hidden: false,\n};\n\nexport const selectionReducers = handleActions({\n    START_GAME: () => {\n        return defaultSelection;\n    },\n    UPDATE_SELECTION: (selection, {payload: {board, start, end}}) => {\n        const newSelection = getSelection(board, start, end);\n\n        if (equals(newSelection.squares, selection.squares)) {\n            return selection;\n        }\n\n        return newSelection;\n    },\n    DISCARD_SELECTION: () => {\n        return defaultSelection;\n    },\n    HIDE_SELECTION: (selection) => {\n        if (selection.squares.length < 4) {\n            return defaultSelection;\n        }\n\n        return {\n            ...selection,\n            hidden: true,\n        };\n    },\n    REPLACE_SQUARES: () => {\n        return defaultSelection;\n    },\n    ADVANCE_TUTORIAL: () => {\n        return defaultSelection;\n    }\n}, defaultSelection);\n\nexport default selectionReducers;\n\nconst getSelection = (board, start, end) => ({\n    ...defaultSelection,\n    size: distance(start, end),\n    squares: uniq(\n        range(0, 4)\n            .map(rotate90Around(tween(start, end, 0.5), start))\n            .filter(isValid(board))\n            .filter(isValidType(board))\n            .filter(typeEquals(board, getType(board, start)))\n            .map(toIndex)\n    ),\n});\n\nconst toIndex = curry(({x, y}) => x + y * BOARD_WIDTH);\nconst isValid = curry((board, {x, y}) =>\n    0 <= x && x < BOARD_WIDTH && x % 1 === 0 &&\n    0 <= y && y < board.length / BOARD_WIDTH && y % 1 === 0);\nconst getType = (board, v) => board[toIndex(v)];\nconst typeEquals = curry((board, type, v) => getType(board, v) === type);\nconst isValidType = curry((board, v) => getType(board, v) < SQUARE_TYPES);\n","import { handleActions } from 'redux-actions';\n\nexport const defaultTutorial = {\n    board: [\n        [\n            3, 3, 3, 3, 3, 3, 3,\n            3, 3, 1, 3, 1, 3, 3,\n            3, 3, 3, 3, 3, 3, 3,\n            3, 3, 1, 3, 1, 3, 3,\n            3, 3, 3, 3, 3, 3, 3,\n        ],\n        [\n            3, 3, 0, 3, 3, 3, 3,\n            3, 3, 3, 3, 3, 0, 3,\n            3, 3, 3, 3, 3, 3, 3,\n            3, 0, 3, 3, 3, 3, 3,\n            3, 3, 3, 3, 0, 3, 3,\n        ],\n        [\n            3, 3, 3, 3, 3, 3, 3,\n            3, 3, 3, 3, 3, 3, 3,\n            3, 3, 0, 0, 3, 3, 3,\n            3, 3, 0, 0, 3, 3, 3,\n            3, 3, 3, 3, 3, 3, 3,\n        ],\n        [\n            3, 0, 3, 3, 3, 1, 3,\n            3, 2, 1, 3, 3, 3, 0,\n            3, 3, 3, 3, 3, 0, 3,\n            3, 3, 3, 3, 1, 2, 1,\n            3, 2, 1, 3, 2, 2, 3,\n        ],\n    ],\n    message: [\n        `Welcome!\n         Find a square with corners of the same color and remove it by connecting two opposite corners.`,\n        `Squares have different sizes and orientations. Removing bigger squares yields a higher score.`,\n        `Removing multiple squares of the same color in a row  will multiply your score.`,\n        `The game won’t tell you when there aren’t any squares left to remove.\n         You have to call it quits.\n         Enjoy!`\n    ],\n    step: 0\n}\n\nconst tutorialReducers = handleActions({\n    START_TUTORIAL: (tutorial) => {\n        return {\n            ...tutorial,\n            step: 0\n        };\n    },\n    ADVANCE_TUTORIAL: (tutorial) => {\n        return {\n            ...tutorial,\n            step: tutorial.step + 1\n        };\n    }\n}, defaultTutorial);\n\nexport default tutorialReducers;\n","import { connectRouter } from 'connected-react-router';\nimport reduceReducers from 'reduce-reducers';\nimport { combineReducers } from 'redux';\nimport gameReducers from './reducers/game';\nimport highscoreReducers from './reducers/highscore';\nimport optionsReducers, { INPUT_MODE_TOUCH } from './reducers/options';\nimport selectionReducers, { defaultSelection } from './reducers/selection';\nimport tutorialReducers, { defaultTutorial } from './reducers/tutorial';\n\nfunction patchReducer(state) {\n    if (!state.selection) {\n        state = {\n            ...state,\n            selection: defaultSelection,\n            tutorial: defaultTutorial,\n        }\n    }\n\n    if (!state.options.inputMode) {\n        state.options.inputMode = INPUT_MODE_TOUCH;\n    }\n\n    return state;\n}\n\nexport default (history) => reduceReducers(\n    combineReducers({\n        router: connectRouter(history),\n        game: gameReducers,\n        tutorial: tutorialReducers,\n        highscore: highscoreReducers,\n        selection: selectionReducers,\n        options: optionsReducers,\n    }),\n    patchReducer,\n);\n","import { createActions } from 'redux-actions';\n\nexport const {\n    requestAssureGame,\n    requestStartGame,\n    startGame,\n    replaceSquares,\n    updateSelection,\n    discardSelection,\n    hideSelection,\n    updateHighscore,\n    startTutorial,\n    advanceTutorial,\n    changeInputMode,\n    changeHue,\n    resetHues,\n} = createActions({\n    REQUEST_ASSURE_GAME: () => ({\n    }),\n    REQUEST_START_GAME: () => ({\n    }),\n    START_GAME: (board) => ({\n        board,\n    }),\n    REPLACE_SQUARES: (indexes, values, size, bucket) => ({\n        indexes,\n        values,\n        size,\n        bucket,\n    }),\n    UPDATE_SELECTION: (board, start, end) => ({\n        board,\n        start,\n        end,\n    }),\n    DISCARD_SELECTION: () => ({}),\n    HIDE_SELECTION: () => ({}),\n    UPDATE_HIGHSCORE: (score) => ({\n        score\n    }),\n    START_TUTORIAL: () => ({\n    }),\n    ADVANCE_TUTORIAL: () => ({\n    }),\n    CHANGE_INPUT_MODE: () => ({\n    }),\n    CHANGE_HUE: (index, hue) => ({\n        index,\n        hue,\n    }),\n    RESET_HUES: () => ({}),\n});\n","import { createSelector } from \"reselect\";\nimport { TUTORIAL_URL } from \"../config\";\n\nconst getSelection = (state) => state.selection;\nconst getStreak = (state) => state.game && state.game.streak;\n\nexport const getGame = (state) => state.game;\nexport const getBoard = (state) => {\n    if (state.router.location.pathname === TUTORIAL_URL) {\n        return state.tutorial.board[state.tutorial.step];\n    }\n\n    return state.game && state.game.board;\n}\nexport const getBucket = (state) => state.game && state.game.bucket;\nexport const getScore = (state) => state.game && state.game.score;\nexport const getHighscore = (state) => state.highscore;\n\n// game\n\nexport const isGameActive = createSelector(\n    (state) => !!getGame(state),\n    (active) => active\n);\n\n// stats\n\nexport const getStreakType = createSelector(\n    getStreak,\n    (streak) => streak && streak.type\n);\n\nexport const getStreakCount = createSelector(\n    getStreak,\n    (streak) => streak && streak.count\n);\n\n// board\n\nexport const getSelectedSquares = createSelector(\n    getSelection,\n    (selection) => selection.squares\n);\n\nexport const getSelectionSize = createSelector(\n    getSelection,\n    (selection) => selection.size\n);\n\nexport const isSelectionHidden = createSelector(\n    getSelection,\n    (selection) => selection.hidden,\n);\n\nexport const isBoardLocked = createSelector(\n    isSelectionHidden,\n    (hidden) => hidden\n);\n\nexport const getSquare = (index) => createSelector(\n    getBoard,\n    getSelectedSquares,\n    isSelectionHidden,\n    (board, squares, hidden) => {\n        const active = squares.includes(index);\n\n        return {\n            type: board && board[index],\n            active,\n            inactive: squares.length > 0 && !active,\n            hidden: hidden && active,\n            ready: squares.length === 4 && active,\n        };\n    }\n);\n\n// tutorial\n\nexport const isTutorial = (state) => state.router.location.pathname === TUTORIAL_URL;\n\nexport const getTutorialMessage = (state) => state.tutorial.message[state.tutorial.step];\n\n// options\n\nconst getOptions = (state) => state.options;\n\nexport const getInputMode = createSelector(\n    getOptions,\n    (options) => options.inputMode\n)\n\nexport const getHues = createSelector(\n    getOptions,\n    (options) => options.hues\n)\n","import delay from 'delay';\nimport { call, put, select, takeEvery } from 'redux-saga/effects';\nimport { replaceSquares, startGame, updateHighscore, advanceTutorial, discardSelection, startTutorial } from './state/actions';\nimport { BOARD_HEIGHT, BOARD_WIDTH, TUTORIAL_URL } from './config';\nimport { isSelectionHidden, getBucket, getScore, getSelectionSize, getSelectedSquares, isGameActive, isTutorial } from './state/selectors';\n\nfunction getRandom(bucket, count, min=0, max=3, size=2) {\n    return [...Array(count)].reduce(([values, bucket]) => {\n        bucket = [...bucket];\n\n        if (bucket.length === 0) {\n            bucket = [...Array((max - min) * size)].map((_, index) => {\n                return index % (max - min) + min;\n            });\n        }\n\n        const index = Math.random() * bucket.length | 0;\n        const value = bucket.splice(index, 1)[0];\n\n        return [[...values, value], bucket];\n    }, [[], bucket]);\n}\n\nfunction* onHideSelection() {\n    const state = yield select();\n\n    if (!isSelectionHidden(state)) {\n        return;\n    }\n\n    yield call(delay, 500);\n\n    if (isTutorial(state)) {\n        yield put(advanceTutorial());\n\n        return;\n    }\n\n    const [values, bucket] = getRandom(getBucket(state), 4);\n\n    yield put(replaceSquares(getSelectedSquares(state), values, getSelectionSize(state), bucket));\n}\n\nfunction* onReplaceSquares() {\n    const state = yield select();\n\n    yield put(updateHighscore(getScore(state)));\n}\n\nfunction* onRequestStartGame() {\n    const [values] = getRandom([], BOARD_HEIGHT * BOARD_WIDTH);\n\n    yield put(startGame(values));\n}\n\nfunction* onRequestAssureGame() {\n    const state = yield select();\n\n    if (!isGameActive(state)) {\n        const [values] = getRandom([], BOARD_HEIGHT * BOARD_WIDTH);\n\n        yield put(startGame(values));\n    }\n}\n\nfunction* onLocationChange({ payload }) {\n    if (payload.location.pathname === TUTORIAL_URL) {\n        yield put(startTutorial());\n    }\n\n    yield put(discardSelection());\n}\n\nexport default function* () {\n    yield takeEvery('HIDE_SELECTION', onHideSelection);\n    yield takeEvery('REPLACE_SQUARES', onReplaceSquares);\n    yield takeEvery('REQUEST_ASSURE_GAME', onRequestAssureGame);\n    yield takeEvery('REQUEST_START_GAME', onRequestStartGame);\n    yield takeEvery('@@router/LOCATION_CHANGE', onLocationChange);\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { getSquare, getHues } from '../state/selectors';\n\nexport default function Square({index}) {\n    const square = useSelector(getSquare(index));\n    const hues = useSelector(getHues);\n    const style = {\n        filter: `hue-rotate(${hues[square.type]}deg)`\n    };\n\n    return <button block=\"square\" mods={square} style={style}></button>;\n}\n","import React, {useRef, useState} from 'react';\n\nexport function DraggingOverlay({\n    isLocked = false,\n    onDragUpdate,\n    onDragEnd = () => {},\n    onDragAbort = () => {},\n    zIndex = 10000\n }) {\n    const ref = useRef();\n    const [dragStart, setDragStart] = useState(null);\n\n    const style = {\n        height: '100%',\n        position: 'absolute',\n        width: '100%',\n        zIndex,\n    };\n\n    function startDragging(event) {\n        if (isLocked) {\n            return;\n        }\n\n        const position = getPosition(event, ref);\n\n        setDragStart(position);\n        onDragUpdate(position, position);\n    }\n\n    function finishDragging() {\n        if (isLocked || !dragStart) {\n            return;\n        }\n\n        setDragStart(null);\n        onDragEnd();\n    }\n\n    function abortDragging() {\n        if (isLocked || !dragStart) {\n            return;\n        }\n\n        setDragStart(null);\n        onDragAbort();\n    }\n\n    function updatePosition(event) {\n        if (dragStart) {\n            onDragUpdate(dragStart, getPosition(event, ref));\n        }\n    }\n\n    return (\n        <div\n            style={style}\n            touch-action=\"none\"\n            onPointerDown={(event) => startDragging(event) }\n            onPointerUp={(event) => finishDragging(event) }\n            onPointerMove={(event) => updatePosition(event)}\n            onPointerCancel={() => abortDragging()}\n            onPointerLeave={() => abortDragging()}\n            onPointerOut={() => abortDragging()}\n            onLostPointerCapture={() => abortDragging()}\n            ref={ref}\n        >\n        </div>\n    );\n}\n\nfunction getPosition(event, ref) {\n    const {x: offsetX, y: offsetY} = ref.current.getBoundingClientRect();\n    const {pageX, pageY} = event;\n    const {offsetWidth, offsetHeight} = ref.current;\n    const x = (pageX - offsetX) / offsetWidth;\n    const y = (pageY - offsetY) / offsetHeight;\n\n    return {x, y};\n}\n","import React, { useState } from 'react';\nimport { DraggingOverlay } from './DraggingOverlay';\n\nexport function GridDraggingOverlay({\n    gridWidth,\n    gridHeight,\n    isLocked,\n    onDragAbort,\n    onDragEnd,\n    onDragUpdate\n}) {\n    const [lastEnd, setLastEnd] = useState(null);\n\n    function dragUpdate(start, end) {\n        const gridStart = {\n            x: start.x * gridWidth | 0,\n            y: start.y * gridHeight | 0,\n        };\n        const gridEnd = {\n            x: end.x * gridWidth | 0,\n            y: end.y * gridHeight | 0,\n        };\n\n        if (lastEnd && end.x === lastEnd.x && end.y === lastEnd.y) {\n            return;\n        }\n\n        setLastEnd(end);\n\n        onDragUpdate(gridStart, gridEnd);\n    }\n\n    function dragAbort() {\n        setLastEnd(null);\n\n        onDragAbort();\n    }\n\n    function dragEnd() {\n        setLastEnd(null);\n\n        onDragEnd();\n    }\n\n    return (\n        <DraggingOverlay\n            onDragAbort={dragAbort}\n            onDragEnd={dragEnd}\n            onDragUpdate={dragUpdate}\n            isLocked={isLocked}\n        />\n    );\n}\n","import React, { useRef } from 'react';\n\nexport default function ClickOverlay({\n    onClick,\n    onMouseMove = () => {},\n    zIndex = 10000\n}) {\n    const ref = useRef();\n\n    const style = {\n        height: '100%',\n        position: 'absolute',\n        width: '100%',\n        zIndex,\n    };\n\n    function click(event) {\n        onClick(getPosition(event, ref));\n    }\n\n    function mouseMove(event) {\n        onMouseMove(getPosition(event, ref));\n    }\n\n    return <div\n        onClick={click}\n        onMouseMove={mouseMove}\n        ref={ref}\n        style={style}\n    ></div>;\n}\n\nfunction getPosition(event, ref) {\n    const {x: offsetX, y: offsetY} = ref.current.getBoundingClientRect();\n    const {pageX, pageY} = event;\n    const {offsetWidth, offsetHeight} = ref.current;\n    const x = (pageX - offsetX) / offsetWidth;\n    const y = (pageY - offsetY) / offsetHeight;\n\n    return {x, y};\n}\n","import React, { useState } from 'react';\nimport ClickOverlay from './ClickOverlay';\n\nexport default function GridClickOverlay({\n    gridWidth,\n    gridHeight,\n    onDragAbort,\n    onDragEnd,\n    onDragUpdate,\n    isLocked\n}) {\n    const [start, setStart] = useState(null);\n    const [end, setEnd] = useState(null);\n\n    function click(position) {\n        if (isLocked) {\n            return;\n        }\n\n        const gridPosition = {\n            x: position.x * gridWidth | 0,\n            y: position.y * gridHeight | 0,\n        };\n\n        if (!start) {\n            setStart(gridPosition);\n            setEnd(gridPosition);\n            onDragUpdate(gridPosition, gridPosition);\n        } else if (gridPosition.x === start.x && gridPosition.y === start.y) {\n            setStart(null);\n            setEnd(null);\n            onDragAbort();\n        } else {\n            setStart(null);\n            setEnd(null);\n            onDragEnd();\n        }\n    }\n\n    function mouseMove(position) {\n        if (isLocked || !start) {\n            return;\n        }\n\n        const gridPosition = {\n            x: position.x * gridWidth | 0,\n            y: position.y * gridHeight | 0,\n        };\n\n        if (end && gridPosition.x === end.x && gridPosition.y === end.y) {\n            return;\n        }\n\n        setEnd(gridPosition);\n\n        onDragUpdate(start, gridPosition);\n    }\n\n    return <ClickOverlay\n        onClick={click}\n        onMouseMove={mouseMove}\n    ></ClickOverlay>;\n}\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport range from 'ramda/src/range';\nimport { updateSelection, hideSelection, discardSelection } from '../state/actions';\nimport { isBoardLocked as getIsBoardLocked, getBoard, getInputMode } from '../state/selectors';\nimport { BOARD_WIDTH, BOARD_HEIGHT_TUTORIAL, BOARD_HEIGHT } from '../config';\nimport Square from './Square';\nimport { GridDraggingOverlay } from './GridDraggingOverlay';\nimport { INPUT_MODE_TOUCH, INPUT_MODE_CLICK } from '../state/reducers/options';\nimport GridClickOverlay from './GridClickOverlay';\n\nexport default function Board({ isTutorial = false }) {\n    const board = useSelector(getBoard);\n    const isBoardLocked = useSelector(getIsBoardLocked);\n    const inputMode = useSelector(getInputMode);\n    const dispatch = useDispatch();\n\n    const height = isTutorial ? BOARD_HEIGHT_TUTORIAL : BOARD_HEIGHT;\n\n    const squares = range(0, height * BOARD_WIDTH).map((index) => {\n        return (\n            <div block=\"board\" elem=\"square\" key={index}>\n                <Square\n                    index={index}\n                />\n            </div>\n        );\n    });\n\n    return (\n        <div block=\"board\" mods={{ tutorial: isTutorial }}>\n            {inputMode === INPUT_MODE_TOUCH && <GridDraggingOverlay\n                gridWidth={BOARD_WIDTH}\n                gridHeight={height}\n                onDragEnd={() => dispatch(hideSelection())}\n                onDragUpdate={(start, end) => dispatch(updateSelection(board, start, end))}\n                onDragAbort={() => dispatch(discardSelection())}\n                isLocked={isBoardLocked}\n            />}\n            {inputMode === INPUT_MODE_CLICK && <GridClickOverlay\n                gridWidth={BOARD_WIDTH}\n                gridHeight={height}\n                onDragEnd={() => dispatch(hideSelection())}\n                onDragUpdate={(start, end) => dispatch(updateSelection(board, start, end))}\n                onDragAbort={() => dispatch(discardSelection())}\n                isLocked={isBoardLocked}\n            >\n            </GridClickOverlay>}\n\n            {squares}\n        </div>\n    );\n}\n","import { useEffect, useRef } from \"react\";\nimport { KEY_SOFT_LEFT, KEY_SOFT_RIGHT } from \"./config\";\n\nexport function useKaiOsSoftwareKeys() {\n    const refLeft = useRef();\n    const refRight = useRef();\n\n    useEffect(() => {\n        window.onkeydown = (event) => {\n            if (event.key === KEY_SOFT_LEFT) {\n                refLeft.current.click();\n            }\n            if (event.key === KEY_SOFT_RIGHT) {\n                refRight.current.click();\n            }\n        };\n\n        return () => {\n            window.onkeydown = null;\n        };\n    });\n\n    return { refLeft, refRight };\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { goBack } from 'connected-react-router';\nimport { IS_KAY_OS } from '../config';\n\nfunction BackLink({\n    children,\n    goBack,\n    onClick = () => {},\n    ...props\n}) {\n    const goBackKaiOs = (event) => {\n        onClick();\n\n        if (IS_KAY_OS) {\n            goBack();\n            event.preventDefault();\n        }\n    };\n\n    return <Link {...props} onClick={goBackKaiOs}>\n        {children || 'Back'}\n    </Link>\n}\n\nexport default connect(null, { goBack })(BackLink);\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport {\n    isGameActive as getIsGameActive,\n    getScore,\n    getHighscore,\n    getStreakType,\n    getStreakCount,\n    getHues\n} from '../state/selectors';\nimport { OPTIONS_URL, IS_KAY_OS, TITLE_URL } from '../config';\nimport { useKaiOsSoftwareKeys } from '../hooks';\nimport BackLink from './BackLink';\n\nfunction Menu() {\n    const { refLeft, refRight } = useKaiOsSoftwareKeys();\n    const isGameActive = useSelector(getIsGameActive);\n    const highscore = useSelector(getHighscore);\n    const score = useSelector(getScore);\n    const streakCount = useSelector(getStreakCount);\n    const streakType = useSelector(getStreakType);\n    const hues = useSelector(getHues);\n\n    if (!isGameActive) {\n        return null;\n    }\n\n    const style = {\n        filter: `hue-rotate(${hues[streakType]}deg)`\n    };\n\n    function getStats() {\n        return (<>\n            <div block=\"stat\">\n                <div block=\"stat\" elem=\"title\">Score</div>\n                <div block=\"stat\" elem=\"value\">{score}</div>\n            </div>\n            <div block=\"stat\">\n                <div block=\"stat\" elem=\"title\">Streak</div>\n                {streakCount > 0 && <>\n                    <div block=\"stat\" elem=\"square\">\n                        <div block=\"square\" mods={{type: streakType}} style={style}></div>\n                    </div>\n                    <div block=\"stat\" elem=\"value\">{streakCount}</div>\n                </>}\n            </div>\n            <div block=\"stat\">\n                <div block=\"stat\" elem=\"title\">Highscore</div>\n                <div block=\"stat\" elem=\"value\">{highscore}</div>\n            </div>\n        </>);\n    }\n\n    return (<>\n        <div block=\"menu\">\n            {getStats()}\n        </div>\n        <div block=\"main-menu\">\n            <div block=\"main-menu\" elem=\"action\">\n                <BackLink to={TITLE_URL} innerRef={refLeft} />\n            </div>\n            <div block=\"main-menu\" elem=\"action\" mods={{inactive: !IS_KAY_OS}}>\n                SELECT\n            </div>\n            <div block=\"main-menu\" elem=\"action\">\n                <Link to={OPTIONS_URL} innerRef={refRight}>Options</Link>\n            </div>\n        </div>\n    </>);\n}\n\nexport default Menu;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { requestAssureGame } from '../state/actions';\nimport { isGameActive } from '../state/selectors';\nimport Board from './Board';\nimport Menu from './Menu';\n\nfunction Game() {\n    const dispatch = useDispatch();\n    const isActive = useSelector(isGameActive);\n\n    useEffect(() => {\n        dispatch(requestAssureGame());\n    });\n\n    if (!isActive) {\n        return null;\n    }\n\n    return (<>\n        <Board />\n        <Menu />\n    </>);\n}\n\nexport default Game;\n","import range from 'ramda/src/range';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n    GAME_URL,\n    TUTORIAL_URL,\n    BOARD_HEIGHT,\n    BOARD_WIDTH,\n    IS_KAY_OS\n} from '../config';\nimport { useKaiOsSoftwareKeys } from '../hooks';\nimport { useSelector } from 'react-redux';\nimport { getHues } from '../state/selectors';\n\nfunction Title() {\n    const { refLeft, refRight } = useKaiOsSoftwareKeys();\n    const hues = useSelector(getHues);\n    const squareStyle = {\n        filter: `hue-rotate(${hues[1]}deg)`\n    };\n\n    const squares = range(0, BOARD_HEIGHT * BOARD_WIDTH).map((index) => {\n        return (\n            <div block=\"board\" elem=\"square\" key={index}>\n                <div\n                    block=\"square\"\n                    mods={{type: 1}}\n                    style={squareStyle}\n                ></div>\n            </div>\n        );\n    });\n\n    return (<>\n        <div block=\"board\" mods={{ title: true }}>\n            <div block=\"board\" elem=\"title\">Quood</div>\n\n            {squares}\n        </div>\n\n        <div block=\"main-menu\">\n            <div block=\"main-menu\" elem=\"action\">\n                <Link to={GAME_URL} innerRef={refLeft}>Play</Link>\n            </div>\n            <div block=\"main-menu\" elem=\"action\" mods={{inactive: !IS_KAY_OS}}>\n                SELECT\n            </div>\n            <div block=\"main-menu\" elem=\"action\">\n                <Link to={TUTORIAL_URL} innerRef={refRight}>Tutorial</Link>\n            </div>\n        </div>\n    </>);\n}\n\nexport default Title;\n","import React from 'react';\nimport { useSelector, connect } from 'react-redux';\nimport { goBack } from 'connected-react-router';\nimport { getTutorialMessage } from '../state/selectors';\nimport Board from './Board';\nimport { useKaiOsSoftwareKeys } from '../hooks';\nimport { IS_KAY_OS, TITLE_URL } from '../config';\nimport BackLink from './BackLink';\n\nfunction Tutorial({ goBack }) {\n    const { refLeft } = useKaiOsSoftwareKeys();\n\n    const message = useSelector(getTutorialMessage);\n\n    return (<>\n        <Board isTutorial={true} />\n        <div block=\"menu\">\n            <div block=\"message\">{message}</div>\n        </div>\n        <div block=\"main-menu\">\n            <div block=\"main-menu\" elem=\"action\">\n                <BackLink to={TITLE_URL} innerRef={refLeft} />\n            </div>\n            <div block=\"main-menu\" elem=\"action\" mods={{inactive: !IS_KAY_OS}}>\n                SELECT\n            </div>\n            <div\n                block=\"main-menu\"\n                elem=\"action\"\n                mods={{inactive: true}}\n            >\n            </div>\n        </div>\n    </>);\n}\n\nexport default connect(null, { goBack })(Tutorial);\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getHues, getInputMode } from '../state/selectors';\nimport { changeHue } from '../state/actions';\nimport { DraggingOverlay } from './DraggingOverlay';\nimport { INPUT_MODE_TOUCH, INPUT_MODE_CLICK } from '../state/reducers/options';\nimport ClickOverlay from './ClickOverlay';\n\nexport default function HueSlider({index}) {\n    const hues = useSelector(getHues);\n    const hue = hues[index];\n    const dispatch = useDispatch();\n    const inputMode = useSelector(getInputMode);\n    const style = {\n        filter: `hue-rotate(${hue}deg)`\n    };\n\n    function onDragUpdate(_, end) {\n        dispatch(changeHue(index, end.x * 360 | 0));\n    }\n\n    function onClick(pos) {\n        dispatch(changeHue(index, pos.x * 360 | 0));\n    }\n\n    return (\n        <div block=\"slider\">\n            <div block=\"slider\" elem=\"square\">\n                <div block=\"square\" mods={{type: index}} style={style}></div>\n            </div>\n            <div block=\"slider\" elem=\"bar-border\">\n                {inputMode === INPUT_MODE_TOUCH && <DraggingOverlay\n                    onDragUpdate={onDragUpdate}\n                />}\n                {inputMode === INPUT_MODE_CLICK && <ClickOverlay\n                    onClick={onClick}\n                />}\n                <div block=\"slider\" elem=\"bar\"\n                style={{width: `${hue / 3.6}%`}}>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport { useDispatch, useSelector, connect } from 'react-redux';\nimport { goBack } from 'connected-react-router';\nimport range from 'ramda/src/range';\nimport { SQUARE_TYPES, IS_KAY_OS, GAME_URL } from '../config';\nimport { resetHues, changeInputMode, requestStartGame } from '../state/actions';\nimport HueSlider from './HueSlider';\nimport { getInputMode } from '../state/selectors';\nimport { useKaiOsSoftwareKeys } from '../hooks';\nimport { INPUT_MODE_TOUCH } from '../state/reducers/options';\nimport BackLink from './BackLink';\n\nfunction Options({ goBack }) {\n    const { refLeft, refRight } = useKaiOsSoftwareKeys();\n    const inputMode = useSelector(getInputMode);\n    const sliders = range(0, SQUARE_TYPES).map((type) => {\n        return <HueSlider key={type} index={type} />\n    });\n\n    const dispatch = useDispatch();\n\n    const restart = () => {\n        dispatch(requestStartGame());\n    };\n\n    return (\n        <>\n            <div block=\"menu\">\n                {!IS_KAY_OS && (\n                    <div block=\"menu\" elem=\"block\">\n                        <div block=\"options-headline\">Input Mode</div>\n                        <button block=\"action\" onClick={() => dispatch(changeInputMode())}>\n                            {inputMode === INPUT_MODE_TOUCH ? 'Touch' : 'Click'}\n                        </button>\n                    </div>\n                )}\n                <div block=\"menu\" elem=\"block\">\n                    <div block=\"options-headline\">Square Colors</div>\n                    {sliders}\n                    <button block=\"action\" onClick={() => dispatch(resetHues())}>\n                        Reset\n                    </button>\n                </div>\n            </div>\n            <div block=\"main-menu\">\n                <div block=\"main-menu\" elem=\"action\">\n                    <BackLink to={GAME_URL} innerRef={refLeft} />\n                </div>\n                <div block=\"main-menu\" elem=\"action\" mods={{inactive: !IS_KAY_OS}}>\n                    SELECT\n                </div>\n                <div block=\"main-menu\" elem=\"action\">\n                    <BackLink to={GAME_URL} innerRef={refRight} onClick={restart}>\n                        Restart\n                    </BackLink>\n                </div>\n            </div>\n        </>\n    );\n}\n\nexport default connect(null, { goBack })(Options);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport createSagaMiddleware from 'redux-saga';\nimport persistState from 'redux-localstorage';\nimport { Switch, Route } from 'react-router';\nimport { routerMiddleware, ConnectedRouter } from 'connected-react-router';\nimport { createHashHistory } from 'history';\nimport 'pepjs';\nimport 'normalize.css';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport createReducers from './state/reducers';\nimport saga from './sagas';\nimport Game from './components/Game';\nimport Title from './components/Title';\nimport Tutorial from './components/Tutorial';\nimport { TITLE_URL, GAME_URL, TUTORIAL_URL, OPTIONS_URL } from './config';\nimport Options from './components/Options';\n\nfunction slicePersistedState(paths) {\n    return (state) => {\n        const persist = {...state};\n        delete persist.selection;\n        delete persist.tutorial;\n\n        return persist;\n    };\n}\n\nconst sagaMiddleware = createSagaMiddleware();\nconst history = createHashHistory();\n\nconst store = createStore(\n    createReducers(history),\n    compose(\n        persistState('', {slicer: slicePersistedState, key: 'quood'}),\n        applyMiddleware(\n            routerMiddleware(history),\n            sagaMiddleware\n        )\n    )\n);\n\nsagaMiddleware.run(saga);\n\nReactDOM.render((\n    <Provider store={store}>\n        <ConnectedRouter history={history}>\n            <Switch>\n                <Route exact path={TITLE_URL} render={() => <Title />} />\n                <Route exact path={GAME_URL} render={() => <Game />} />\n                <Route exact path={TUTORIAL_URL} render={() => <Tutorial />} />\n                <Route exact path={OPTIONS_URL} render={() => <Options />} />\n            </Switch>\n        </ConnectedRouter>\n    </Provider>\n), document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}